(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))l(f);new MutationObserver(f=>{for(const u of f)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function a(f){const u={};return f.integrity&&(u.integrity=f.integrity),f.referrerPolicy&&(u.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?u.credentials="include":f.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(f){if(f.ep)return;f.ep=!0;const u=a(f);fetch(f.href,u)}})();const vo=!1;var xi=Array.isArray,sl=Array.prototype.indexOf,dn=Array.prototype.includes,ki=Array.from,La=Object.defineProperty,cn=Object.getOwnPropertyDescriptor,Na=Object.getOwnPropertyDescriptors,ll=Object.prototype,ul=Array.prototype,So=Object.getPrototypeOf,ga=Object.isExtensible;const fn=()=>{};function cl(r){return r()}function ho(r){for(var n=0;n<r.length;n++)r[n]()}function qa(){var r,n,a=new Promise((l,f)=>{r=l,n=f});return{promise:a,resolve:r,reject:n}}const kt=2,gi=4,Un=8,za=1<<24,pr=16,Zt=32,Gr=64,Ao=128,Ht=512,mt=1024,Et=2048,Yt=4096,Nt=8192,dr=16384,Oo=32768,vn=65536,ya=1<<17,Ua=1<<18,wn=1<<19,Va=1<<20,Cr=1<<25,Hr=32768,po=1<<21,Bo=1<<22,Sr=1<<23,vr=Symbol("$state"),fl=Symbol("legacy props"),dl=Symbol(""),ln=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Po(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function vl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function hl(r,n,a){throw new Error("https://svelte.dev/e/each_key_duplicate")}function pl(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ml(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function gl(r){throw new Error("https://svelte.dev/e/effect_orphan")}function yl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function bl(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function _l(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function wl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function xl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function kl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const El=1,Cl=2,Sl=16,Al=1,Ol=2,Bl=4,Pl=8,Dl=16,$a=1,Ml=2,xt=Symbol(),jl="http://www.w3.org/1999/xhtml";function Rl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ha(r){return r===this.v}function Wa(r,n){return r!=r?n==n:r!==n||r!==null&&typeof r=="object"||typeof r=="function"}function Ya(r){return!Wa(r,this.v)}let xn=!1,Tl=!1;function Il(){xn=!0}let tt=null;function hn(r){tt=r}function Tt(r,n=!1,a){tt={p:tt,i:!1,c:null,e:null,s:r,x:null,l:xn&&!n?{s:null,u:null,$:[]}:null}}function It(r){var n=tt,a=n.e;if(a!==null){n.e=null;for(var l of a)vs(l)}return n.i=!0,tt=n.p,{}}function kn(){return!xn||tt!==null&&tt.l===null}let zr=[];function Ga(){var r=zr;zr=[],ho(r)}function nr(r){if(zr.length===0&&!Nn){var n=zr;queueMicrotask(()=>{n===zr&&Ga()})}zr.push(r)}function Kl(){for(;zr.length>0;)Ga()}function Xa(r){var n=Ye;if(n===null)return Le.f|=Sr,r;if((n.f&Oo)===0){if((n.f&Ao)===0)throw r;n.b.error(r)}else pn(r,n)}function pn(r,n){for(;n!==null;){if((n.f&Ao)!==0)try{n.b.error(r);return}catch(a){r=a}n=n.parent}throw r}const Fl=-7169;function ct(r,n){r.f=r.f&Fl|n}function Do(r){(r.f&Ht)!==0||r.deps===null?ct(r,mt):ct(r,Yt)}function Ja(r){if(r!==null)for(const n of r)(n.f&kt)===0||(n.f&Hr)===0||(n.f^=Hr,Ja(n.deps))}function Qa(r,n,a){(r.f&Et)!==0?n.add(r):(r.f&Yt)!==0&&a.add(r),Ja(r.deps),ct(r,mt)}const vi=new Set;let Ge=null,mo=null,Xt=null,Mt=[],Ei=null,go=!1,Nn=!1;class Ar{committed=!1;current=new Map;previous=new Map;#t=new Set;#s=new Set;#e=0;#o=0;#a=null;#n=new Set;#r=new Set;#i=new Map;is_fork=!1;#l=!1;is_deferred(){return this.is_fork||this.#o>0}skip_effect(n){this.#i.has(n)||this.#i.set(n,{d:[],m:[]})}unskip_effect(n){var a=this.#i.get(n);if(a){this.#i.delete(n);for(var l of a.d)ct(l,Et),Jt(l);for(l of a.m)ct(l,Yt),Jt(l)}}process(n){Mt=[],this.apply();var a=[],l=[];for(const f of n)this.#u(f,a,l);if(this.is_deferred()){this.#c(l),this.#c(a);for(const[f,u]of this.#i)rs(f,u)}else{for(const f of this.#t)f();this.#t.clear(),this.#e===0&&this.#f(),mo=this,Ge=null,ba(l),ba(a),mo=null,this.#a?.resolve()}Xt=null}#u(n,a,l){n.f^=mt;for(var f=n.first,u=null;f!==null;){var m=f.f,h=(m&(Zt|Gr))!==0,g=h&&(m&mt)!==0,y=g||(m&Nt)!==0||this.#i.has(f);if(!y&&f.fn!==null){h?f.f^=mt:u!==null&&(m&(gi|Un|za))!==0?u.b.defer_effect(f):(m&gi)!==0?a.push(f):Sn(f)&&((m&pr)!==0&&this.#r.add(f),yn(f));var P=f.first;if(P!==null){f=P;continue}}var S=f.parent;for(f=f.next;f===null&&S!==null;)S===u&&(u=null),f=S.next,S=S.parent}}#c(n){for(var a=0;a<n.length;a+=1)Qa(n[a],this.#n,this.#r)}capture(n,a){a!==xt&&!this.previous.has(n)&&this.previous.set(n,a),(n.f&Sr)===0&&(this.current.set(n,n.v),Xt?.set(n,n.v))}activate(){Ge=this,this.apply()}deactivate(){Ge===this&&(Ge=null,Xt=null)}flush(){if(this.activate(),Mt.length>0){if(Za(),Ge!==null&&Ge!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const n of this.#s)n(this);this.#s.clear()}#f(){if(vi.size>1){this.previous.clear();var n=Xt,a=!0;for(const f of vi){if(f===this){a=!1;continue}const u=[];for(const[h,g]of this.current){if(f.current.has(h))if(a&&g!==f.current.get(h))f.current.set(h,g);else continue;u.push(h)}if(u.length===0)continue;const m=[...f.current.keys()].filter(h=>!this.current.has(h));if(m.length>0){var l=Mt;Mt=[];const h=new Set,g=new Map;for(const y of u)es(y,m,h,g);if(Mt.length>0){Ge=f,f.apply();for(const y of Mt)f.#u(y,[],[]);f.deactivate()}Mt=l}}Ge=null,Xt=n}this.committed=!0,vi.delete(this)}increment(n){this.#e+=1,n&&(this.#o+=1)}decrement(n){this.#e-=1,n&&(this.#o-=1),!this.#l&&(this.#l=!0,nr(()=>{this.#l=!1,this.is_deferred()?Mt.length>0&&this.flush():this.revive()}))}revive(){for(const n of this.#n)this.#r.delete(n),ct(n,Et),Jt(n);for(const n of this.#r)ct(n,Yt),Jt(n);this.flush()}oncommit(n){this.#t.add(n)}ondiscard(n){this.#s.add(n)}settled(){return(this.#a??=qa()).promise}static ensure(){if(Ge===null){const n=Ge=new Ar;vi.add(Ge),Nn||nr(()=>{Ge===n&&n.flush()})}return Ge}apply(){}}function Ll(r){var n=Nn;Nn=!0;try{for(var a;;){if(Kl(),Mt.length===0&&(Ge?.flush(),Mt.length===0))return Ei=null,a;Za()}}finally{Nn=n}}function Za(){go=!0;var r=null;try{for(var n=0;Mt.length>0;){var a=Ar.ensure();if(n++>1e3){var l,f;Nl()}a.process(Mt),Or.clear()}}finally{Mt=[],go=!1,Ei=null}}function Nl(){try{yl()}catch(r){pn(r,Ei)}}let ur=null;function ba(r){var n=r.length;if(n!==0){for(var a=0;a<n;){var l=r[a++];if((l.f&(dr|Nt))===0&&Sn(l)&&(ur=new Set,yn(l),l.deps===null&&l.first===null&&l.nodes===null&&(l.teardown===null&&l.ac===null?ms(l):l.fn=null),ur?.size>0)){Or.clear();for(const f of ur){if((f.f&(dr|Nt))!==0)continue;const u=[f];let m=f.parent;for(;m!==null;)ur.has(m)&&(ur.delete(m),u.push(m)),m=m.parent;for(let h=u.length-1;h>=0;h--){const g=u[h];(g.f&(dr|Nt))===0&&yn(g)}}ur.clear()}}ur=null}}function es(r,n,a,l){if(!a.has(r)&&(a.add(r),r.reactions!==null))for(const f of r.reactions){const u=f.f;(u&kt)!==0?es(f,n,a,l):(u&(Bo|pr))!==0&&(u&Et)===0&&ts(f,n,l)&&(ct(f,Et),Jt(f))}}function ts(r,n,a){const l=a.get(r);if(l!==void 0)return l;if(r.deps!==null)for(const f of r.deps){if(dn.call(n,f))return!0;if((f.f&kt)!==0&&ts(f,n,a))return a.set(f,!0),!0}return a.set(r,!1),!1}function Jt(r){for(var n=Ei=r;n.parent!==null;){n=n.parent;var a=n.f;if(go&&n===Ye&&(a&pr)!==0&&(a&Ua)===0)return;if((a&(Gr|Zt))!==0){if((a&mt)===0)return;n.f^=mt}}Mt.push(n)}function rs(r,n){if(!((r.f&Zt)!==0&&(r.f&mt)!==0)){(r.f&Et)!==0?n.d.push(r):(r.f&Yt)!==0&&n.m.push(r),ct(r,mt);for(var a=r.first;a!==null;)rs(a,n),a=a.next}}function ql(r){let n=0,a=Wr(0),l;return()=>{jo()&&(v(a),Cn(()=>(n===0&&(l=fe(()=>r(()=>qn(a)))),n+=1,()=>{nr(()=>{n-=1,n===0&&(l?.(),l=void 0,qn(a))})})))}}var zl=vn|wn|Ao;function Ul(r,n,a){new Vl(r,n,a)}class Vl{parent;is_pending=!1;#t;#s=null;#e;#o;#a;#n=null;#r=null;#i=null;#l=null;#u=null;#c=0;#f=0;#h=!1;#v=!1;#p=new Set;#m=new Set;#d=null;#w=ql(()=>(this.#d=Wr(this.#c),()=>{this.#d=null}));constructor(n,a,l){this.#t=n,this.#e=a,this.#o=l,this.parent=Ye.b,this.is_pending=!!this.#e.pending,this.#a=Oi(()=>{Ye.b=this;{var f=this.#b();try{this.#n=$t(()=>l(f))}catch(u){this.error(u)}this.#f>0?this.#y():this.is_pending=!1}return()=>{this.#u?.remove()}},zl)}#x(){try{this.#n=$t(()=>this.#o(this.#t))}catch(n){this.error(n)}}#k(){const n=this.#e.pending;n&&(this.#r=$t(()=>n(this.#t)),nr(()=>{var a=this.#b();this.#n=this.#g(()=>(Ar.ensure(),$t(()=>this.#o(a)))),this.#f>0?this.#y():(Vr(this.#r,()=>{this.#r=null}),this.is_pending=!1)}))}#b(){var n=this.#t;return this.is_pending&&(this.#u=hr(),this.#t.before(this.#u),n=this.#u),n}defer_effect(n){Qa(n,this.#p,this.#m)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(n){var a=Ye,l=Le,f=tt;ir(this.#a),Gt(this.#a),hn(this.#a.ctx);try{return n()}catch(u){return Xa(u),null}finally{ir(a),Gt(l),hn(f)}}#y(){const n=this.#e.pending;this.#n!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#u),bs(this.#n,this.#l)),this.#r===null&&(this.#r=$t(()=>n(this.#t)))}#_(n){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(n);return}if(this.#f+=n,this.#f===0){this.is_pending=!1;for(const a of this.#p)ct(a,Et),Jt(a);for(const a of this.#m)ct(a,Yt),Jt(a);this.#p.clear(),this.#m.clear(),this.#r&&Vr(this.#r,()=>{this.#r=null}),this.#l&&(this.#t.before(this.#l),this.#l=null)}}update_pending_count(n){this.#_(n),this.#c+=n,!(!this.#d||this.#h)&&(this.#h=!0,nr(()=>{this.#h=!1,this.#d&&gn(this.#d,this.#c)}))}get_effect_pending(){return this.#w(),v(this.#d)}error(n){var a=this.#e.onerror;let l=this.#e.failed;if(this.#v||!a&&!l)throw n;this.#n&&(Rt(this.#n),this.#n=null),this.#r&&(Rt(this.#r),this.#r=null),this.#i&&(Rt(this.#i),this.#i=null);var f=!1,u=!1;const m=()=>{if(f){Rl();return}f=!0,u&&kl(),Ar.ensure(),this.#c=0,this.#i!==null&&Vr(this.#i,()=>{this.#i=null}),this.is_pending=this.has_pending_snippet(),this.#n=this.#g(()=>(this.#v=!1,$t(()=>this.#o(this.#t)))),this.#f>0?this.#y():this.is_pending=!1};nr(()=>{try{u=!0,a?.(n,m),u=!1}catch(h){pn(h,this.#a&&this.#a.parent)}l&&(this.#i=this.#g(()=>{Ar.ensure(),this.#v=!0;try{return $t(()=>{l(this.#t,()=>n,()=>m)})}catch(h){return pn(h,this.#a.parent),null}finally{this.#v=!1}}))})}}function $l(r,n,a,l){const f=kn()?Ci:mn;var u=r.filter(A=>!A.settled);if(a.length===0&&u.length===0){l(n.map(f));return}var m=Ge,h=Ye,g=Hl(),y=u.length===1?u[0].promise:u.length>1?Promise.all(u.map(A=>A.promise)):null;function P(A){g();try{l(A)}catch(K){(h.f&dr)===0&&pn(K,h)}m?.deactivate(),yo()}if(a.length===0){y.then(()=>P(n.map(f)));return}function S(){g(),Promise.all(a.map(A=>Wl(A))).then(A=>P([...n.map(f),...A])).catch(A=>pn(A,h))}y?y.then(S):S()}function Hl(){var r=Ye,n=Le,a=tt,l=Ge;return function(u=!0){ir(r),Gt(n),hn(a),u&&l?.activate()}}function yo(){ir(null),Gt(null),hn(null)}function Ci(r){var n=kt|Et,a=Le!==null&&(Le.f&kt)!==0?Le:null;return Ye!==null&&(Ye.f|=wn),{ctx:tt,deps:null,effects:null,equals:Ha,f:n,fn:r,reactions:null,rv:0,v:xt,wv:0,parent:a??Ye,ac:null}}function Wl(r,n,a){let l=Ye;l===null&&vl();var f=l.b,u=void 0,m=Wr(xt),h=!Le,g=new Map;return iu(()=>{var y=qa();u=y.promise;try{Promise.resolve(r()).then(y.resolve,y.reject).then(()=>{P===Ge&&P.committed&&P.deactivate(),yo()})}catch(K){y.reject(K),yo()}var P=Ge;if(h){var S=f.is_rendered();f.update_pending_count(1),P.increment(S),g.get(P)?.reject(ln),g.delete(P),g.set(P,y)}const A=(K,T=void 0)=>{if(P.activate(),T)T!==ln&&(m.f|=Sr,gn(m,T));else{(m.f&Sr)!==0&&(m.f^=Sr),gn(m,K);for(const[V,Z]of g){if(g.delete(V),V===P)break;Z.reject(ln)}}h&&(f.update_pending_count(-1),P.decrement(S))};y.promise.then(A,K=>A(null,K||"unknown"))}),Ai(()=>{for(const y of g.values())y.reject(ln)}),new Promise(y=>{function P(S){function A(){S===u?y(m):P(u)}S.then(A,A)}P(u)})}function mn(r){const n=Ci(r);return n.equals=Ya,n}function ns(r){var n=r.effects;if(n!==null){r.effects=null;for(var a=0;a<n.length;a+=1)Rt(n[a])}}function Yl(r){for(var n=r.parent;n!==null;){if((n.f&kt)===0)return(n.f&dr)===0?n:null;n=n.parent}return null}function Mo(r){var n,a=Ye;ir(Yl(r));try{r.f&=~Hr,ns(r),n=ks(r)}finally{ir(a)}return n}function is(r){var n=Mo(r);if(!r.equals(n)&&(r.wv=ws(),(!Ge?.is_fork||r.deps===null)&&(r.v=n,r.deps===null))){ct(r,mt);return}Pr||(Xt!==null?(jo()||Ge?.is_fork)&&Xt.set(r,n):Do(r))}let bo=new Set;const Or=new Map;let os=!1;function Wr(r,n){var a={f:0,v:r,reactions:null,equals:Ha,rv:0,wv:0};return a}function xr(r,n){const a=Wr(r);return su(a),a}function re(r,n=!1,a=!0){const l=Wr(r);return n||(l.equals=Ya),xn&&a&&tt!==null&&tt.l!==null&&(tt.l.s??=[]).push(l),l}function Bt(r,n){return R(r,fe(()=>v(r))),n}function R(r,n,a=!1){Le!==null&&(!Qt||(Le.f&ya)!==0)&&kn()&&(Le.f&(kt|pr|Bo|ya))!==0&&(Wt===null||!dn.call(Wt,r))&&xl();let l=a?un(n):n;return gn(r,l)}function gn(r,n){if(!r.equals(n)){var a=r.v;Pr?Or.set(r,n):Or.set(r,a),r.v=n;var l=Ar.ensure();if(l.capture(r,a),(r.f&kt)!==0){const f=r;(r.f&Et)!==0&&Mo(f),Do(f)}r.wv=ws(),as(r,Et),kn()&&Ye!==null&&(Ye.f&mt)!==0&&(Ye.f&(Zt|Gr))===0&&(Vt===null?lu([r]):Vt.push(r)),!l.is_fork&&bo.size>0&&!os&&Gl()}return n}function Gl(){os=!1;for(const r of bo)(r.f&mt)!==0&&ct(r,Yt),Sn(r)&&yn(r);bo.clear()}function _a(r,n=1){var a=v(r),l=n===1?a++:a--;return R(r,a),l}function qn(r){R(r,r.v+1)}function as(r,n){var a=r.reactions;if(a!==null)for(var l=kn(),f=a.length,u=0;u<f;u++){var m=a[u],h=m.f;if(!(!l&&m===Ye)){var g=(h&Et)===0;if(g&&ct(m,n),(h&kt)!==0){var y=m;Xt?.delete(y),(h&Hr)===0&&(h&Ht&&(m.f|=Hr),as(y,Yt))}else g&&((h&pr)!==0&&ur!==null&&ur.add(m),Jt(m))}}}function un(r){if(typeof r!="object"||r===null||vr in r)return r;const n=So(r);if(n!==ll&&n!==ul)return r;var a=new Map,l=xi(r),f=xr(0),u=$r,m=h=>{if($r===u)return h();var g=Le,y=$r;Gt(null),Ea(u);var P=h();return Gt(g),Ea(y),P};return l&&a.set("length",xr(r.length)),new Proxy(r,{defineProperty(h,g,y){(!("value"in y)||y.configurable===!1||y.enumerable===!1||y.writable===!1)&&_l();var P=a.get(g);return P===void 0?m(()=>{var S=xr(y.value);return a.set(g,S),S}):R(P,y.value,!0),!0},deleteProperty(h,g){var y=a.get(g);if(y===void 0){if(g in h){const P=m(()=>xr(xt));a.set(g,P),qn(f)}}else R(y,xt),qn(f);return!0},get(h,g,y){if(g===vr)return r;var P=a.get(g),S=g in h;if(P===void 0&&(!S||cn(h,g)?.writable)&&(P=m(()=>{var K=un(S?h[g]:xt),T=xr(K);return T}),a.set(g,P)),P!==void 0){var A=v(P);return A===xt?void 0:A}return Reflect.get(h,g,y)},getOwnPropertyDescriptor(h,g){var y=Reflect.getOwnPropertyDescriptor(h,g);if(y&&"value"in y){var P=a.get(g);P&&(y.value=v(P))}else if(y===void 0){var S=a.get(g),A=S?.v;if(S!==void 0&&A!==xt)return{enumerable:!0,configurable:!0,value:A,writable:!0}}return y},has(h,g){if(g===vr)return!0;var y=a.get(g),P=y!==void 0&&y.v!==xt||Reflect.has(h,g);if(y!==void 0||Ye!==null&&(!P||cn(h,g)?.writable)){y===void 0&&(y=m(()=>{var A=P?un(h[g]):xt,K=xr(A);return K}),a.set(g,y));var S=v(y);if(S===xt)return!1}return P},set(h,g,y,P){var S=a.get(g),A=g in h;if(l&&g==="length")for(var K=y;K<S.v;K+=1){var T=a.get(K+"");T!==void 0?R(T,xt):K in h&&(T=m(()=>xr(xt)),a.set(K+"",T))}if(S===void 0)(!A||cn(h,g)?.writable)&&(S=m(()=>xr(void 0)),R(S,un(y)),a.set(g,S));else{A=S.v!==xt;var V=m(()=>un(y));R(S,V)}var Z=Reflect.getOwnPropertyDescriptor(h,g);if(Z?.set&&Z.set.call(P,y),!A){if(l&&typeof g=="string"){var le=a.get("length"),ve=Number(g);Number.isInteger(ve)&&ve>=le.v&&R(le,ve+1)}qn(f)}return!0},ownKeys(h){v(f);var g=Reflect.ownKeys(h).filter(S=>{var A=a.get(S);return A===void 0||A.v!==xt});for(var[y,P]of a)P.v!==xt&&!(y in h)&&g.push(y);return g},setPrototypeOf(){wl()}})}function wa(r){try{if(r!==null&&typeof r=="object"&&vr in r)return r[vr]}catch{}return r}function Xl(r,n){return Object.is(wa(r),wa(n))}var zn,ss,ls,us;function Jl(){if(zn===void 0){zn=window,ss=/Firefox/.test(navigator.userAgent);var r=Element.prototype,n=Node.prototype,a=Text.prototype;ls=cn(n,"firstChild").get,us=cn(n,"nextSibling").get,ga(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),ga(a)&&(a.__t=void 0)}}function hr(r=""){return document.createTextNode(r)}function cr(r){return ls.call(r)}function Vn(r){return us.call(r)}function M(r,n){return cr(r)}function Br(r,n=!1){{var a=cr(r);return a instanceof Comment&&a.data===""?Vn(a):a}}function F(r,n=1,a=!1){let l=r;for(;n--;)l=Vn(l);return l}function Ql(r){r.textContent=""}function cs(){return!1}let xa=!1;function Zl(){xa||(xa=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{if(!r.defaultPrevented)for(const n of r.target.elements)n.__on_r?.()})},{capture:!0}))}function Si(r){var n=Le,a=Ye;Gt(null),ir(null);try{return r()}finally{Gt(n),ir(a)}}function fs(r,n,a,l=a){r.addEventListener(n,()=>Si(a));const f=r.__on_r;f?r.__on_r=()=>{f(),l(!0)}:r.__on_r=()=>l(!0),Zl()}function ds(r){Ye===null&&(Le===null&&gl(),ml()),Pr&&pl()}function eu(r,n){var a=n.last;a===null?n.last=n.first=r:(a.next=r,r.prev=a,n.last=r)}function or(r,n,a){var l=Ye;l!==null&&(l.f&Nt)!==0&&(r|=Nt);var f={ctx:tt,deps:null,nodes:null,f:r|Et|Ht,first:null,fn:n,last:null,next:null,parent:l,b:l&&l.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{yn(f),f.f|=Oo}catch(h){throw Rt(f),h}else n!==null&&Jt(f);var u=f;if(a&&u.deps===null&&u.teardown===null&&u.nodes===null&&u.first===u.last&&(u.f&wn)===0&&(u=u.first,(r&pr)!==0&&(r&vn)!==0&&u!==null&&(u.f|=vn)),u!==null&&(u.parent=l,l!==null&&eu(u,l),Le!==null&&(Le.f&kt)!==0&&(r&Gr)===0)){var m=Le;(m.effects??=[]).push(u)}return f}function jo(){return Le!==null&&!Qt}function Ai(r){const n=or(Un,null,!1);return ct(n,mt),n.teardown=r,n}function _o(r){ds();var n=Ye.f,a=!Le&&(n&Zt)!==0&&(n&Oo)===0;if(a){var l=tt;(l.e??=[]).push(r)}else return vs(r)}function vs(r){return or(gi|Va,r,!1)}function tu(r){return ds(),or(Un|Va,r,!0)}function ru(r){Ar.ensure();const n=or(Gr|wn,r,!0);return(a={})=>new Promise(l=>{a.outro?Vr(n,()=>{Rt(n),l(void 0)}):(Rt(n),l(void 0))})}function nu(r){return or(gi,r,!1)}function ut(r,n){var a=tt,l={effect:null,ran:!1,deps:r};a.l.$.push(l),l.effect=Cn(()=>{r(),!l.ran&&(l.ran=!0,fe(n))})}function En(){var r=tt;Cn(()=>{for(var n of r.l.$){n.deps();var a=n.effect;(a.f&mt)!==0&&a.deps!==null&&ct(a,Yt),Sn(a)&&yn(a),n.ran=!1}})}function iu(r){return or(Bo|wn,r,!0)}function Cn(r,n=0){return or(Un|n,r,!0)}function Be(r,n=[],a=[],l=[]){$l(l,n,a,f=>{or(Un,()=>r(...f.map(v)),!0)})}function Oi(r,n=0){var a=or(pr|n,r,!0);return a}function $t(r){return or(Zt|wn,r,!0)}function hs(r){var n=r.teardown;if(n!==null){const a=Pr,l=Le;ka(!0),Gt(null);try{n.call(null)}finally{ka(a),Gt(l)}}}function ps(r,n=!1){var a=r.first;for(r.first=r.last=null;a!==null;){const f=a.ac;f!==null&&Si(()=>{f.abort(ln)});var l=a.next;(a.f&Gr)!==0?a.parent=null:Rt(a,n),a=l}}function ou(r){for(var n=r.first;n!==null;){var a=n.next;(n.f&Zt)===0&&Rt(n),n=a}}function Rt(r,n=!0){var a=!1;(n||(r.f&Ua)!==0)&&r.nodes!==null&&r.nodes.end!==null&&(au(r.nodes.start,r.nodes.end),a=!0),ps(r,n&&!a),yi(r,0),ct(r,dr);var l=r.nodes&&r.nodes.t;if(l!==null)for(const u of l)u.stop();hs(r);var f=r.parent;f!==null&&f.first!==null&&ms(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes=r.ac=null}function au(r,n){for(;r!==null;){var a=r===n?null:Vn(r);r.remove(),r=a}}function ms(r){var n=r.parent,a=r.prev,l=r.next;a!==null&&(a.next=l),l!==null&&(l.prev=a),n!==null&&(n.first===r&&(n.first=l),n.last===r&&(n.last=a))}function Vr(r,n,a=!0){var l=[];gs(r,l,!0);var f=()=>{a&&Rt(r),n&&n()},u=l.length;if(u>0){var m=()=>--u||f();for(var h of l)h.out(m)}else f()}function gs(r,n,a){if((r.f&Nt)===0){r.f^=Nt;var l=r.nodes&&r.nodes.t;if(l!==null)for(const h of l)(h.is_global||a)&&n.push(h);for(var f=r.first;f!==null;){var u=f.next,m=(f.f&vn)!==0||(f.f&Zt)!==0&&(r.f&pr)!==0;gs(f,n,m?a:!1),f=u}}}function Ro(r){ys(r,!0)}function ys(r,n){if((r.f&Nt)!==0){r.f^=Nt,(r.f&mt)===0&&(ct(r,Et),Jt(r));for(var a=r.first;a!==null;){var l=a.next,f=(a.f&vn)!==0||(a.f&Zt)!==0;ys(a,f?n:!1),a=l}var u=r.nodes&&r.nodes.t;if(u!==null)for(const m of u)(m.is_global||n)&&m.in()}}function bs(r,n){if(r.nodes)for(var a=r.nodes.start,l=r.nodes.end;a!==null;){var f=a===l?null:Vn(a);n.append(a),a=f}}let pi=!1,Pr=!1;function ka(r){Pr=r}let Le=null,Qt=!1;function Gt(r){Le=r}let Ye=null;function ir(r){Ye=r}let Wt=null;function su(r){Le!==null&&(Wt===null?Wt=[r]:Wt.push(r))}let jt=null,Lt=0,Vt=null;function lu(r){Vt=r}let _s=1,Ur=0,$r=Ur;function Ea(r){$r=r}function ws(){return++_s}function Sn(r){var n=r.f;if((n&Et)!==0)return!0;if(n&kt&&(r.f&=~Hr),(n&Yt)!==0){for(var a=r.deps,l=a.length,f=0;f<l;f++){var u=a[f];if(Sn(u)&&is(u),u.wv>r.wv)return!0}(n&Ht)!==0&&Xt===null&&ct(r,mt)}return!1}function xs(r,n,a=!0){var l=r.reactions;if(l!==null&&!(Wt!==null&&dn.call(Wt,r)))for(var f=0;f<l.length;f++){var u=l[f];(u.f&kt)!==0?xs(u,n,!1):n===u&&(a?ct(u,Et):(u.f&mt)!==0&&ct(u,Yt),Jt(u))}}function ks(r){var n=jt,a=Lt,l=Vt,f=Le,u=Wt,m=tt,h=Qt,g=$r,y=r.f;jt=null,Lt=0,Vt=null,Le=(y&(Zt|Gr))===0?r:null,Wt=null,hn(r.ctx),Qt=!1,$r=++Ur,r.ac!==null&&(Si(()=>{r.ac.abort(ln)}),r.ac=null);try{r.f|=po;var P=r.fn,S=P(),A=r.deps,K=Ge?.is_fork;if(jt!==null){var T;if(K||yi(r,Lt),A!==null&&Lt>0)for(A.length=Lt+jt.length,T=0;T<jt.length;T++)A[Lt+T]=jt[T];else r.deps=A=jt;if(jo()&&(r.f&Ht)!==0)for(T=Lt;T<A.length;T++)(A[T].reactions??=[]).push(r)}else!K&&A!==null&&Lt<A.length&&(yi(r,Lt),A.length=Lt);if(kn()&&Vt!==null&&!Qt&&A!==null&&(r.f&(kt|Yt|Et))===0)for(T=0;T<Vt.length;T++)xs(Vt[T],r);if(f!==null&&f!==r){if(Ur++,f.deps!==null)for(let V=0;V<a;V+=1)f.deps[V].rv=Ur;if(n!==null)for(const V of n)V.rv=Ur;Vt!==null&&(l===null?l=Vt:l.push(...Vt))}return(r.f&Sr)!==0&&(r.f^=Sr),S}catch(V){return Xa(V)}finally{r.f^=po,jt=n,Lt=a,Vt=l,Le=f,Wt=u,hn(m),Qt=h,$r=g}}function uu(r,n){let a=n.reactions;if(a!==null){var l=sl.call(a,r);if(l!==-1){var f=a.length-1;f===0?a=n.reactions=null:(a[l]=a[f],a.pop())}}if(a===null&&(n.f&kt)!==0&&(jt===null||!dn.call(jt,n))){var u=n;(u.f&Ht)!==0&&(u.f^=Ht,u.f&=~Hr),Do(u),ns(u),yi(u,0)}}function yi(r,n){var a=r.deps;if(a!==null)for(var l=n;l<a.length;l++)uu(r,a[l])}function yn(r){var n=r.f;if((n&dr)===0){ct(r,mt);var a=Ye,l=pi;Ye=r,pi=!0;try{(n&(pr|za))!==0?ou(r):ps(r),hs(r);var f=ks(r);r.teardown=typeof f=="function"?f:null,r.wv=_s;var u;vo&&Tl&&(r.f&Et)!==0&&r.deps}finally{pi=l,Ye=a}}}async function cu(){await Promise.resolve(),Ll()}function v(r){var n=r.f,a=(n&kt)!==0;if(Le!==null&&!Qt){var l=Ye!==null&&(Ye.f&dr)!==0;if(!l&&(Wt===null||!dn.call(Wt,r))){var f=Le.deps;if((Le.f&po)!==0)r.rv<Ur&&(r.rv=Ur,jt===null&&f!==null&&f[Lt]===r?Lt++:jt===null?jt=[r]:jt.push(r));else{(Le.deps??=[]).push(r);var u=r.reactions;u===null?r.reactions=[Le]:dn.call(u,Le)||u.push(Le)}}}if(Pr&&Or.has(r))return Or.get(r);if(a){var m=r;if(Pr){var h=m.v;return((m.f&mt)===0&&m.reactions!==null||Cs(m))&&(h=Mo(m)),Or.set(m,h),h}var g=(m.f&Ht)===0&&!Qt&&Le!==null&&(pi||(Le.f&Ht)!==0),y=m.deps===null;Sn(m)&&(g&&(m.f|=Ht),is(m)),g&&!y&&Es(m)}if(Xt?.has(r))return Xt.get(r);if((r.f&Sr)!==0)throw r.v;return r.v}function Es(r){if(r.deps!==null){r.f|=Ht;for(const n of r.deps)(n.reactions??=[]).push(r),(n.f&kt)!==0&&(n.f&Ht)===0&&Es(n)}}function Cs(r){if(r.v===xt)return!0;if(r.deps===null)return!1;for(const n of r.deps)if(Or.has(n)||(n.f&kt)!==0&&Cs(n))return!0;return!1}function fe(r){var n=Qt;try{return Qt=!0,r()}finally{Qt=n}}function Xe(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(vr in r)wo(r);else if(!Array.isArray(r))for(let n in r){const a=r[n];typeof a=="object"&&a&&vr in a&&wo(a)}}}function wo(r,n=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!n.has(r)){n.add(r),r instanceof Date&&r.getTime();for(let l in r)try{wo(r[l],n)}catch{}const a=So(r);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const l=Na(a);for(let f in l){const u=l[f].get;if(u)try{u.call(r)}catch{}}}}}const fu=["touchstart","touchmove"];function du(r){return fu.includes(r)}const vu=new Set,Ca=new Set;function hu(r,n,a,l={}){function f(u){if(l.capture||Fn.call(n,u),!u.cancelBubble)return Si(()=>a?.call(this,u))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?nr(()=>{n.addEventListener(r,f,l)}):n.addEventListener(r,f,l),f}function be(r,n,a,l,f){var u={capture:l,passive:f},m=hu(r,n,a,u);(n===document.body||n===window||n===document||n instanceof HTMLMediaElement)&&Ai(()=>{n.removeEventListener(r,m,u)})}let Sa=null;function Fn(r){var n=this,a=n.ownerDocument,l=r.type,f=r.composedPath?.()||[],u=f[0]||r.target;Sa=r;var m=0,h=Sa===r&&r.__root;if(h){var g=f.indexOf(h);if(g!==-1&&(n===document||n===window)){r.__root=n;return}var y=f.indexOf(n);if(y===-1)return;g<=y&&(m=g)}if(u=f[m]||r.target,u!==n){La(r,"currentTarget",{configurable:!0,get(){return u||a}});var P=Le,S=Ye;Gt(null),ir(null);try{for(var A,K=[];u!==null;){var T=u.assignedSlot||u.parentNode||u.host||null;try{var V=u["__"+l];V!=null&&(!u.disabled||r.target===u)&&V.call(u,r)}catch(Z){A?K.push(Z):A=Z}if(r.cancelBubble||T===n||T===null)break;u=T}if(A){for(let Z of K)queueMicrotask(()=>{throw Z});throw A}}finally{r.__root=n,delete r.currentTarget,Gt(P),ir(S)}}}function Ss(r){var n=document.createElement("template");return n.innerHTML=r.replaceAll("<!>","<!---->"),n.content}function bn(r,n){var a=Ye;a.nodes===null&&(a.nodes={start:r,end:n,a:null,t:null})}function X(r,n){var a=(n&$a)!==0,l=(n&Ml)!==0,f,u=!r.startsWith("<!>");return()=>{f===void 0&&(f=Ss(u?r:"<!>"+r),a||(f=cr(f)));var m=l||ss?document.importNode(f,!0):f.cloneNode(!0);if(a){var h=cr(m),g=m.lastChild;bn(h,g)}else bn(m,m);return m}}function pu(r,n,a="svg"){var l=!r.startsWith("<!>"),f=(n&$a)!==0,u=`<${a}>${l?r:"<!>"+r}</${a}>`,m;return()=>{if(!m){var h=Ss(u),g=cr(h);if(f)for(m=document.createDocumentFragment();cr(g);)m.appendChild(cr(g));else m=cr(g)}var y=m.cloneNode(!0);if(f){var P=cr(y),S=y.lastChild;bn(P,S)}else bn(y,y);return y}}function wt(r,n){return pu(r,n,"svg")}function As(r=""){{var n=hr(r+"");return bn(n,n),n}}function To(){var r=document.createDocumentFragment(),n=document.createComment(""),a=hr();return r.append(n,a),bn(n,a),r}function z(r,n){r!==null&&r.before(n)}function Oe(r,n){var a=n==null?"":typeof n=="object"?n+"":n;a!==(r.__t??=r.nodeValue)&&(r.__t=a,r.nodeValue=a+"")}function mu(r,n){return gu(r,n)}const an=new Map;function gu(r,{target:n,anchor:a,props:l={},events:f,context:u,intro:m=!0}){Jl();var h=new Set,g=S=>{for(var A=0;A<S.length;A++){var K=S[A];if(!h.has(K)){h.add(K);var T=du(K);n.addEventListener(K,Fn,{passive:T});var V=an.get(K);V===void 0?(document.addEventListener(K,Fn,{passive:T}),an.set(K,1)):an.set(K,V+1)}}};g(ki(vu)),Ca.add(g);var y=void 0,P=ru(()=>{var S=a??n.appendChild(hr());return Ul(S,{pending:()=>{}},A=>{Tt({});var K=tt;u&&(K.c=u),f&&(l.$$events=f),y=r(A,l)||{},It()}),()=>{for(var A of h){n.removeEventListener(A,Fn);var K=an.get(A);--K===0?(document.removeEventListener(A,Fn),an.delete(A)):an.set(A,K)}Ca.delete(g),S!==a&&S.parentNode?.removeChild(S)}});return yu.set(y,P),y}let yu=new WeakMap;class Os{anchor;#t=new Map;#s=new Map;#e=new Map;#o=new Set;#a=!0;constructor(n,a=!0){this.anchor=n,this.#a=a}#n=()=>{var n=Ge;if(this.#t.has(n)){var a=this.#t.get(n),l=this.#s.get(a);if(l)Ro(l),this.#o.delete(a);else{var f=this.#e.get(a);f&&(this.#s.set(a,f.effect),this.#e.delete(a),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),l=f.effect)}for(const[u,m]of this.#t){if(this.#t.delete(u),u===n)break;const h=this.#e.get(m);h&&(Rt(h.effect),this.#e.delete(m))}for(const[u,m]of this.#s){if(u===a||this.#o.has(u))continue;const h=()=>{if(Array.from(this.#t.values()).includes(u)){var y=document.createDocumentFragment();bs(m,y),y.append(hr()),this.#e.set(u,{effect:m,fragment:y})}else Rt(m);this.#o.delete(u),this.#s.delete(u)};this.#a||!l?(this.#o.add(u),Vr(m,h,!1)):h()}}};#r=n=>{this.#t.delete(n);const a=Array.from(this.#t.values());for(const[l,f]of this.#e)a.includes(l)||(Rt(f.effect),this.#e.delete(l))};ensure(n,a){var l=Ge,f=cs();if(a&&!this.#s.has(n)&&!this.#e.has(n))if(f){var u=document.createDocumentFragment(),m=hr();u.append(m),this.#e.set(n,{effect:$t(()=>a(m)),fragment:u})}else this.#s.set(n,$t(()=>a(this.anchor)));if(this.#t.set(l,n),f){for(const[h,g]of this.#s)h===n?l.unskip_effect(g):l.skip_effect(g);for(const[h,g]of this.#e)h===n?l.unskip_effect(g.effect):l.skip_effect(g.effect);l.oncommit(this.#n),l.ondiscard(this.#r)}else this.#n()}}function de(r,n,a=!1){var l=new Os(r),f=a?vn:0;function u(m,h){l.ensure(m,h)}Oi(()=>{var m=!1;n((h,g=0)=>{m=!0,u(g,h)}),m||u(!1,null)},f)}const bu=Symbol("NaN");function _u(r,n,a){var l=new Os(r),f=!kn();Oi(()=>{var u=n();u!==u&&(u=bu),f&&u!==null&&typeof u=="object"&&(u={}),l.ensure(u,a)})}function wu(r,n,a){for(var l=[],f=n.length,u,m=n.length,h=0;h<f;h++){let S=n[h];Vr(S,()=>{if(u){if(u.pending.delete(S),u.done.add(S),u.pending.size===0){var A=r.outrogroups;xo(ki(u.done)),A.delete(u),A.size===0&&(r.outrogroups=null)}}else m-=1},!1)}if(m===0){var g=l.length===0&&a!==null;if(g){var y=a,P=y.parentNode;Ql(P),P.append(y),r.items.clear()}xo(n,!g)}else u={pending:new Set(n),done:new Set},(r.outrogroups??=new Set).add(u)}function xo(r,n=!0){for(var a=0;a<r.length;a++)Rt(r[a],n)}var Aa;function Bs(r,n,a,l,f,u=null){var m=r,h=new Map;{var g=r;m=g.appendChild(hr())}var y=null,P=mn(()=>{var Z=a();return xi(Z)?Z:Z==null?[]:ki(Z)}),S,A=!0;function K(){V.fallback=y,xu(V,S,m,n,l),y!==null&&(S.length===0?(y.f&Cr)===0?Ro(y):(y.f^=Cr,Ln(y,null,m)):Vr(y,()=>{y=null}))}var T=Oi(()=>{S=v(P);for(var Z=S.length,le=new Set,ve=Ge,we=cs(),ce=0;ce<Z;ce+=1){var G=S[ce],oe=l(G,ce),pe=A?null:h.get(oe);pe?(pe.v&&gn(pe.v,G),pe.i&&gn(pe.i,ce),we&&ve.unskip_effect(pe.e)):(pe=ku(h,A?m:Aa??=hr(),G,oe,ce,f,n,a),A||(pe.e.f|=Cr),h.set(oe,pe)),le.add(oe)}if(Z===0&&u&&!y&&(A?y=$t(()=>u(m)):(y=$t(()=>u(Aa??=hr())),y.f|=Cr)),Z>le.size&&hl(),!A)if(we){for(const[ue,je]of h)le.has(ue)||ve.skip_effect(je.e);ve.oncommit(K),ve.ondiscard(()=>{})}else K();v(P)}),V={effect:T,items:h,outrogroups:null,fallback:y};A=!1}function Kn(r){for(;r!==null&&(r.f&Zt)===0;)r=r.next;return r}function xu(r,n,a,l,f){var u=n.length,m=r.items,h=Kn(r.effect.first),g,y=null,P=[],S=[],A,K,T,V;for(V=0;V<u;V+=1){if(A=n[V],K=f(A,V),T=m.get(K).e,r.outrogroups!==null)for(const ue of r.outrogroups)ue.pending.delete(T),ue.done.delete(T);if((T.f&Cr)!==0)if(T.f^=Cr,T===h)Ln(T,null,a);else{var Z=y?y.next:h;T===r.effect.last&&(r.effect.last=T.prev),T.prev&&(T.prev.next=T.next),T.next&&(T.next.prev=T.prev),kr(r,y,T),kr(r,T,Z),Ln(T,Z,a),y=T,P=[],S=[],h=Kn(y.next);continue}if((T.f&Nt)!==0&&Ro(T),T!==h){if(g!==void 0&&g.has(T)){if(P.length<S.length){var le=S[0],ve;y=le.prev;var we=P[0],ce=P[P.length-1];for(ve=0;ve<P.length;ve+=1)Ln(P[ve],le,a);for(ve=0;ve<S.length;ve+=1)g.delete(S[ve]);kr(r,we.prev,ce.next),kr(r,y,we),kr(r,ce,le),h=le,y=ce,V-=1,P=[],S=[]}else g.delete(T),Ln(T,h,a),kr(r,T.prev,T.next),kr(r,T,y===null?r.effect.first:y.next),kr(r,y,T),y=T;continue}for(P=[],S=[];h!==null&&h!==T;)(g??=new Set).add(h),S.push(h),h=Kn(h.next);if(h===null)continue}(T.f&Cr)===0&&P.push(T),y=T,h=Kn(T.next)}if(r.outrogroups!==null){for(const ue of r.outrogroups)ue.pending.size===0&&(xo(ki(ue.done)),r.outrogroups?.delete(ue));r.outrogroups.size===0&&(r.outrogroups=null)}if(h!==null||g!==void 0){var G=[];if(g!==void 0)for(T of g)(T.f&Nt)===0&&G.push(T);for(;h!==null;)(h.f&Nt)===0&&h!==r.fallback&&G.push(h),h=Kn(h.next);var oe=G.length;if(oe>0){var pe=u===0?a:null;wu(r,G,pe)}}}function ku(r,n,a,l,f,u,m,h){var g=(m&El)!==0?(m&Sl)===0?re(a,!1,!1):Wr(a):null,y=(m&Cl)!==0?Wr(f):null;return{v:g,i:y,e:$t(()=>(u(n,g??a,y??f,h),()=>{r.delete(l)}))}}function Ln(r,n,a){if(r.nodes)for(var l=r.nodes.start,f=r.nodes.end,u=n&&(n.f&Cr)===0?n.nodes.start:a;l!==null;){var m=Vn(l);if(u.before(l),l===f)return;l=m}}function kr(r,n,a){n===null?r.effect.first=a:n.next=a,a===null?r.effect.last=n:a.prev=n}const Oa=[...` 	
\r\fÂ \v\uFEFF`];function Eu(r,n,a){var l=r==null?"":""+r;if(a){for(var f in a)if(a[f])l=l?l+" "+f:f;else if(l.length)for(var u=f.length,m=0;(m=l.indexOf(f,m))>=0;){var h=m+u;(m===0||Oa.includes(l[m-1]))&&(h===l.length||Oa.includes(l[h]))?l=(m===0?"":l.substring(0,m))+l.substring(h+1):m=h}}return l===""?null:l}function Dr(r,n,a,l,f,u){var m=r.__className;if(m!==a||m===void 0){var h=Eu(a,l,u);h==null?r.removeAttribute("class"):r.className=h,r.__className=a}else if(u&&f!==u)for(var g in u){var y=!!u[g];(f==null||y!==!!f[g])&&r.classList.toggle(g,y)}return u}const Cu=Symbol("is custom element"),Su=Symbol("is html");function Yr(r,n,a,l){var f=Au(r);f[n]!==(f[n]=a)&&(n==="loading"&&(r[dl]=a),a==null?r.removeAttribute(n):typeof a!="string"&&Ou(r).includes(n)?r[n]=a:r.setAttribute(n,a))}function Au(r){return r.__attributes??={[Cu]:r.nodeName.includes("-"),[Su]:r.namespaceURI===jl}}var Ba=new Map;function Ou(r){var n=r.getAttribute("is")||r.nodeName,a=Ba.get(n);if(a)return a;Ba.set(n,a=[]);for(var l,f=r,u=Element.prototype;u!==f;){l=Na(f);for(var m in l)l[m].set&&a.push(m);f=So(f)}return a}function ko(r,n,a=n){var l=new WeakSet;fs(r,"input",async f=>{var u=f?r.defaultValue:r.value;if(u=co(r)?fo(u):u,a(u),Ge!==null&&l.add(Ge),await cu(),u!==(u=n())){var m=r.selectionStart,h=r.selectionEnd,g=r.value.length;if(r.value=u??"",h!==null){var y=r.value.length;m===h&&h===g&&y>g?(r.selectionStart=y,r.selectionEnd=y):(r.selectionStart=m,r.selectionEnd=Math.min(h,y))}}}),fe(n)==null&&r.value&&(a(co(r)?fo(r.value):r.value),Ge!==null&&l.add(Ge)),Cn(()=>{var f=n();if(r===document.activeElement){var u=mo??Ge;if(l.has(u))return}co(r)&&f===fo(r.value)||r.type==="date"&&!f&&!r.value||f!==r.value&&(r.value=f??"")})}const uo=new Set;function Pa(r,n,a,l,f=l){var u=a.getAttribute("type")==="checkbox",m=r;if(n!==null)for(var h of n)m=m[h]??=[];m.push(a),fs(a,"change",()=>{var g=a.__value;u&&(g=Bu(m,g,a.checked)),f(g)},()=>f(u?[]:null)),Cn(()=>{var g=l();u?(g=g||[],a.checked=g.includes(a.__value)):a.checked=Xl(a.__value,g)}),Ai(()=>{var g=m.indexOf(a);g!==-1&&m.splice(g,1)}),uo.has(m)||(uo.add(m),nr(()=>{m.sort((g,y)=>g.compareDocumentPosition(y)===4?-1:1),uo.delete(m)})),nr(()=>{})}function Bu(r,n,a){for(var l=new Set,f=0;f<r.length;f+=1)r[f].checked&&l.add(r[f].__value);return a||l.delete(n),Array.from(l)}function co(r){var n=r.type;return n==="number"||n==="range"}function fo(r){return r===""?null:+r}function Da(r,n){return r===n||r?.[vr]===n}function Bi(r={},n,a,l){return nu(()=>{var f,u;return Cn(()=>{f=u,u=[],fe(()=>{r!==a(...u)&&(n(r,...u),f&&Da(a(...f),r)&&n(null,...f))})}),()=>{nr(()=>{u&&Da(a(...u),r)&&n(null,...u)})}}),r}function Io(r){return function(...n){var a=n[0];return a.stopPropagation(),r?.apply(this,n)}}function Ps(r){return function(...n){var a=n[0];return a.preventDefault(),r?.apply(this,n)}}function qt(r=!1){const n=tt,a=n.l.u;if(!a)return;let l=()=>Xe(n.s);if(r){let f=0,u={};const m=Ci(()=>{let h=!1;const g=n.s;for(const y in g)g[y]!==u[y]&&(u[y]=g[y],h=!0);return h&&f++,f});l=()=>v(m)}a.b.length&&tu(()=>{Ma(n,l),ho(a.b)}),_o(()=>{const f=fe(()=>a.m.map(cl));return()=>{for(const u of f)typeof u=="function"&&u()}}),a.a.length&&_o(()=>{Ma(n,l),ho(a.a)})}function Ma(r,n){if(r.l.s)for(const a of r.l.s)v(a);n()}function Pu(r,n){var a=r.$$events?.[n.type],l=xi(a)?a.slice():a==null?[]:[a];for(var f of l)f.call(this,n)}function Ds(r,n,a){if(r==null)return n(void 0),fn;const l=fe(()=>r.subscribe(n,a));return l.unsubscribe?()=>l.unsubscribe():l}const sn=[];function Ms(r,n=fn){let a=null;const l=new Set;function f(h){if(Wa(r,h)&&(r=h,a)){const g=!sn.length;for(const y of l)y[1](),sn.push(y,r);if(g){for(let y=0;y<sn.length;y+=2)sn[y][0](sn[y+1]);sn.length=0}}}function u(h){f(h(r))}function m(h,g=fn){const y=[h,g];return l.add(y),l.size===1&&(a=n(f,u)||fn),h(r),()=>{l.delete(y),l.size===0&&a&&(a(),a=null)}}return{set:f,update:u,subscribe:m}}function Du(r){let n;return Ds(r,a=>n=a)(),n}let hi=!1,Eo=Symbol();function Pi(r,n,a){const l=a[n]??={store:null,source:re(void 0),unsubscribe:fn};if(l.store!==r&&!(Eo in a))if(l.unsubscribe(),l.store=r??null,r==null)l.source.v=void 0,l.unsubscribe=fn;else{var f=!0;l.unsubscribe=Ds(r,u=>{f?l.source.v=u:R(l.source,u)}),f=!1}return r&&Eo in a?Du(r):v(l.source)}function Di(){const r={};function n(){Ai(()=>{for(var a in r)r[a].unsubscribe();La(r,Eo,{enumerable:!1,value:!0})})}return[r,n]}function Mu(r){var n=hi;try{return hi=!1,[r(),hi]}finally{hi=n}}function Me(r,n,a,l){var f=!xn||(a&Ol)!==0,u=(a&Pl)!==0,m=(a&Dl)!==0,h=l,g=!0,y=()=>(g&&(g=!1,h=m?fe(l):l),h),P;if(u){var S=vr in r||fl in r;P=cn(r,n)?.set??(S&&n in r?we=>r[n]=we:void 0)}var A,K=!1;u?[A,K]=Mu(()=>r[n]):A=r[n],A===void 0&&l!==void 0&&(A=y(),P&&(f&&bl(),P(A)));var T;if(f?T=()=>{var we=r[n];return we===void 0?y():(g=!0,we)}:T=()=>{var we=r[n];return we!==void 0&&(h=void 0),we===void 0?h:we},f&&(a&Bl)===0)return T;if(P){var V=r.$$legacy;return(function(we,ce){return arguments.length>0?((!f||!ce||V||K)&&P(ce?T():we),we):T()})}var Z=!1,le=((a&Al)!==0?Ci:mn)(()=>(Z=!1,T()));u&&v(le);var ve=Ye;return(function(we,ce){if(arguments.length>0){const G=ce?v(le):f&&u?un(we):we;return R(le,G),Z=!0,h!==void 0&&(h=G),we}return Pr&&Z||(ve.f&dr)!==0?le.v:v(le)})}function Mi(r){tt===null&&Po(),xn&&tt.l!==null?Ru(tt).m.push(r):_o(()=>{const n=fe(r);if(typeof n=="function")return n})}function Ko(r){tt===null&&Po(),Mi(()=>()=>fe(r))}function ju(r,n,{bubbles:a=!1,cancelable:l=!1}={}){return new CustomEvent(r,{detail:n,bubbles:a,cancelable:l})}function An(){const r=tt;return r===null&&Po(),(n,a,l)=>{const f=r.s.$$events?.[n];if(f){const u=xi(f)?f.slice():[f],m=ju(n,a,l);for(const h of u)h.call(r.x,m);return!m.defaultPrevented}return!0}}function Ru(r){var n=r.l;return n.u??={a:[],b:[],m:[]}}const Tu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Tu);Il();var Iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ku(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var mi={exports:{}},Fu=mi.exports,ja;function Lu(){return ja||(ja=1,(function(r,n){((a,l)=>{r.exports=l()})(Fu,function(){var a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}))(e,t)},l=function(){return(l=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function f(e,t,i){for(var o,s=0,c=t.length;s<c;s++)!o&&s in t||((o=o||Array.prototype.slice.call(t,0,s))[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Iu,m=Object.keys,h=Array.isArray;function g(e,t){return typeof t=="object"&&m(t).forEach(function(i){e[i]=t[i]}),e}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var y=Object.getPrototypeOf,P={}.hasOwnProperty;function S(e,t){return P.call(e,t)}function A(e,t){typeof t=="function"&&(t=t(y(e))),(typeof Reflect>"u"?m:Reflect.ownKeys)(t).forEach(function(i){T(e,i,t[i])})}var K=Object.defineProperty;function T(e,t,i,o){K(e,t,g(i&&S(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function V(e){return{from:function(t){return e.prototype=Object.create(t.prototype),T(e.prototype,"constructor",e),{extend:A.bind(null,e.prototype)}}}}var Z=Object.getOwnPropertyDescriptor,le=[].slice;function ve(e,t,i){return le.call(e,t,i)}function we(e,t){return t(e)}function ce(e){if(!e)throw new Error("Assertion Failed")}function G(e){u.setImmediate?setImmediate(e):setTimeout(e,0)}function oe(e,t){if(typeof t=="string"&&S(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var i=[],o=0,s=t.length;o<s;++o){var c=oe(e,t[o]);i.push(c)}return i}var d,p=t.indexOf(".");return p===-1||(d=e[t.substr(0,p)])==null?void 0:oe(d,t.substr(p+1))}function pe(e,t,i){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ce(typeof i!="string"&&"length"in i);for(var o=0,s=t.length;o<s;++o)pe(e,t[o],i[o])}else{var c,d,p=t.indexOf(".");p!==-1?(c=t.substr(0,p),(p=t.substr(p+1))===""?i===void 0?h(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=i:pe(d=(d=e[c])&&S(e,c)?d:e[c]={},p,i)):i===void 0?h(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=i}}function ue(e){var t,i={};for(t in e)S(e,t)&&(i[t]=e[t]);return i}var je=[].concat;function Ke(e){return je.apply([],e)}var ae="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ke([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return u[e]}),Ne=new Set(ae.map(function(e){return u[e]})),$e=null;function J(e){return $e=new WeakMap,e=(function t(i){if(!i||typeof i!="object")return i;var o=$e.get(i);if(o)return o;if(h(i)){o=[],$e.set(i,o);for(var s=0,c=i.length;s<c;++s)o.push(t(i[s]))}else if(Ne.has(i.constructor))o=i;else{var d,p=y(i);for(d in o=p===Object.prototype?{}:Object.create(p),$e.set(i,o),i)S(i,d)&&(o[d]=t(i[d]))}return o})(e),$e=null,e}var xe={}.toString;function Re(e){return xe.call(e).slice(8,-1)}var De=typeof Symbol<"u"?Symbol.iterator:"@@iterator",He=typeof De=="symbol"?function(e){var t;return e!=null&&(t=e[De])&&t.apply(e)}:function(){return null};function We(e,t){t=e.indexOf(t),0<=t&&e.splice(t,1)}var Ce={};function qe(e){var t,i,o,s;if(arguments.length===1){if(h(e))return e.slice();if(this===Ce&&typeof e=="string")return[e];if(s=He(e))for(i=[];!(o=s.next()).done;)i.push(o.value);else{if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(i=new Array(t);t--;)i[t]=e[t]}}else for(t=arguments.length,i=new Array(t);t--;)i[t]=arguments[t];return i}var nt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ae=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ze=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ae),ke={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Te(e,t){this.name=e,this.message=t}function ie(e,t){return e+". Errors: "+Object.keys(t).map(function(i){return t[i].toString()}).filter(function(i,o,s){return s.indexOf(i)===o}).join(`
`)}function Ee(e,t,i,o){this.failures=t,this.failedKeys=o,this.successCount=i,this.message=ie(e,t)}function ne(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(i){return t[i]}),this.failuresByPos=t,this.message=ie(e,this.failures)}V(Te).from(Error).extend({toString:function(){return this.name+": "+this.message}}),V(Ee).from(Te),V(ne).from(Te);var Se=Ze.reduce(function(e,t){return e[t]=t+"Error",e},{}),ht=Te,W=Ze.reduce(function(e,t){var i=t+"Error";function o(s,c){this.name=i,s?typeof s=="string"?(this.message="".concat(s).concat(c?`
 `+c:""),this.inner=c||null):typeof s=="object"&&(this.message="".concat(s.name," ").concat(s.message),this.inner=s):(this.message=ke[t]||i,this.inner=null)}return V(o).from(ht),e[t]=o,e},{}),Qe=(W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError,ae.reduce(function(e,t){return e[t+"Error"]=W[t],e},{}));ae=Ze.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=W[t]),e},{});function me(){}function ft(e){return e}function Kt(e,t){return e==null||e===ft?t:function(i){return t(e(i))}}function gt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ge(e,t){return e===me?t:function(){var i=e.apply(this,arguments),o=(i!==void 0&&(arguments[0]=i),this.onsuccess),s=this.onerror,c=(this.onsuccess=null,this.onerror=null,t.apply(this,arguments));return o&&(this.onsuccess=this.onsuccess?gt(o,this.onsuccess):o),s&&(this.onerror=this.onerror?gt(s,this.onerror):s),c!==void 0?c:i}}function L(e,t){return e===me?t:function(){e.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?gt(i,this.onsuccess):i),o&&(this.onerror=this.onerror?gt(o,this.onerror):o)}}function he(e,t){return e===me?t:function(s){var o=e.apply(this,arguments),s=(g(s,o),this.onsuccess),c=this.onerror,d=(this.onsuccess=null,this.onerror=null,t.apply(this,arguments));return s&&(this.onsuccess=this.onsuccess?gt(s,this.onsuccess):s),c&&(this.onerror=this.onerror?gt(c,this.onerror):c),o===void 0?d===void 0?void 0:d:g(o,d)}}function ye(e,t){return e===me?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Pe(e,t){return e===me?t:function(){var i=e.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,s=arguments.length,c=new Array(s);s--;)c[s]=arguments[s];return i.then(function(){return t.apply(o,c)})}return t.apply(this,arguments)}}ae.ModifyError=Ee,ae.DexieError=Te,ae.BulkError=ne;var Ve=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function St(e){Ve=e}var ot={},at=100,st=typeof Promise>"u"?[]:(Ze=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[st=crypto.subtle.digest("SHA-512",new Uint8Array([0])),y(st),Ze]:[Ze,y(Ze),Ze]),Ze=st[0],nn=st[1],nn=nn&&nn.then,At=Ze&&Ze.constructor,Mr=!!st[2],ar=function(e,t){Rr.push([e,t]),pt&&(queueMicrotask(Ks),pt=!1)},jr=!0,pt=!0,Ot=[],yt=[],zt=ft,Pt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:me,pgp:!1,env:{},finalize:me},se=Pt,Rr=[],Dt=0,er=[];function Y(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=se;if(typeof e!="function"){if(e!==ot)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ji(this,this._value)}else this._state=null,this._value=null,++t.ref,(function i(o,s){try{s(function(c){if(o._state===null){if(c===o)throw new TypeError("A promise cannot be resolved with itself.");var d=o._lib&&Xr();c&&typeof c.then=="function"?i(o,function(p,w){c instanceof Y?c._then(p,w):c.then(p,w)}):(o._state=!0,o._value=c,Lo(o)),d&&Jr()}},ji.bind(null,o))}catch(c){ji(o,c)}})(this,e)}var Tr={get:function(){var e=se,t=Yn;function i(o,s){var c=this,d=!e.global&&(e!==se||t!==Yn),p=d&&!gr(),w=new Y(function(B,x){Ri(c,new Fo(qo(o,e,d,p),qo(s,e,d,p),B,x,e))});return this._consoleTask&&(w._consoleTask=this._consoleTask),w}return i.prototype=ot,i},set:function(e){T(this,"then",e&&e.prototype===ot?Tr:{get:function(){return e},set:Tr.set})}};function Fo(e,t,i,o,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=i,this.reject=o,this.psd=s}function ji(e,t){var i,o;yt.push(t),e._state===null&&(i=e._lib&&Xr(),t=zt(t),e._state=!1,e._value=t,o=e,Ot.some(function(s){return s._value===o._value})||Ot.push(o),Lo(e),i)&&Jr()}function Lo(e){var t=e._listeners;e._listeners=[];for(var i=0,o=t.length;i<o;++i)Ri(e,t[i]);var s=e._PSD;--s.ref||s.finalize(),Dt===0&&(++Dt,ar(function(){--Dt==0&&Ti()},[]))}function Ri(e,t){if(e._state===null)e._listeners.push(t);else{var i=e._state?t.onFulfilled:t.onRejected;if(i===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Dt,ar(Is,[i,e,t])}}function Is(e,t,i){try{var o,s=t._value;!t._state&&yt.length&&(yt=[]),o=Ve&&t._consoleTask?t._consoleTask.run(function(){return e(s)}):e(s),t._state||yt.indexOf(s)!==-1||(c=>{for(var d=Ot.length;d;)if(Ot[--d]._value===c._value)return Ot.splice(d,1)})(t),i.resolve(o)}catch(c){i.reject(c)}finally{--Dt==0&&Ti(),--i.psd.ref||i.psd.finalize()}}function Ks(){Ir(Pt,function(){Xr()&&Jr()})}function Xr(){var e=jr;return pt=jr=!1,e}function Jr(){var e,t,i;do for(;0<Rr.length;)for(e=Rr,Rr=[],i=e.length,t=0;t<i;++t){var o=e[t];o[0].apply(null,o[1])}while(0<Rr.length);pt=jr=!0}function Ti(){for(var e=Ot,t=(Ot=[],e.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)}),er.slice(0)),i=t.length;i;)t[--i]()}function $n(e){return new Y(ot,!1,e)}function rt(e,t){var i=se;return function(){var o=Xr(),s=se;try{return yr(i,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{yr(s,!1),o&&Jr()}}}A(Y.prototype,{then:Tr,_then:function(e,t){Ri(this,new Fo(null,null,e,t,se))},catch:function(e){var t,i;return arguments.length===1?this.then(null,e):(t=e,i=arguments[1],typeof t=="function"?this.then(null,function(o){return(o instanceof t?i:$n)(o)}):this.then(null,function(o){return(o&&o.name===t?i:$n)(o)}))},finally:function(e){return this.then(function(t){return Y.resolve(e()).then(function(){return t})},function(t){return Y.resolve(e()).then(function(){return $n(t)})})},timeout:function(e,t){var i=this;return e<1/0?new Y(function(o,s){var c=setTimeout(function(){return s(new W.Timeout(t))},e);i.then(o,s).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&T(Y.prototype,Symbol.toStringTag,"Dexie.Promise"),Pt.env=No(),A(Y,{all:function(){var e=qe.apply(null,arguments).map(Gn);return new Y(function(t,i){e.length===0&&t([]);var o=e.length;e.forEach(function(s,c){return Y.resolve(s).then(function(d){e[c]=d,--o||t(e)},i)})})},resolve:function(e){return e instanceof Y?e:e&&typeof e.then=="function"?new Y(function(t,i){e.then(t,i)}):new Y(ot,!0,e)},reject:$n,race:function(){var e=qe.apply(null,arguments).map(Gn);return new Y(function(t,i){e.map(function(o){return Y.resolve(o).then(t,i)})})},PSD:{get:function(){return se},set:function(e){return se=e}},totalEchoes:{get:function(){return Yn}},newPSD:mr,usePSD:Ir,scheduler:{get:function(){return ar},set:function(e){ar=e}},rejectionMapper:{get:function(){return zt},set:function(e){zt=e}},follow:function(e,t){return new Y(function(i,o){return mr(function(s,c){var d=se;d.unhandleds=[],d.onunhandled=c,d.finalize=gt(function(){var p,w=this;p=function(){w.unhandleds.length===0?s():c(w.unhandleds[0])},er.push(function B(){p(),er.splice(er.indexOf(B),1)}),++Dt,ar(function(){--Dt==0&&Ti()},[])},d.finalize),e()},t,i,o)})}}),At&&(At.allSettled&&T(Y,"allSettled",function(){var e=qe.apply(null,arguments).map(Gn);return new Y(function(t){e.length===0&&t([]);var i=e.length,o=new Array(i);e.forEach(function(s,c){return Y.resolve(s).then(function(d){return o[c]={status:"fulfilled",value:d}},function(d){return o[c]={status:"rejected",reason:d}}).then(function(){return--i||t(o)})})})}),At.any&&typeof AggregateError<"u"&&T(Y,"any",function(){var e=qe.apply(null,arguments).map(Gn);return new Y(function(t,i){e.length===0&&i(new AggregateError([]));var o=e.length,s=new Array(o);e.forEach(function(c,d){return Y.resolve(c).then(function(p){return t(p)},function(p){s[d]=p,--o||i(new AggregateError(s))})})})}),At.withResolvers)&&(Y.withResolvers=At.withResolvers);var bt={awaits:0,echoes:0,id:0},Fs=0,Hn=[],Wn=0,Yn=0,Ls=0;function mr(e,d,i,o){var s=se,c=Object.create(s),d=(c.parent=s,c.ref=0,c.global=!1,c.id=++Ls,Pt.env,c.env=Mr?{Promise:Y,PromiseProp:{value:Y,configurable:!0,writable:!0},all:Y.all,race:Y.race,allSettled:Y.allSettled,any:Y.any,resolve:Y.resolve,reject:Y.reject}:{},d&&g(c,d),++s.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},Ir(c,e,i,o));return c.ref===0&&c.finalize(),d}function Qr(){return bt.id||(bt.id=++Fs),++bt.awaits,bt.echoes+=at,bt.id}function gr(){return!!bt.awaits&&(--bt.awaits==0&&(bt.id=0),bt.echoes=bt.awaits*at,!0)}function Gn(e){return bt.echoes&&e&&e.constructor===At?(Qr(),e.then(function(t){return gr(),t},function(t){return gr(),dt(t)})):e}function Ns(){var e=Hn[Hn.length-1];Hn.pop(),yr(e,!1)}function yr(e,t){var i,o,s=se;(t?!bt.echoes||Wn++&&e===se:!Wn||--Wn&&e===se)||queueMicrotask(t?(function(c){++Yn,bt.echoes&&--bt.echoes!=0||(bt.echoes=bt.awaits=bt.id=0),Hn.push(se),yr(c,!0)}).bind(null,e):Ns),e!==se&&(se=e,s===Pt&&(Pt.env=No()),Mr)&&(i=Pt.env.Promise,o=e.env,s.global||e.global)&&(Object.defineProperty(u,"Promise",o.PromiseProp),i.all=o.all,i.race=o.race,i.resolve=o.resolve,i.reject=o.reject,o.allSettled&&(i.allSettled=o.allSettled),o.any)&&(i.any=o.any)}function No(){var e=u.Promise;return Mr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ir(e,t,i,o,s){var c=se;try{return yr(e,!0),t(i,o,s)}finally{yr(c,!1)}}function qo(e,t,i,o){return typeof e!="function"?e:function(){var s=se;i&&Qr(),yr(t,!0);try{return e.apply(this,arguments)}finally{yr(s,!1),o&&queueMicrotask(gr)}}}function Ii(e){Promise===At&&bt.echoes===0?Wn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+nn).indexOf("[native code]")===-1&&(Qr=gr=me);var dt=Y.reject,Kr="ï¿¿",sr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",zo="String expected.",Zr=[],Xn="__dbnames",Ki="readonly",Fi="readwrite";function Fr(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Uo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Jn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=J(t))[e],t}}function Vo(){throw W.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ie(e,t){try{var i=$o(e),o=$o(t);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":for(var s=Ho(e),c=Ho(t),d=s.length,p=c.length,w=d<p?d:p,B=0;B<w;++B)if(s[B]!==c[B])return s[B]<c[B]?-1:1;return d===p?0:d<p?-1:1;case"Array":for(var x=e,b=t,E=x.length,C=b.length,k=E<C?E:C,_=0;_<k;++_){var D=Ie(x[_],b[_]);if(D!==0)return D}return E===C?0:E<C?-1:1}}catch{}return NaN}function $o(e){var t=typeof e;return t=="object"&&(ArrayBuffer.isView(e)||(t=Re(e))==="ArrayBuffer")?"binary":t}function Ho(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function Qn(e,t,i){var o=e.schema.yProps;return o?(t&&0<i.numFailures&&(t=t.filter(function(s,c){return!i.failures[c]})),Promise.all(o.map(function(s){return s=s.updatesTable,t?e.db.table(s).where("k").anyOf(t).delete():e.db.table(s).clear()})).then(function(){return i})):i}Wo.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var i=t.add;if(h(i))return f(f([],h(e)?e:[],!0),i).sort();if(typeof i=="number")return(Number(e)||0)+i;if(typeof i=="bigint")try{return BigInt(e)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(t.remove!==void 0){var o=t.remove;if(h(o))return h(e)?e.filter(function(s){return!o.includes(s)}).sort():[];if(typeof o=="number")return Number(e)-o;if(typeof o=="bigint")try{return BigInt(e)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return i=(i=t.replacePrefix)==null?void 0:i[0],i&&typeof e=="string"&&e.startsWith(i)?t.replacePrefix[1]+e.substring(i.length):e};var On=Wo;function Wo(e){this["@@propmod"]=e}function Yo(e,t){for(var i=m(t),o=i.length,s=!1,c=0;c<o;++c){var d=i[c],p=t[d],w=oe(e,d);p instanceof On?(pe(e,d,p.execute(w)),s=!0):w!==p&&(pe(e,d,p),s=!0)}return s}et.prototype._trans=function(e,t,i){var o=this._tx||se.trans,s=this.name,c=Ve&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function d(B,x,b){if(b.schema[s])return t(b.idbtrans,b);throw new W.NotFound("Table "+s+" not part of transaction")}var p=Xr();try{var w=o&&o.db._novip===this.db._novip?o===se.trans?o._promise(e,d,i):mr(function(){return o._promise(e,d,i)},{trans:o,transless:se.transless||se}):(function B(x,b,E,C){if(x.idbdb&&(x._state.openComplete||se.letThrough||x._vip)){var k=x._createTransaction(b,E,x._dbSchema);try{k.create(),x._state.PR1398_maxLoop=3}catch(_){return _.name===Se.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return B(x,b,E,C)})):dt(_)}return k._promise(b,function(_,D){return mr(function(){return se.trans=k,C(_,D,k)})}).then(function(_){if(b==="readwrite")try{k.idbtrans.commit()}catch{}return b==="readonly"?_:k._completion.then(function(){return _})})}if(x._state.openComplete)return dt(new W.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return dt(new W.DatabaseClosed);x.open().catch(me)}return x._state.dbReadyPromise.then(function(){return B(x,b,E,C)})})(this.db,e,[this.name],d);return c&&(w._consoleTask=c,w=w.catch(function(B){return console.trace(B),dt(B)})),w}finally{p&&Jr()}},et.prototype.get=function(e,t){var i=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?dt(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",function(o){return i.core.get({trans:o,key:e}).then(function(s){return i.hook.reading.fire(s)})}).then(t)},et.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(h(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=m(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(p){if(p.compound&&t.every(function(B){return 0<=p.keyPath.indexOf(B)})){for(var w=0;w<t.length;++w)if(t.indexOf(p.keyPath[w])===-1)return!1;return!0}return!1}).sort(function(p,w){return p.keyPath.length-w.keyPath.length})[0];if(i&&this.db._maxKey!==Kr)return d=i.keyPath.slice(0,t.length),this.where(d).equals(d.map(function(p){return e[p]}));!i&&Ve&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var o=this.schema.idxByName;function s(p,w){return Ie(p,w)===0}var d=t.reduce(function(x,w){var B=x[0],x=x[1],b=o[w],E=e[w];return[B||b,B||!b?Fr(x,b&&b.multi?function(C){return C=oe(C,w),h(C)&&C.some(function(k){return s(E,k)})}:function(C){return s(E,oe(C,w))}):x]},[null,null]),c=d[0],d=d[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(d):i?this.filter(d):this.where(t).equals("")},et.prototype.filter=function(e){return this.toCollection().and(e)},et.prototype.count=function(e){return this.toCollection().count(e)},et.prototype.offset=function(e){return this.toCollection().offset(e)},et.prototype.limit=function(e){return this.toCollection().limit(e)},et.prototype.each=function(e){return this.toCollection().each(e)},et.prototype.toArray=function(e){return this.toCollection().toArray(e)},et.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},et.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,h(e)?"[".concat(e.join("+"),"]"):e))},et.prototype.reverse=function(){return this.toCollection().reverse()},et.prototype.mapToClass=function(e){for(var t=this.db,i=this.name,o=((this.schema.mappedClass=e).prototype instanceof Vo&&(e=(d=>{var p=x,w=d;if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function B(){this.constructor=p}function x(){return d!==null&&d.apply(this,arguments)||this}return a(p,w),p.prototype=w===null?Object.create(w):(B.prototype=w.prototype,new B),Object.defineProperty(x.prototype,"db",{get:function(){return t},enumerable:!1,configurable:!0}),x.prototype.table=function(){return i},x})(e)),new Set),s=e.prototype;s;s=y(s))Object.getOwnPropertyNames(s).forEach(function(d){return o.add(d)});function c(d){if(!d)return d;var p,w=Object.create(e.prototype);for(p in d)if(!o.has(p))try{w[p]=d[p]}catch{}return w}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),e},et.prototype.defineClass=function(){return this.mapToClass(function(e){g(this,e)})},et.prototype.add=function(e,t){var i=this,o=this.schema.primKey,s=o.auto,c=o.keyPath,d=e;return c&&s&&(d=Jn(c)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"add",keys:t!=null?[t]:null,values:[d]})}).then(function(p){return p.numFailures?Y.reject(p.failures[0]):p.lastResult}).then(function(p){if(c)try{pe(e,c,p)}catch{}return p})},et.prototype.upsert=function(e,t){var i=this,o=this.schema.primKey.keyPath;return this._trans("readwrite",function(s){return i.core.get({trans:s,key:e}).then(function(c){var d=c??{};return Yo(d,t),o&&pe(d,o,e),i.core.mutate({trans:s,type:"put",values:[d],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(p){return p.numFailures?Y.reject(p.failures[0]):!!c})})})},et.prototype.update=function(e,t){return typeof e!="object"||h(e)?this.where(":id").equals(e).modify(t):(e=oe(e,this.schema.primKey.keyPath))===void 0?dt(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},et.prototype.put=function(e,t){var i=this,o=this.schema.primKey,s=o.auto,c=o.keyPath,d=e;return c&&s&&(d=Jn(c)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"put",values:[d],keys:t!=null?[t]:null})}).then(function(p){return p.numFailures?Y.reject(p.failures[0]):p.lastResult}).then(function(p){if(c)try{pe(e,c,p)}catch{}return p})},et.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:[e]}).then(function(o){return Qn(t,[e],o)}).then(function(o){return o.numFailures?Y.reject(o.failures[0]):void 0})})},et.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Uo}).then(function(i){return Qn(e,null,i)})}).then(function(t){return t.numFailures?Y.reject(t.failures[0]):void 0})},et.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(i){return t.core.getMany({keys:e,trans:i}).then(function(o){return o.map(function(s){return t.hook.reading.fire(s)})})})},et.prototype.bulkAdd=function(e,t,i){var o=this,s=Array.isArray(t)?t:void 0,c=(i=i||(s?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",function(d){var p=o.schema.primKey,B=p.auto,p=p.keyPath;if(p&&s)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var w=e.length,B=p&&B?e.map(Jn(p)):e;return o.core.mutate({trans:d,type:"add",keys:s,values:B,wantResults:c}).then(function(x){var b=x.numFailures,E=x.failures;if(b===0)return c?x.results:x.lastResult;throw new ne("".concat(o.name,".bulkAdd(): ").concat(b," of ").concat(w," operations failed"),E)})})},et.prototype.bulkPut=function(e,t,i){var o=this,s=Array.isArray(t)?t:void 0,c=(i=i||(s?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",function(d){var p=o.schema.primKey,B=p.auto,p=p.keyPath;if(p&&s)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var w=e.length,B=p&&B?e.map(Jn(p)):e;return o.core.mutate({trans:d,type:"put",keys:s,values:B,wantResults:c}).then(function(x){var b=x.numFailures,E=x.failures;if(b===0)return c?x.results:x.lastResult;throw new ne("".concat(o.name,".bulkPut(): ").concat(b," of ").concat(w," operations failed"),E)})})},et.prototype.bulkUpdate=function(e){var t=this,i=this.core,o=e.map(function(d){return d.key}),s=e.map(function(d){return d.changes}),c=[];return this._trans("readwrite",function(d){return i.getMany({trans:d,keys:o,cache:"clone"}).then(function(p){var w=[],B=[],x=(e.forEach(function(b,E){var C=b.key,k=b.changes,_=p[E];if(_){for(var D=0,j=Object.keys(k);D<j.length;D++){var O=j[D],I=k[O];if(O===t.schema.primKey.keyPath){if(Ie(I,C)!==0)throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else pe(_,O,I)}c.push(E),w.push(C),B.push(_)}}),w.length);return i.mutate({trans:d,type:"put",keys:w,values:B,updates:{keys:o,changeSpecs:s}}).then(function(b){var E=b.numFailures,C=b.failures;if(E===0)return x;for(var k=0,_=Object.keys(C);k<_.length;k++){var D,j=_[k],O=c[Number(j)];O!=null&&(D=C[j],delete C[j],C[O]=D)}throw new ne("".concat(t.name,".bulkUpdate(): ").concat(E," of ").concat(x," operations failed"),C)})})})},et.prototype.bulkDelete=function(e){var t=this,i=e.length;return this._trans("readwrite",function(o){return t.core.mutate({trans:o,type:"delete",keys:e}).then(function(s){return Qn(t,e,s)})}).then(function(o){var s=o.numFailures,c=o.failures;if(s===0)return o.lastResult;throw new ne("".concat(t.name,".bulkDelete(): ").concat(s," of ").concat(i," operations failed"),c)})};var Go=et;function et(){}function Bn(e){function t(d,p){if(p){for(var w=arguments.length,B=new Array(w-1);--w;)B[w-1]=arguments[w];return i[d].subscribe.apply(null,B),e}if(typeof d=="string")return i[d]}var i={};t.addEventType=c;for(var o=1,s=arguments.length;o<s;++o)c(arguments[o]);return t;function c(d,p,w){var B,x;if(typeof d!="object")return p=p||ye,x={subscribers:[],fire:w=w||me,subscribe:function(b){x.subscribers.indexOf(b)===-1&&(x.subscribers.push(b),x.fire=p(x.fire,b))},unsubscribe:function(b){x.subscribers=x.subscribers.filter(function(E){return E!==b}),x.fire=x.subscribers.reduce(p,w)}},i[d]=t[d]=x;m(B=d).forEach(function(b){var E=B[b];if(h(E))c(b,B[b][0],B[b][1]);else{if(E!=="asap")throw new W.InvalidArgument("Invalid event config");var C=c(b,ft,function(){for(var k=arguments.length,_=new Array(k);k--;)_[k]=arguments[k];C.subscribers.forEach(function(D){G(function(){D.apply(null,_)})})})}})}}function Pn(e,t){return V(t).from({prototype:e}),t}function en(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Li(e,t){e.filter=Fr(e.filter,t)}function Ni(e,t,i){var o=e.replayFilter;e.replayFilter=o?function(){return Fr(o(),t())}:t,e.justLimit=i&&!o}function Zn(e,t){if(e.isPrimKey)return t.primaryKey;var i=t.getIndexByKeyPath(e.index);if(i)return i;throw new W.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed")}function Xo(e,t,i){var o=Zn(e,t.schema);return t.openCursor({trans:i,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:o,range:e.range}})}function ei(e,t,i,o){var s,c,d=e.replayFilter?Fr(e.filter,e.replayFilter()):e.filter;return e.or?(s={},c=function(p,w,B){var x,b;d&&!d(w,B,function(E){return w.stop(E)},function(E){return w.fail(E)})||((b=""+(x=w.primaryKey))=="[object ArrayBuffer]"&&(b=""+new Uint8Array(x)),S(s,b))||(s[b]=!0,t(p,w,B))},Promise.all([e.or._iterate(c,i),Jo(Xo(e,o,i),e.algorithm,c,!e.keysOnly&&e.valueMapper)])):Jo(Xo(e,o,i),Fr(e.algorithm,d),t,!e.keysOnly&&e.valueMapper)}function Jo(e,t,i,o){var s=rt(o?function(c,d,p){return i(o(c),d,p)}:i);return e.then(function(c){if(c)return c.start(function(){var d=function(){return c.continue()};t&&!t(c,function(p){return d=p},function(p){c.stop(p),d=me},function(p){c.fail(p),d=me})||s(c.value,c,function(p){return d=p}),d()})})}ze.prototype._read=function(e,t){var i=this._ctx;return i.error?i.table._trans(null,dt.bind(null,i.error)):i.table._trans("readonly",e).then(t)},ze.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,dt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ze.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Fr(t.algorithm,e)},ze.prototype._iterate=function(e,t){return ei(this._ctx,e,t,this._ctx.table.core)},ze.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&g(i,e),t._ctx=i,t},ze.prototype.raw=function(){return this._ctx.valueMapper=null,this},ze.prototype.each=function(e){var t=this._ctx;return this._read(function(i){return ei(t,e,i,t.table.core)})},ze.prototype.count=function(e){var t=this;return this._read(function(i){var o,s=t._ctx,c=s.table.core;return en(s,!0)?c.count({trans:i,query:{index:Zn(s,c.schema),range:s.range}}).then(function(d){return Math.min(d,s.limit)}):(o=0,ei(s,function(){return++o,!1},i,c).then(function(){return o}))}).then(e)},ze.prototype.sortBy=function(e,t){var i=e.split(".").reverse(),o=i[0],s=i.length-1;function c(w,B){return B?c(w[i[B]],B-1):w[o]}var d=this._ctx.dir==="next"?1:-1;function p(w,B){return Ie(c(w,s),c(B,s))*d}return this.toArray(function(w){return w.sort(p)}).then(t)},ze.prototype.toArray=function(e){var t=this;return this._read(function(i){var o,s,c,d=t._ctx;return d.dir==="next"&&en(d,!0)&&0<d.limit?(o=d.valueMapper,s=Zn(d,d.table.core.schema),d.table.core.query({trans:i,limit:d.limit,values:!0,query:{index:s,range:d.range}}).then(function(p){return p=p.result,o?p.map(o):p})):(c=[],ei(d,function(p){return c.push(p)},i,d.table.core).then(function(){return c}))},e)},ze.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,en(t)?Ni(t,function(){var i=e;return function(o,s){return i===0||(i===1?--i:s(function(){o.advance(i),i=0}),!1)}}):Ni(t,function(){var i=e;return function(){return--i<0}})),this},ze.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ni(this._ctx,function(){var t=e;return function(i,o,s){return--t<=0&&o(s),0<=t}},!0),this},ze.prototype.until=function(e,t){return Li(this._ctx,function(i,o,s){return!e(i.value)||(o(s),t)}),this},ze.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ze.prototype.last=function(e){return this.reverse().first(e)},ze.prototype.filter=function(e){var t;return Li(this._ctx,function(i){return e(i.value)}),(t=this._ctx).isMatch=Fr(t.isMatch,e),this},ze.prototype.and=function(e){return this.filter(e)},ze.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ze.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ze.prototype.desc=function(){return this.reverse()},ze.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,o){e(o.key,o)})},ze.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ze.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,o){e(o.primaryKey,o)})},ze.prototype.keys=function(e){var t=this._ctx,i=(t.keysOnly=!t.isMatch,[]);return this.each(function(o,s){i.push(s.key)}).then(function(){return i}).then(e)},ze.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&en(t,!0)&&0<t.limit)return this._read(function(o){var s=Zn(t,t.table.core.schema);return t.table.core.query({trans:o,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(function(o){return o.result}).then(e);t.keysOnly=!t.isMatch;var i=[];return this.each(function(o,s){i.push(s.primaryKey)}).then(function(){return i}).then(e)},ze.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ze.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ze.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ze.prototype.distinct=function(){var e,t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];return t&&t.multi&&(e={},Li(this._ctx,function(o){var o=o.primaryKey.toString(),s=S(e,o);return e[o]=!0,!s})),this},ze.prototype.modify=function(e){var t=this,i=this._ctx;return this._write(function(o){function s(_,D){var j=D.failures;E+=_-D.numFailures;for(var O=0,I=m(j);O<I.length;O++){var N=I[O];b.push(j[N])}}var c=typeof e=="function"?e:function(_){return Yo(_,e)},d=i.table.core,x=d.schema.primaryKey,p=x.outbound,w=x.extractKey,B=200,x=t.db._options.modifyChunkSize,b=(x&&(B=typeof x=="object"?x[d.name]||x["*"]||200:x),[]),E=0,C=[],k=e===Qo;return t.clone().primaryKeys().then(function(_){function D(O){var I=Math.min(B,_.length-O),N=_.slice(O,O+I);return(k?Promise.resolve([]):d.getMany({trans:o,keys:N,cache:"immutable"})).then(function($){var H=[],q=[],ee=p?[]:null,Q=k?N:[];if(!k)for(var U=0;U<I;++U){var te=$[U],Fe={value:J(te),primKey:_[O+U]};c.call(Fe,Fe.value,Fe)!==!1&&(Fe.value==null?Q.push(_[O+U]):p||Ie(w(te),w(Fe.value))===0?(q.push(Fe.value),p&&ee.push(_[O+U])):(Q.push(_[O+U]),H.push(Fe.value)))}return Promise.resolve(0<H.length&&d.mutate({trans:o,type:"add",values:H}).then(function(Ue){for(var _e in Ue.failures)Q.splice(parseInt(_e),1);s(H.length,Ue)})).then(function(){return(0<q.length||j&&typeof e=="object")&&d.mutate({trans:o,type:"put",keys:ee,values:q,criteria:j,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<O}).then(function(Ue){return s(q.length,Ue)})}).then(function(){return(0<Q.length||j&&k)&&d.mutate({trans:o,type:"delete",keys:Q,criteria:j,isAdditionalChunk:0<O}).then(function(Ue){return Qn(i.table,Q,Ue)}).then(function(Ue){return s(Q.length,Ue)})}).then(function(){return _.length>O+I&&D(O+B)})})}var j=en(i)&&i.limit===1/0&&(typeof e!="function"||k)&&{index:i.index,range:i.range};return D(0).then(function(){if(0<b.length)throw new Ee("Error modifying one or more objects",b,E,C);return _.length})})})},ze.prototype.delete=function(){var e=this._ctx,t=e.range;return!en(e)||e.table.schema.yProps||!e.isPrimKey&&t.type!==3?this.modify(Qo):this._write(function(i){var o=e.table.core.schema.primaryKey,s=t;return e.table.core.count({trans:i,query:{index:o,range:s}}).then(function(c){return e.table.core.mutate({trans:i,type:"deleteRange",range:s}).then(function(w){var p=w.failures,w=w.numFailures;if(w)throw new Ee("Could not delete some values",Object.keys(p).map(function(B){return p[B]}),c-w);return c-w})})})};var qs=ze;function ze(){}var Qo=function(e,t){return t.value=null};function zs(e,t){return e<t?-1:e===t?0:1}function Us(e,t){return t<e?-1:e===t?0:1}function Ft(e,t,i){return e=e instanceof ea?new e.Collection(e):e,e._ctx.error=new(i||TypeError)(t),e}function tn(e){return new e.Collection(e,function(){return Zo("")}).limit(0)}function ti(C,t,i,o){var s,c,d,p,w,B,x,b=i.length;if(!i.every(function(_){return typeof _=="string"}))return Ft(C,zo);function E(_){s=_==="next"?function(j){return j.toUpperCase()}:function(j){return j.toLowerCase()},c=_==="next"?function(j){return j.toLowerCase()}:function(j){return j.toUpperCase()},d=_==="next"?zs:Us;var D=i.map(function(j){return{lower:c(j),upper:s(j)}}).sort(function(j,O){return d(j.lower,O.lower)});p=D.map(function(j){return j.upper}),w=D.map(function(j){return j.lower}),x=(B=_)==="next"?"":o}E("next");var C=new C.Collection(C,function(){return br(p[0],w[b-1]+o)}),k=(C._ondirectionchange=function(_){E(_)},0);return C._addAlgorithm(function(_,D,j){var O=_.key;if(typeof O=="string"){var I=c(O);if(t(I,w,k))return!0;for(var N=null,$=k;$<b;++$){var H=((q,ee,Q,U,te,Fe)=>{for(var Ue=Math.min(q.length,U.length),_e=-1,Ae=0;Ae<Ue;++Ae){var it=ee[Ae];if(it!==U[Ae])return te(q[Ae],Q[Ae])<0?q.substr(0,Ae)+Q[Ae]+Q.substr(Ae+1):te(q[Ae],U[Ae])<0?q.substr(0,Ae)+U[Ae]+Q.substr(Ae+1):0<=_e?q.substr(0,_e)+ee[_e]+Q.substr(_e+1):null;te(q[Ae],it)<0&&(_e=Ae)}return Ue<U.length&&Fe==="next"?q+Q.substr(q.length):Ue<q.length&&Fe==="prev"?q.substr(0,Q.length):_e<0?null:q.substr(0,_e)+U[_e]+Q.substr(_e+1)})(O,I,p[$],w[$],d,B);H===null&&N===null?k=$+1:(N===null||0<d(N,H))&&(N=H)}D(N!==null?function(){_.continue(N+x)}:j)}return!1}),C}function br(e,t,i,o){return{type:2,lower:e,upper:t,lowerOpen:i,upperOpen:o}}function Zo(e){return{type:1,lower:e,upper:e}}Object.defineProperty(_t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),_t.prototype.between=function(e,t,i,o){i=i!==!1,o=o===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(i||o)&&(!i||!o)?tn(this):new this.Collection(this,function(){return br(e,t,!i,!o)})}catch{return Ft(this,sr)}},_t.prototype.equals=function(e){return e==null?Ft(this,sr):new this.Collection(this,function(){return Zo(e)})},_t.prototype.above=function(e){return e==null?Ft(this,sr):new this.Collection(this,function(){return br(e,void 0,!0)})},_t.prototype.aboveOrEqual=function(e){return e==null?Ft(this,sr):new this.Collection(this,function(){return br(e,void 0,!1)})},_t.prototype.below=function(e){return e==null?Ft(this,sr):new this.Collection(this,function(){return br(void 0,e,!1,!0)})},_t.prototype.belowOrEqual=function(e){return e==null?Ft(this,sr):new this.Collection(this,function(){return br(void 0,e)})},_t.prototype.startsWith=function(e){return typeof e!="string"?Ft(this,zo):this.between(e,e+Kr,!0,!0)},_t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):ti(this,function(t,i){return t.indexOf(i[0])===0},[e],Kr)},_t.prototype.equalsIgnoreCase=function(e){return ti(this,function(t,i){return t===i[0]},[e],"")},_t.prototype.anyOfIgnoreCase=function(){var e=qe.apply(Ce,arguments);return e.length===0?tn(this):ti(this,function(t,i){return i.indexOf(t)!==-1},e,"")},_t.prototype.startsWithAnyOfIgnoreCase=function(){var e=qe.apply(Ce,arguments);return e.length===0?tn(this):ti(this,function(t,i){return i.some(function(o){return t.indexOf(o)===0})},e,Kr)},_t.prototype.anyOf=function(){var e,t,i=this,o=qe.apply(Ce,arguments),s=this._cmp;try{o.sort(s)}catch{return Ft(this,sr)}return o.length===0?tn(this):((e=new this.Collection(this,function(){return br(o[0],o[o.length-1])}))._ondirectionchange=function(c){s=c==="next"?i._ascending:i._descending,o.sort(s)},t=0,e._addAlgorithm(function(c,d,p){for(var w=c.key;0<s(w,o[t]);)if(++t===o.length)return d(p),!1;return s(w,o[t])===0||(d(function(){c.continue(o[t])}),!1)}),e)},_t.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},_t.prototype.noneOf=function(){var e=qe.apply(Ce,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ft(this,sr)}var t=e.reduce(function(i,o){return i?i.concat([[i[i.length-1][1],o]]):[[-1/0,o]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},_t.prototype.inAnyRange=function(e,j){var i=this,o=this._cmp,s=this._ascending,c=this._descending,d=this._min,p=this._max;if(e.length===0)return tn(this);if(!e.every(function(O){return O[0]!==void 0&&O[1]!==void 0&&s(O[0],O[1])<=0}))return Ft(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var w=!j||j.includeLowers!==!1,B=j&&j.includeUppers===!0,x,b=s;function E(O,I){return b(O[0],I[0])}try{(x=e.reduce(function(O,I){for(var N=0,$=O.length;N<$;++N){var H=O[N];if(o(I[0],H[1])<0&&0<o(I[1],H[0])){H[0]=d(H[0],I[0]),H[1]=p(H[1],I[1]);break}}return N===$&&O.push(I),O},[])).sort(E)}catch{return Ft(this,sr)}var C=0,k=B?function(O){return 0<s(O,x[C][1])}:function(O){return 0<=s(O,x[C][1])},_=w?function(O){return 0<c(O,x[C][0])}:function(O){return 0<=c(O,x[C][0])},D=k,j=new this.Collection(this,function(){return br(x[0][0],x[x.length-1][1],!w,!B)});return j._ondirectionchange=function(O){b=O==="next"?(D=k,s):(D=_,c),x.sort(E)},j._addAlgorithm(function(O,I,N){for(var $,H=O.key;D(H);)if(++C===x.length)return I(N),!1;return!k($=H)&&!_($)||(i._cmp(H,x[C][1])===0||i._cmp(H,x[C][0])===0||I(function(){b===s?O.continue(x[C][0]):O.continue(x[C][1])}),!1)}),j},_t.prototype.startsWithAnyOf=function(){var e=qe.apply(Ce,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?tn(this):this.inAnyRange(e.map(function(t){return[t,t+Kr]})):Ft(this,"startsWithAnyOf() only works with strings")};var ea=_t;function _t(){}function tr(e){return rt(function(t){return Dn(t),e(t.target.error),!1})}function Dn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Mn="storagemutated",qi="x-storagemutated-1",_r=Bn(null,Mn),Vs=(rr.prototype._lock=function(){return ce(!se.global),++this._reculock,this._reculock!==1||se.global||(se.lockOwnerFor=this),this},rr.prototype._unlock=function(){if(ce(!se.global),--this._reculock==0)for(se.global||(se.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ir(e[1],e[0])}catch{}}return this},rr.prototype._locked=function(){return this._reculock&&se.lockOwnerFor!==this},rr.prototype.create=function(e){var t=this;if(this.mode){var i=this.db.idbdb,o=this.db._state.dbOpenError;if(ce(!this.idbtrans),!e&&!i)switch(o&&o.name){case"DatabaseClosedError":throw new W.DatabaseClosed(o);case"MissingAPIError":throw new W.MissingAPI(o.message,o);default:throw new W.OpenFailed(o)}if(!this.active)throw new W.TransactionInactive;ce(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=rt(function(s){Dn(s),t._reject(e.error)}),e.onabort=rt(function(s){Dn(s),t.active&&t._reject(new W.Abort(e.error)),t.active=!1,t.on("abort").fire(s)}),e.oncomplete=rt(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&_r.storagemutated.fire(e.mutatedParts)})}return this},rr.prototype._promise=function(e,t,i){var o,s=this;return e==="readwrite"&&this.mode!=="readwrite"?dt(new W.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Y(function(c,d){s._blockedFuncs.push([function(){s._promise(e,t,i).then(c,d)},se])}):i?mr(function(){var c=new Y(function(d,p){s._lock();var w=t(d,p,s);w&&w.then&&w.then(d,p)});return c.finally(function(){return s._unlock()}),c._lib=!0,c}):((o=new Y(function(c,d){var p=t(c,d,s);p&&p.then&&p.then(c,d)}))._lib=!0,o):dt(new W.TransactionInactive)},rr.prototype._root=function(){return this.parent?this.parent._root():this},rr.prototype.waitFor=function(e){var t,i=this._root(),o=Y.resolve(e),s=(i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return o}):(i._waitingFor=o,i._waitingQueue=[],t=i.idbtrans.objectStore(i.storeNames[0]),(function c(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(t.get(-1/0).onsuccess=c)})()),i._waitingFor);return new Y(function(c,d){o.then(function(p){return i._waitingQueue.push(rt(c.bind(null,p)))},function(p){return i._waitingQueue.push(rt(d.bind(null,p)))}).finally(function(){i._waitingFor===s&&(i._waitingFor=null)})})},rr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))},rr.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(S(t,e))return t[e];var i=this.schema[e];if(i)return(i=new this.db.Table(e,i,this)).core=this.db.core.table(e),t[e]=i;throw new W.NotFound("Table "+e+" not part of transaction")},rr);function rr(){}function zi(e,t,i,o,s,c,d,p){return{name:e,keyPath:t,unique:i,multi:o,auto:s,compound:c,src:(i&&!d?"&":"")+(o?"*":"")+(s?"++":"")+ta(t),type:p}}function ta(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ui(e,t,i){return{name:e,primKey:t,indexes:i,mappedClass:null,idxByName:(o=function(s){return[s.name,s]},i.reduce(function(s,c,d){return c=o(c,d),c&&(s[c[0]]=c[1]),s},{}))};var o}var jn=function(e){try{return e.only([[]]),jn=function(){return[[]]},[[]]}catch{return jn=function(){return Kr},Kr}};function Vi(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(i){return i[t]}:function(i){return oe(i,t)}:function(i){return oe(i,e)};var t}function ra(e){return[].slice.call(e)}var $s=0;function Rn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Hs(e,t,w){function o(k){if(k.type===3)return null;if(k.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=k.lower,E=k.upper,C=k.lowerOpen,k=k.upperOpen;return b===void 0?E===void 0?null:t.upperBound(E,!!k):E===void 0?t.lowerBound(b,!!C):t.bound(b,E,!!C,!!k)}function s(x){var b,E=x.name;return{name:E,schema:x,mutate:function(C){var k=C.trans,_=C.type,D=C.keys,j=C.values,O=C.range;return new Promise(function(I,N){I=rt(I);var $=k.objectStore(E),H=$.keyPath==null,q=_==="put"||_==="add";if(!q&&_!=="delete"&&_!=="deleteRange")throw new Error("Invalid operation type: "+_);var ee,Q=(D||j||{length:1}).length;if(D&&j&&D.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(Q===0)return I({numFailures:0,failures:{},results:[],lastResult:void 0});function U(lt){++Ue,Dn(lt)}var te=[],Fe=[],Ue=0;if(_==="deleteRange"){if(O.type===4)return I({numFailures:Ue,failures:Fe,results:[],lastResult:void 0});O.type===3?te.push(ee=$.clear()):te.push(ee=$.delete(o(O)))}else{var H=q?H?[j,D]:[j,null]:[D,null],_e=H[0],Ae=H[1];if(q)for(var it=0;it<Q;++it)te.push(ee=Ae&&Ae[it]!==void 0?$[_](_e[it],Ae[it]):$[_](_e[it])),ee.onerror=U;else for(it=0;it<Q;++it)te.push(ee=$[_](_e[it])),ee.onerror=U}function Ut(lt){lt=lt.target.result,te.forEach(function(qr,lo){return qr.error!=null&&(Fe[lo]=qr.error)}),I({numFailures:Ue,failures:Fe,results:_==="delete"?D:te.map(function(qr){return qr.result}),lastResult:lt})}ee.onerror=function(lt){U(lt),Ut(lt)},ee.onsuccess=Ut})},getMany:function(C){var k=C.trans,_=C.keys;return new Promise(function(D,j){D=rt(D);for(var O,I=k.objectStore(E),N=_.length,$=new Array(N),H=0,q=0,ee=function(te){te=te.target,$[te._pos]=te.result,++q===H&&D($)},Q=tr(j),U=0;U<N;++U)_[U]!=null&&((O=I.get(_[U]))._pos=U,O.onsuccess=ee,O.onerror=Q,++H);H===0&&D($)})},get:function(C){var k=C.trans,_=C.key;return new Promise(function(D,j){D=rt(D);var O=k.objectStore(E).get(_);O.onsuccess=function(I){return D(I.target.result)},O.onerror=tr(j)})},query:(b=p,function(C){return new Promise(function(k,_){k=rt(k);var D,j,O,q=C.trans,I=C.values,N=C.limit,H=C.query,$=N===1/0?void 0:N,ee=H.index,H=H.range,q=q.objectStore(E),q=ee.isPrimaryKey?q:q.index(ee.name),ee=o(H);if(N===0)return k({result:[]});b?((H=I?q.getAll(ee,$):q.getAllKeys(ee,$)).onsuccess=function(Q){return k({result:Q.target.result})},H.onerror=tr(_)):(D=0,j=!I&&"openKeyCursor"in q?q.openKeyCursor(ee):q.openCursor(ee),O=[],j.onsuccess=function(Q){var U=j.result;return!U||(O.push(I?U.value:U.primaryKey),++D===N)?k({result:O}):void U.continue()},j.onerror=tr(_))})}),openCursor:function(C){var k=C.trans,_=C.values,D=C.query,j=C.reverse,O=C.unique;return new Promise(function(I,N){I=rt(I);var q=D.index,$=D.range,H=k.objectStore(E),H=q.isPrimaryKey?H:H.index(q.name),q=j?O?"prevunique":"prev":O?"nextunique":"next",ee=!_&&"openKeyCursor"in H?H.openKeyCursor(o($),q):H.openCursor(o($),q);ee.onerror=tr(N),ee.onsuccess=rt(function(Q){var U,te,Fe,Ue,_e=ee.result;_e?(_e.___id=++$s,_e.done=!1,U=_e.continue.bind(_e),te=(te=_e.continuePrimaryKey)&&te.bind(_e),Fe=_e.advance.bind(_e),Ue=function(){throw new Error("Cursor not stopped")},_e.trans=k,_e.stop=_e.continue=_e.continuePrimaryKey=_e.advance=function(){throw new Error("Cursor not started")},_e.fail=rt(N),_e.next=function(){var Ae=this,it=1;return this.start(function(){return it--?Ae.continue():Ae.stop()}).then(function(){return Ae})},_e.start=function(Ae){function it(){if(ee.result)try{Ae()}catch(lt){_e.fail(lt)}else _e.done=!0,_e.start=function(){throw new Error("Cursor behind last entry")},_e.stop()}var Ut=new Promise(function(lt,qr){lt=rt(lt),ee.onerror=tr(qr),_e.fail=qr,_e.stop=function(lo){_e.stop=_e.continue=_e.continuePrimaryKey=_e.advance=Ue,lt(lo)}});return ee.onsuccess=rt(function(lt){ee.onsuccess=it,it()}),_e.continue=U,_e.continuePrimaryKey=te,_e.advance=Fe,it(),Ut},I(_e)):I(null)},N)})},count:function(C){var k=C.query,_=C.trans,D=k.index,j=k.range;return new Promise(function(O,I){var N=_.objectStore(E),N=D.isPrimaryKey?N:N.index(D.name),$=o(j),$=$?N.count($):N.count();$.onsuccess=rt(function(H){return O(H.target.result)}),$.onerror=tr(I)})}}}c=w,d=ra((w=e).objectStoreNames);var c,w={schema:{name:w.name,tables:d.map(function(x){return c.objectStore(x)}).map(function(x){var b=x.keyPath,E=x.autoIncrement,k=h(b),C={},k={name:x.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b==null,compound:k,keyPath:b,autoIncrement:E,unique:!0,extractKey:Vi(b)},indexes:ra(x.indexNames).map(function(_){return x.index(_)}).map(function(O){var I=O.name,D=O.unique,j=O.multiEntry,O=O.keyPath,I={name:I,compound:h(O),keyPath:O,unique:D,multiEntry:j,extractKey:Vi(O)};return C[Rn(O)]=I}),getIndexByKeyPath:function(_){return C[Rn(_)]}};return C[":id"]=k.primaryKey,b!=null&&(C[Rn(b)]=k.primaryKey),k})},hasGetAll:0<d.length&&"getAll"in c.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},d=w.schema,p=w.hasGetAll,w=d.tables.map(s),B={};return w.forEach(function(x){return B[x.name]=x}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(x){if(B[x])return B[x];throw new Error("Table '".concat(x,"' not found"))},MIN_KEY:-1/0,MAX_KEY:jn(t),schema:d}}function Ws(e,t,i,o){return i=i.IDBKeyRange,t=Hs(t,i,o),{dbcore:e.dbcore.reduce(function(s,c){return c=c.create,l(l({},s),c(s))},t)}}function ri(e,t){var i=t.db,i=Ws(e._middlewares,i,e._deps,t);e.core=i.dbcore,e.tables.forEach(function(o){var s=o.name;e.core.schema.tables.some(function(c){return c.name===s})&&(o.core=e.core.table(s),e[s]instanceof e.Table)&&(e[s].core=o.core)})}function ni(e,t,i,o){i.forEach(function(s){var c=o[s];t.forEach(function(d){var p=(function w(B,x){return Z(B,x)||(B=y(B))&&w(B,x)})(d,s);(!p||"value"in p&&p.value===void 0)&&(d===e.Transaction.prototype||d instanceof e.Transaction?T(d,s,{get:function(){return this.table(s)},set:function(w){K(this,s,{value:w,writable:!0,configurable:!0,enumerable:!0})}}):d[s]=new e.Table(s,c))})})}function $i(e,t){t.forEach(function(i){for(var o in i)i[o]instanceof e.Table&&delete i[o]})}function Ys(e,t){return e._cfg.version-t._cfg.version}function Gs(e,t,i,o){var s=e._dbSchema,c=(i.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=Ui("$meta",ia("")[0],[]),e._storeNames.push("$meta")),e._createTransaction("readwrite",e._storeNames,s)),d=(c.create(i),c._completion.catch(o),c._reject.bind(c)),p=se.transless||se;mr(function(){if(se.trans=c,se.transless=p,t!==0)return ri(e,i),B=t,((w=c).storeNames.includes("$meta")?w.table("$meta").get("version").then(function(x){return x??B}):Y.resolve(B)).then(function(D){var b=e,E=D,C=c,k=i,_=[],D=b._versions,j=b._dbSchema=oi(0,b.idbdb,k);return(D=D.filter(function(O){return O._cfg.version>=E})).length===0?Y.resolve():(D.forEach(function(O){_.push(function(){var I,N,$,H=j,q=O._cfg.dbschema,ee=(ai(b,H,k),ai(b,q,k),j=b._dbSchema=q,Hi(H,q)),Q=(ee.add.forEach(function(U){Wi(k,U[0],U[1].primKey,U[1].indexes)}),ee.change.forEach(function(U){if(U.recreate)throw new W.Upgrade("Not yet support for changing primary key");var te=k.objectStore(U.name);U.add.forEach(function(Fe){return ii(te,Fe)}),U.change.forEach(function(Fe){te.deleteIndex(Fe.name),ii(te,Fe)}),U.del.forEach(function(Fe){return te.deleteIndex(Fe)})}),O._cfg.contentUpgrade);if(Q&&O._cfg.version>E)return ri(b,k),C._memoizedTables={},I=ue(q),ee.del.forEach(function(U){I[U]=H[U]}),$i(b,[b.Transaction.prototype]),ni(b,[b.Transaction.prototype],m(I),I),C.schema=I,(N=nt(Q))&&Qr(),q=Y.follow(function(){var U;($=Q(C))&&N&&(U=gr.bind(null,null),$.then(U,U))}),$&&typeof $.then=="function"?Y.resolve($):q.then(function(){return $})}),_.push(function(I){var N,$,H=O._cfg.dbschema;N=H,$=I,[].slice.call($.db.objectStoreNames).forEach(function(q){return N[q]==null&&$.db.deleteObjectStore(q)}),$i(b,[b.Transaction.prototype]),ni(b,[b.Transaction.prototype],b._storeNames,b._dbSchema),C.schema=b._dbSchema}),_.push(function(I){b.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(b.idbdb.version/10)===O._cfg.version?(b.idbdb.deleteObjectStore("$meta"),delete b._dbSchema.$meta,b._storeNames=b._storeNames.filter(function(N){return N!=="$meta"})):I.objectStore("$meta").put(O._cfg.version,"version"))})}),(function O(){return _.length?Y.resolve(_.shift()(C.idbtrans)).then(O):Y.resolve()})().then(function(){na(j,k)}))}).catch(d);var w,B;m(s).forEach(function(x){Wi(i,x,s[x].primKey,s[x].indexes)}),ri(e,i),Y.follow(function(){return e.on.populate.fire(c)}).catch(d)})}function Xs(e,t){na(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var i=oi(0,e.idbdb,t);ai(e,e._dbSchema,t);for(var o=0,s=Hi(i,e._dbSchema).change;o<s.length;o++){var c=(d=>{if(d.change.length||d.recreate)return console.warn("Unable to patch indexes of table ".concat(d.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=t.objectStore(d.name);d.add.forEach(function(w){Ve&&console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name,".").concat(w.src)),ii(p,w)})})(s[o]);if(typeof c=="object")return c.value}}function Hi(e,t){var i,o={del:[],add:[],change:[]};for(i in e)t[i]||o.del.push(i);for(i in t){var s=e[i],c=t[i];if(s){var d={name:i,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||s.primKey.auto!==c.primKey.auto)d.recreate=!0,o.change.push(d);else{var p=s.idxByName,w=c.idxByName,B=void 0;for(B in p)w[B]||d.del.push(B);for(B in w){var x=p[B],b=w[B];x?x.src!==b.src&&d.change.push(b):d.add.push(b)}(0<d.del.length||0<d.add.length||0<d.change.length)&&o.change.push(d)}}else o.add.push([i,c])}return o}function Wi(e,t,i,o){var s=e.db.createObjectStore(t,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});o.forEach(function(c){return ii(s,c)})}function na(e,t){m(e).forEach(function(i){t.db.objectStoreNames.contains(i)||(Ve&&console.debug("Dexie: Creating missing table",i),Wi(t,i,e[i].primKey,e[i].indexes))})}function ii(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function oi(e,t,i){var o={};return ve(t.objectStoreNames,0).forEach(function(s){for(var c=i.objectStore(s),d=zi(ta(B=c.keyPath),B||"",!0,!1,!!c.autoIncrement,B&&typeof B!="string",!0),p=[],w=0;w<c.indexNames.length;++w){var x=c.index(c.indexNames[w]),B=x.keyPath,x=zi(x.name,B,!!x.unique,!!x.multiEntry,!1,B&&typeof B!="string",!1);p.push(x)}o[s]=Ui(s,d,p)}),o}function ai(e,t,i){for(var o=i.db.objectStoreNames,s=0;s<o.length;++s){var c=o[s],d=i.objectStore(c);e._hasGetAll="getAll"in d;for(var p=0;p<d.indexNames.length;++p){var w,B=d.indexNames[p],x=d.index(B).keyPath,x=typeof x=="string"?x:"["+ve(x).join("+")+"]";t[c]&&(w=t[c].idxByName[x])&&(w.name=B,delete t[c].idxByName[x],t[c].idxByName[B]=w)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ia(e){return e.split(",").map(function(t,i){var s=t.split(":"),o=(o=s[1])==null?void 0:o.trim(),s=(t=s[0].trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return zi(s,c||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),h(c),i===0,o)})}rn.prototype._createTableSchema=Ui,rn.prototype._parseIndexSyntax=ia,rn.prototype._parseStoresSpec=function(e,t){var i=this;m(e).forEach(function(o){if(e[o]!==null){var s=i._parseIndexSyntax(e[o]),c=s.shift();if(!c)throw new W.Schema("Invalid schema for table "+o+": "+e[o]);if(c.unique=!0,c.multi)throw new W.Schema("Primary key cannot be multiEntry*");s.forEach(function(d){if(d.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")}),c=i._createTableSchema(o,c,s),t[o]=c}})},rn.prototype.stores=function(i){var t=this.db,i=(this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,i):i,t._versions),o={},s={};return i.forEach(function(c){g(o,c._cfg.storesSource),s=c._cfg.dbschema={},c._parseStoresSpec(o,s)}),t._dbSchema=s,$i(t,[t._allTables,t,t.Transaction.prototype]),ni(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],m(s),s),t._storeNames=m(s),this},rn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Pe(this._cfg.contentUpgrade||me,e),this};var Js=rn;function rn(){}function Yi(e,t){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new lr(Xn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function Gi(e){return e&&typeof e.databases=="function"}function Xi(e){return mr(function(){return se.letThrough=!0,e()})}function Ji(e){return!("from"in e)}var Ct=function(e,t){var i;if(!this)return i=new Ct,e&&"d"in e&&g(i,e),i;g(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Tn(e,t,i){var o=Ie(t,i);if(!isNaN(o)){if(0<o)throw RangeError();if(Ji(e))return g(e,{from:t,to:i,d:1});var o=e.l,s=e.r;if(Ie(i,e.from)<0)return o?Tn(o,t,i):e.l={from:t,to:i,d:1,l:null,r:null},aa(e);if(0<Ie(t,e.to))return s?Tn(s,t,i):e.r={from:t,to:i,d:1,l:null,r:null},aa(e);Ie(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),0<Ie(i,e.to)&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1),t=!e.r,o&&!e.l&&In(e,o),s&&t&&In(e,s)}}function In(e,t){Ji(t)||(function i(o,s){var c=s.from,d=s.l,p=s.r;Tn(o,c,s.to),d&&i(o,d),p&&i(o,p)})(e,t)}function oa(e,t){var i=si(t),o=i.next();if(!o.done)for(var s=o.value,c=si(e),d=c.next(s.from),p=d.value;!o.done&&!d.done;){if(Ie(p.from,s.to)<=0&&0<=Ie(p.to,s.from))return!0;Ie(s.from,p.from)<0?s=(o=i.next(p.from)).value:p=(d=c.next(s.from)).value}return!1}function si(e){var t=Ji(e)?null:{s:0,n:e};return{next:function(i){for(var o=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,o)for(;t.n.l&&Ie(i,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!o||Ie(i,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function aa(e){var t,i,o,s=(((s=e.r)==null?void 0:s.d)||0)-(((s=e.l)==null?void 0:s.d)||0),s=1<s?"r":s<-1?"l":"";s&&(t=s=="r"?"l":"r",i=l({},e),o=e[s],e.from=o.from,e.to=o.to,e[s]=o[s],i[s]=o[t],(e[t]=i).d=sa(i)),e.d=sa(e)}function sa(i){var t=i.r,i=i.l;return(t?i?Math.max(t.d,i.d):t.d:i?i.d:0)+1}function li(e,t){return m(t).forEach(function(i){e[i]?In(e[i],t[i]):e[i]=(function o(s){var c,d,p={};for(c in s)S(s,c)&&(d=s[c],p[c]=!d||typeof d!="object"||Ne.has(d.constructor)?d:o(d));return p})(t[i])}),e}function Qi(e,t){return e.all||t.all||Object.keys(e).some(function(i){return t[i]&&oa(t[i],e[i])})}A(Ct.prototype,((Ze={add:function(e){return In(this,e),this},addKey:function(e){return Tn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(i){return Tn(t,i,i)}),this},hasKey:function(e){var t=si(this).next(e).value;return t&&Ie(t.from,e)<=0&&0<=Ie(t.to,e)}})[De]=function(){return si(this)},Ze));var Lr={},Zi={},eo=!1;function ui(e){li(Zi,e),eo||(eo=!0,setTimeout(function(){eo=!1,to(Zi,!(Zi={}))},0))}function to(e,t){t===void 0&&(t=!1);var i=new Set;if(e.all)for(var o=0,s=Object.values(Lr);o<s.length;o++)la(p=s[o],e,i,t);else for(var c in e){var d,p,c=/^idb\:\/\/(.*)\/(.*)\//.exec(c);c&&(d=c[1],c=c[2],p=Lr["idb://".concat(d,"/").concat(c)])&&la(p,e,i,t)}i.forEach(function(w){return w()})}function la(e,t,i,o){for(var s=[],c=0,d=Object.entries(e.queries.query);c<d.length;c++){for(var p=d[c],w=p[0],B=[],x=0,b=p[1];x<b.length;x++){var E=b[x];Qi(t,E.obsSet)?E.subscribers.forEach(function(D){return i.add(D)}):o&&B.push(E)}o&&s.push([w,B])}if(o)for(var C=0,k=s;C<k.length;C++){var _=k[C],w=_[0],B=_[1];e.queries.query[w]=B}}function Qs(e){var t=e._state,i=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?dt(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var o=t.openCanceller,s=Math.round(10*e.verno),c=!1;function d(){if(t.openCanceller!==o)throw new W.DatabaseClosed("db.open() was cancelled")}function p(){return new Y(function(E,C){if(d(),!i)throw new W.MissingAPI;var k=e.name,_=t.autoSchema||!s?i.open(k):i.open(k,s);if(!_)throw new W.MissingAPI;_.onerror=tr(C),_.onblocked=rt(e._fireOnBlocked),_.onupgradeneeded=rt(function(D){var j;x=_.transaction,t.autoSchema&&!e._options.allowEmptyDB?(_.onerror=Dn,x.abort(),_.result.close(),(j=i.deleteDatabase(k)).onsuccess=j.onerror=rt(function(){C(new W.NoSuchDatabase("Database ".concat(k," doesnt exist")))})):(x.onerror=tr(C),j=D.oldVersion>Math.pow(2,62)?0:D.oldVersion,b=j<1,e.idbdb=_.result,c&&Xs(e,x),Gs(e,j/10,x,C))},C),_.onsuccess=rt(function(){x=null;var D,j,O,I,N,$,H=e.idbdb=_.result,q=ve(H.objectStoreNames);if(0<q.length)try{var ee=H.transaction((N=q).length===1?N[0]:N,"readonly");if(t.autoSchema)$=H,I=ee,(O=e).verno=$.version/10,I=O._dbSchema=oi(0,$,I),O._storeNames=ve($.objectStoreNames,0),ni(O,[O._allTables],m(I),I);else if(ai(e,e._dbSchema,ee),j=ee,((j=Hi(oi(0,(D=e).idbdb,j),D._dbSchema)).add.length||j.change.some(function(Q){return Q.add.length||Q.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),H.close(),s=H.version+1,c=!0,E(p());ri(e,ee)}catch{}Zr.push(e),H.onversionchange=rt(function(Q){t.vcFired=!0,e.on("versionchange").fire(Q)}),H.onclose=rt(function(){e.close({disableAutoOpen:!1})}),b&&(q=e._deps,N=k,Gi($=q.indexedDB)||N===Xn||Yi($,q.IDBKeyRange).put({name:N}).catch(me)),E()},C)}).catch(function(E){switch(E?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<s)return s=0,p()}return Y.reject(E)})}var w,B=t.dbReadyResolve,x=null,b=!1;return Y.race([o,(typeof navigator>"u"?Y.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(E){function C(){return indexedDB.databases().finally(E)}w=setInterval(C,100),C()}).finally(function(){return clearInterval(w)}):Promise.resolve()).then(p)]).then(function(){return d(),t.onReadyBeingFired=[],Y.resolve(Xi(function(){return e.on.ready.fire(e.vip)})).then(function E(){var C;if(0<t.onReadyBeingFired.length)return C=t.onReadyBeingFired.reduce(Pe,me),t.onReadyBeingFired=[],Y.resolve(Xi(function(){return C(e.vip)})).then(E)})}).finally(function(){t.openCanceller===o&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(E){t.dbOpenError=E;try{x&&x.abort()}catch{}return o===t.openCanceller&&e._close(),dt(E)}).finally(function(){t.openComplete=!0,B()}).then(function(){var E;return b&&(E={},e.tables.forEach(function(C){C.schema.indexes.forEach(function(k){k.name&&(E["idb://".concat(e.name,"/").concat(C.name,"/").concat(k.name)]=new Ct(-1/0,[[[]]]))}),E["idb://".concat(e.name,"/").concat(C.name,"/")]=E["idb://".concat(e.name,"/").concat(C.name,"/:dels")]=new Ct(-1/0,[[[]]])}),_r(Mn).fire(E),to(E,!0)),e})}function ro(e){function t(c){return e.next(c)}var i=s(t),o=s(function(c){return e.throw(c)});function s(c){return function(p){var p=c(p),w=p.value;return p.done?w:w&&typeof w.then=="function"?w.then(i,o):h(w)?Promise.all(w).then(i,o):i(w)}}return s(t)()}function ci(e,t,i){for(var o=h(e)?e.slice():[e],s=0;s<i;++s)o.push(t);return o}var Zs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return l(l({},e),{table:function(o){var i=e.table(o),o=i.schema,s={},c=[];function d(E,C,k){var O=Rn(E),_=s[O]=s[O]||[],D=E==null?0:typeof E=="string"?1:E.length,j=0<C,O=l(l({},k),{name:j?"".concat(O,"(virtual-from:").concat(k.name,")"):k.name,lowLevelIndex:k,isVirtual:j,keyTail:C,keyLength:D,extractKey:Vi(E),unique:!j&&k.unique});return _.push(O),O.isPrimaryKey||c.push(O),1<D&&d(D===2?E[0]:E.slice(0,D-1),C+1,k),_.sort(function(I,N){return I.keyTail-N.keyTail}),O}var p=d(o.primaryKey.keyPath,0,o.primaryKey);s[":id"]=[p];for(var w=0,B=o.indexes;w<B.length;w++){var x=B[w];d(x.keyPath,0,x)}function b(E){var C,k=E.query.index;return k.isVirtual?l(l({},E),{query:{index:k.lowLevelIndex,range:(C=E.query.range,k=k.keyTail,{type:C.type===1?2:C.type,lower:ci(C.lower,C.lowerOpen?e.MAX_KEY:e.MIN_KEY,k),lowerOpen:!0,upper:ci(C.upper,C.upperOpen?e.MIN_KEY:e.MAX_KEY,k),upperOpen:!0})}}):E}return l(l({},i),{schema:l(l({},o),{primaryKey:p,indexes:c,getIndexByKeyPath:function(E){return(E=s[Rn(E)])&&E[0]}}),count:function(E){return i.count(b(E))},query:function(E){return i.query(b(E))},openCursor:function(E){var C=E.query.index,k=C.keyTail,_=C.keyLength;return C.isVirtual?i.openCursor(b(E)).then(function(j){return j&&D(j)}):i.openCursor(E);function D(j){return Object.create(j,{continue:{value:function(O){O!=null?j.continue(ci(O,E.reverse?e.MAX_KEY:e.MIN_KEY,k)):E.unique?j.continue(j.key.slice(0,_).concat(E.reverse?e.MIN_KEY:e.MAX_KEY,k)):j.continue()}},continuePrimaryKey:{value:function(O,I){j.continuePrimaryKey(ci(O,e.MAX_KEY,k),I)}},primaryKey:{get:function(){return j.primaryKey}},key:{get:function(){var O=j.key;return _===1?O[0]:O.slice(0,_)}},value:{get:function(){return j.value}}})}}})}})}};function no(e,t,i,o){return i=i||{},o=o||"",m(e).forEach(function(s){var c,d,p;S(t,s)?(c=e[s],d=t[s],typeof c=="object"&&typeof d=="object"&&c&&d?(p=Re(c))!==Re(d)?i[o+s]=t[s]:p==="Object"?no(c,d,i,o+s+"."):c!==d&&(i[o+s]=t[s]):c!==d&&(i[o+s]=t[s])):i[o+s]=void 0}),m(t).forEach(function(s){S(e,s)||(i[o+s]=t[s])}),i}function io(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var el={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return l(l({},e),{table:function(t){var i=e.table(t),o=i.schema.primaryKey;return l(l({},i),{mutate:function(s){var c=se.trans,d=c.table(t).hook,p=d.deleting,w=d.creating,B=d.updating;switch(s.type){case"add":if(w.fire===me)break;return c._promise("readwrite",function(){return x(s)},!0);case"put":if(w.fire===me&&B.fire===me)break;return c._promise("readwrite",function(){return x(s)},!0);case"delete":if(p.fire===me)break;return c._promise("readwrite",function(){return x(s)},!0);case"deleteRange":if(p.fire===me)break;return c._promise("readwrite",function(){return(function b(E,C,k){return i.query({trans:E,values:!1,query:{index:o,range:C},limit:k}).then(function(_){var D=_.result;return x({type:"delete",keys:D,trans:E}).then(function(j){return 0<j.numFailures?Promise.reject(j.failures[0]):D.length<k?{failures:[],numFailures:0,lastResult:void 0}:b(E,l(l({},C),{lower:D[D.length-1],lowerOpen:!0}),k)})})})(s.trans,s.range,1e4)},!0)}return i.mutate(s);function x(b){var E,C,k,_=se.trans,D=b.keys||io(o,b);if(D)return(b=b.type==="add"||b.type==="put"?l(l({},b),{keys:D}):l({},b)).type!=="delete"&&(b.values=f([],b.values)),b.keys&&(b.keys=f([],b.keys)),E=i,k=D,((C=b).type==="add"?Promise.resolve([]):E.getMany({trans:C.trans,keys:k,cache:"immutable"})).then(function(j){var O=D.map(function(I,N){var $,H,q,ee=j[N],Q={onerror:null,onsuccess:null};return b.type==="delete"?p.fire.call(Q,I,ee,_):b.type==="add"||ee===void 0?($=w.fire.call(Q,I,b.values[N],_),I==null&&$!=null&&(b.keys[N]=I=$,o.outbound||pe(b.values[N],o.keyPath,I))):($=no(ee,b.values[N]),(H=B.fire.call(Q,$,I,ee,_))&&(q=b.values[N],Object.keys(H).forEach(function(U){S(q,U)?q[U]=H[U]:pe(q,U,H[U])}))),Q});return i.mutate(b).then(function(I){for(var N=I.failures,$=I.results,H=I.numFailures,I=I.lastResult,q=0;q<D.length;++q){var ee=($||D)[q],Q=O[q];ee==null?Q.onerror&&Q.onerror(N[q]):Q.onsuccess&&Q.onsuccess(b.type==="put"&&j[q]?b.values[q]:ee)}return{failures:N,results:$,numFailures:H,lastResult:I}}).catch(function(I){return O.forEach(function(N){return N.onerror&&N.onerror(I)}),Promise.reject(I)})});throw new Error("Keys missing")}}})}})}};function ua(e,t,i){try{if(!t||t.keys.length<e.length)return null;for(var o=[],s=0,c=0;s<t.keys.length&&c<e.length;++s)Ie(t.keys[s],e[c])===0&&(o.push(i?J(t.values[s]):t.values[s]),++c);return o.length===e.length?o:null}catch{return null}}var tl={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var i=e.table(t);return l(l({},i),{getMany:function(o){var s;return o.cache?(s=ua(o.keys,o.trans._cache,o.cache==="clone"))?Y.resolve(s):i.getMany(o).then(function(c){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?J(c):c},c}):i.getMany(o)},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),i.mutate(o)}})}}}};function ca(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function fa(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var rl={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,i=new Ct(e.MIN_KEY,e.MAX_KEY);return l(l({},e),{transaction:function(o,s,c){if(se.subscr&&s!=="readonly")throw new W.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(se.querier));return e.transaction(o,s,c)},table:function(o){function s(D){var _,D=D.query;return[_=D.index,new Ct((_=(D=D.range).lower)!=null?_:e.MIN_KEY,(_=D.upper)!=null?_:e.MAX_KEY)]}var c=e.table(o),d=c.schema,p=d.primaryKey,w=d.indexes,B=p.extractKey,x=p.outbound,b=p.autoIncrement&&w.filter(function(k){return k.compound&&k.keyPath.includes(p.keyPath)}),E=l(l({},c),{mutate:function(k){function _(te){return te="idb://".concat(t,"/").concat(o,"/").concat(te),N[te]||(N[te]=new Ct)}var D,j,O,I=k.trans,N=k.mutatedParts||(k.mutatedParts={}),$=_(""),H=_(":dels"),q=k.type,Q=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[io(p,k).filter(function(te){return te}),k.values]:[],ee=Q[0],Q=Q[1],U=k.trans._cache;return h(ee)?($.addKeys(ee),(q=q==="delete"||ee.length===Q.length?ua(ee,U):null)||H.addKeys(ee),(q||Q)&&(D=_,j=q,O=Q,d.indexes.forEach(function(te){var Fe=D(te.name||"");function Ue(Ae){return Ae!=null?te.extractKey(Ae):null}function _e(Ae){te.multiEntry&&h(Ae)?Ae.forEach(function(it){return Fe.addKey(it)}):Fe.addKey(Ae)}(j||O).forEach(function(Ae,lt){var Ut=j&&Ue(j[lt]),lt=O&&Ue(O[lt]);Ie(Ut,lt)!==0&&(Ut!=null&&_e(Ut),lt!=null)&&_e(lt)})}))):ee?(Q={from:(U=ee.lower)!=null?U:e.MIN_KEY,to:(q=ee.upper)!=null?q:e.MAX_KEY},H.add(Q),$.add(Q)):($.add(i),H.add(i),d.indexes.forEach(function(te){return _(te.name).add(i)})),c.mutate(k).then(function(te){return!ee||k.type!=="add"&&k.type!=="put"||($.addKeys(te.results),b&&b.forEach(function(Fe){for(var Ue=k.values.map(function(Ut){return Fe.extractKey(Ut)}),_e=Fe.keyPath.findIndex(function(Ut){return Ut===p.keyPath}),Ae=0,it=te.results.length;Ae<it;++Ae)Ue[Ae][_e]=te.results[Ae];_(Fe.name).addKeys(Ue)})),I.mutatedParts=li(I.mutatedParts||{},N),te})}}),C={get:function(k){return[p,new Ct(k.key)]},getMany:function(k){return[p,new Ct().addKeys(k.keys)]},count:s,query:s,openCursor:s};return m(C).forEach(function(k){E[k]=function(_){var D=se.subscr,j=!!D,O=ca(se,c)&&fa(k,_)?_.obsSet={}:D;if(j){var I,D=function(Q){return Q="idb://".concat(t,"/").concat(o,"/").concat(Q),O[Q]||(O[Q]=new Ct)},N=D(""),$=D(":dels"),j=C[k](_),H=j[0],j=j[1];if((k==="query"&&H.isPrimaryKey&&!_.values?$:D(H.name||"")).add(j),!H.isPrimaryKey){if(k!=="count")return I=k==="query"&&x&&_.values&&c.query(l(l({},_),{values:!1})),c[k].apply(this,arguments).then(function(Q){if(k==="query"){if(x&&_.values)return I.then(function(Ue){return Ue=Ue.result,N.addKeys(Ue),Q});var U=_.values?Q.result.map(B):Q.result;(_.values?N:$).addKeys(U)}else{var te,Fe;if(k==="openCursor")return Fe=_.values,(te=Q)&&Object.create(te,{key:{get:function(){return $.addKey(te.primaryKey),te.key}},primaryKey:{get:function(){var Ue=te.primaryKey;return $.addKey(Ue),Ue}},value:{get:function(){return Fe&&N.addKey(te.primaryKey),te.value}}})}return Q});$.add(i)}}return c[k].apply(this,arguments)}}),E}})}};function da(e,t,i){var o;return i.numFailures===0?t:t.type==="deleteRange"||(o=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1,i.numFailures===o)?null:(o=l({},t),h(o.keys)&&(o.keys=o.keys.filter(function(s,c){return!(c in i.failures)})),"values"in o&&h(o.values)&&(o.values=o.values.filter(function(s,c){return!(c in i.failures)})),o)}function oo(e,t){return i=e,((o=t).lower===void 0||(o.lowerOpen?0<Ie(i,o.lower):0<=Ie(i,o.lower)))&&(i=e,(o=t).upper===void 0||(o.upperOpen?Ie(i,o.upper)<0:Ie(i,o.upper)<=0));var i,o}function va(e,t,i,o,s,c){var d,p,w,B,x,b;return!i||i.length===0||(d=t.query.index,p=d.multiEntry,w=t.query.range,B=o.schema.primaryKey.extractKey,x=d.extractKey,b=(d.lowLevelIndex||d).extractKey,(o=i.reduce(function(E,C){var k=E,_=[];if(C.type==="add"||C.type==="put")for(var D=new Ct,j=C.values.length-1;0<=j;--j){var O,I=C.values[j],N=B(I);!D.hasKey(N)&&(O=x(I),p&&h(O)?O.some(function(Q){return oo(Q,w)}):oo(O,w))&&(D.addKey(N),_.push(I))}switch(C.type){case"add":var $=new Ct().addKeys(t.values?E.map(function(U){return B(U)}):E),k=E.concat(t.values?_.filter(function(U){return U=B(U),!$.hasKey(U)&&($.addKey(U),!0)}):_.map(function(U){return B(U)}).filter(function(U){return!$.hasKey(U)&&($.addKey(U),!0)}));break;case"put":var H=new Ct().addKeys(C.values.map(function(U){return B(U)}));k=E.filter(function(U){return!H.hasKey(t.values?B(U):U)}).concat(t.values?_:_.map(function(U){return B(U)}));break;case"delete":var q=new Ct().addKeys(C.keys);k=E.filter(function(U){return!q.hasKey(t.values?B(U):U)});break;case"deleteRange":var ee=C.range;k=E.filter(function(U){return!oo(B(U),ee)})}return k},e))===e)?e:(o.sort(function(E,C){return Ie(b(E),b(C))||Ie(B(E),B(C))}),t.limit&&t.limit<1/0&&(o.length>t.limit?o.length=t.limit:e.length===t.limit&&o.length<t.limit&&(s.dirty=!0)),c?Object.freeze(o):o)}function ha(e,t){return Ie(e.lower,t.lower)===0&&Ie(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function nl(e,t){return((i,o,s,c)=>{if(i===void 0)return o!==void 0?-1:0;if(o===void 0)return 1;if((i=Ie(i,o))===0){if(s&&c)return 0;if(s)return 1;if(c)return-1}return i})(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=((i,o,s,c)=>{if(i===void 0)return o!==void 0?1:0;if(o===void 0)return-1;if((i=Ie(i,o))===0){if(s&&c)return 0;if(s)return-1;if(c)return 1}return i})(e.upper,t.upper,e.upperOpen,t.upperOpen)}function il(e,t,i,o){e.subscribers.add(i),o.addEventListener("abort",function(){var s,c;e.subscribers.delete(i),e.subscribers.size===0&&(s=e,c=t,setTimeout(function(){s.subscribers.size===0&&We(c,s)},3e3))})}var ol={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return l(l({},e),{transaction:function(i,o,s){var c,d,p=e.transaction(i,o,s);return o==="readwrite"&&(s=(c=new AbortController).signal,p.addEventListener("abort",(d=function(w){return function(){if(c.abort(),o==="readwrite"){for(var B=new Set,x=0,b=i;x<b.length;x++){var E=b[x],C=Lr["idb://".concat(t,"/").concat(E)];if(C){var k=e.table(E),_=C.optimisticOps.filter(function(te){return te.trans===p});if(p._explicit&&w&&p.mutatedParts)for(var D=0,j=Object.values(C.queries.query);D<j.length;D++)for(var O=0,I=(H=j[D]).slice();O<I.length;O++)Qi((q=I[O]).obsSet,p.mutatedParts)&&(We(H,q),q.subscribers.forEach(function(te){return B.add(te)}));else if(0<_.length){C.optimisticOps=C.optimisticOps.filter(function(te){return te.trans!==p});for(var N=0,$=Object.values(C.queries.query);N<$.length;N++)for(var H,q,ee,Q=0,U=(H=$[N]).slice();Q<U.length;Q++)(q=U[Q]).res!=null&&p.mutatedParts&&(w&&!q.dirty?(ee=Object.isFrozen(q.res),ee=va(q.res,q.req,_,k,q,ee),q.dirty?(We(H,q),q.subscribers.forEach(function(te){return B.add(te)})):ee!==q.res&&(q.res=ee,q.promise=Y.resolve({result:ee}))):(q.dirty&&We(H,q),q.subscribers.forEach(function(te){return B.add(te)})))}}}B.forEach(function(te){return te()})}}})(!1),{signal:s}),p.addEventListener("error",d(!1),{signal:s}),p.addEventListener("complete",d(!0),{signal:s})),p},table:function(i){var o=e.table(i),s=o.schema.primaryKey;return l(l({},o),{mutate:function(c){var d,p=se.trans;return!s.outbound&&p.db._options.cache!=="disabled"&&!p.explicit&&p.idbtrans.mode==="readwrite"&&(d=Lr["idb://".concat(t,"/").concat(i)])?(p=o.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||io(s,c).some(function(w){return w==null}))?(d.optimisticOps.push(c),c.mutatedParts&&ui(c.mutatedParts),p.then(function(w){0<w.numFailures&&(We(d.optimisticOps,c),(w=da(0,c,w))&&d.optimisticOps.push(w),c.mutatedParts)&&ui(c.mutatedParts)}),p.catch(function(){We(d.optimisticOps,c),c.mutatedParts&&ui(c.mutatedParts)})):p.then(function(w){var B=da(0,l(l({},c),{values:c.values.map(function(x,b){var E;return w.failures[b]?x:(pe(E=(E=s.keyPath)!=null&&E.includes(".")?J(x):l({},x),s.keyPath,w.results[b]),E)})}),w);d.optimisticOps.push(B),queueMicrotask(function(){return c.mutatedParts&&ui(c.mutatedParts)})}),p):o.mutate(c)},query:function(c){var d,p,w,B,x,b,E;return ca(se,o)&&fa("query",c)?(d=((w=se.trans)==null?void 0:w.db._options.cache)==="immutable",p=(w=se).requery,w=w.signal,b=((C,k,_,D)=>{var j=Lr["idb://".concat(C,"/").concat(k)];if(!j)return[];if(!(C=j.queries[_]))return[null,!1,j,null];var O=C[(D.query?D.query.index.name:null)||""];if(!O)return[null,!1,j,null];switch(_){case"query":var I=O.find(function(N){return N.req.limit===D.limit&&N.req.values===D.values&&ha(N.req.query.range,D.query.range)});return I?[I,!0,j,O]:[O.find(function(N){return("limit"in N.req?N.req.limit:1/0)>=D.limit&&(!D.values||N.req.values)&&nl(N.req.query.range,D.query.range)}),!1,j,O];case"count":return I=O.find(function(N){return ha(N.req.query.range,D.query.range)}),[I,!!I,j,O]}})(t,i,"query",c),E=b[0],B=b[2],x=b[3],E&&b[1]?E.obsSet=c.obsSet:(b=o.query(c).then(function(C){var k=C.result;if(E&&(E.res=k),d){for(var _=0,D=k.length;_<D;++_)Object.freeze(k[_]);Object.freeze(k)}else C.result=J(k);return C}).catch(function(C){return x&&E&&We(x,E),Promise.reject(C)}),E={obsSet:c.obsSet,promise:b,subscribers:new Set,type:"query",req:c,dirty:!1},x?x.push(E):(x=[E],(B=B||(Lr["idb://".concat(t,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=x)),il(E,x,p,w),E.promise.then(function(C){return{result:va(C.result,c,B?.optimisticOps,o,E,d)}})):o.query(c)}})}})}};function fi(e,t){return new Proxy(e,{get:function(i,o,s){return o==="db"?t:Reflect.get(i,o,s)}})}vt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new W.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,i=t.filter(function(o){return o._cfg.version===e})[0];return i||(i=new this.Version(e),t.push(i),t.sort(Ys),i.stores({}),this._state.autoSchema=!1),i},vt.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||se.letThrough||this._vip)?e():new Y(function(i,o){if(t._state.openComplete)return o(new W.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void o(new W.DatabaseClosed);t.open().catch(me)}t._state.dbReadyPromise.then(i,o)}).then(e)},vt.prototype.use=function(s){var t=s.stack,i=s.create,o=s.level,s=s.name,c=(s&&this.unuse({stack:t,name:s}),this._middlewares[t]||(this._middlewares[t]=[]));return c.push({stack:t,create:i,level:o??10,name:s}),c.sort(function(d,p){return d.level-p.level}),this},vt.prototype.unuse=function(e){var t=e.stack,i=e.name,o=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(s){return o?s.create!==o:!!i&&s.name!==i})),this},vt.prototype.open=function(){var e=this;return Ir(Pt,function(){return Qs(e)})},vt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=Zr.indexOf(this);if(0<=t&&Zr.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Y(function(i){e.dbReadyResolve=i}),e.openCanceller=new Y(function(i,o){e.cancelOpen=o}))},vt.prototype.close=function(t){var t=(t===void 0?{disableAutoOpen:!0}:t).disableAutoOpen,i=this._state;t?(i.isBeingOpened&&i.cancelOpen(new W.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new W.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},vt.prototype.delete=function(e){var t=this,i=(e===void 0&&(e={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),o=this._state;return new Y(function(s,c){function d(){t.close(e);var p=t._deps.indexedDB.deleteDatabase(t.name);p.onsuccess=rt(function(){var w,B,x;w=t._deps,B=t.name,Gi(x=w.indexedDB)||B===Xn||Yi(x,w.IDBKeyRange).delete(B).catch(me),s()}),p.onerror=tr(c),p.onblocked=t._fireOnBlocked}if(i)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");o.isBeingOpened?o.dbReadyPromise.then(d):d()})},vt.prototype.backendDB=function(){return this.idbdb},vt.prototype.isOpen=function(){return this.idbdb!==null},vt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},vt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},vt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(vt.prototype,"tables",{get:function(){var e=this;return m(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),vt.prototype.transaction=function(){var e=(function(t,i,o){var s=arguments.length;if(s<2)throw new W.InvalidArgument("Too few arguments");for(var c=new Array(s-1);--s;)c[s-1]=arguments[s];return o=c.pop(),[t,Ke(c),o]}).apply(this,arguments);return this._transaction.apply(this,e)},vt.prototype._transaction=function(e,t,i){var o,s,c=this,d=se.trans,p=(d&&d.db===this&&e.indexOf("!")===-1||(d=null),e.indexOf("?")!==-1);e=e.replace("!","").replace("?","");try{if(s=t.map(function(B){if(B=B instanceof c.Table?B.name:B,typeof B!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return B}),e=="r"||e===Ki)o=Ki;else{if(e!="rw"&&e!=Fi)throw new W.InvalidArgument("Invalid transaction mode: "+e);o=Fi}if(d){if(d.mode===Ki&&o===Fi){if(!p)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d=null}d&&s.forEach(function(B){if(d&&d.storeNames.indexOf(B)===-1){if(!p)throw new W.SubTransaction("Table "+B+" not included in parent transaction.");d=null}}),p&&d&&!d.active&&(d=null)}}catch(B){return d?d._promise(null,function(x,b){b(B)}):dt(B)}var w=(function B(x,b,E,C,k){return Y.resolve().then(function(){var O=se.transless||se,_=x._createTransaction(b,E,x._dbSchema,C),O=(_.explicit=!0,{trans:_,transless:O});if(C)_.idbtrans=C.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,x._state.PR1398_maxLoop=3}catch(I){return I.name===Se.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return B(x,b,E,null,k)})):dt(I)}var D,j=nt(k),O=(j&&Qr(),Y.follow(function(){var I;(D=k.call(_,_))&&(j?(I=gr.bind(null,null),D.then(I,I)):typeof D.next=="function"&&typeof D.throw=="function"&&(D=ro(D)))},O));return(D&&typeof D.then=="function"?Y.resolve(D).then(function(I){return _.active?I:dt(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):O.then(function(){return D})).then(function(I){return C&&_._resolve(),_._completion.then(function(){return I})}).catch(function(I){return _._reject(I),dt(I)})})}).bind(null,this,o,s,d,i);return d?d._promise(o,w,"lock"):se.trans?Ir(se.transless,function(){return c._whenReady(w)}):this._whenReady(w)},vt.prototype.table=function(e){if(S(this._allTables,e))return this._allTables[e];throw new W.InvalidTable("Table ".concat(e," does not exist"))};var lr=vt;function vt(e,t){var i,o,s,c,d,p=this,w=(this._middlewares={},this.verno=0,vt.dependencies),w=(this._options=t=l({addons:vt.addons,autoOpen:!0,indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},t.addons),B=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:me,dbReadyPromise:null,cancelOpen:me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen}),x=(B.dbReadyPromise=new Y(function(b){B.dbReadyResolve=b}),B.openCanceller=new Y(function(b,E){B.cancelOpen=E}),this._state=B,this.name=e,this.on=Bn(this,"populate","blocked","versionchange","close",{ready:[Pe,me]}),this.once=function(b,E){var C=function(){for(var k=[],_=0;_<arguments.length;_++)k[_]=arguments[_];p.on(b).unsubscribe(C),E.apply(p,k)};return p.on(b,C)},this.on.ready.subscribe=we(this.on.ready.subscribe,function(b){return function(E,C){vt.vip(function(){var k,_=p._state;_.openComplete?(_.dbOpenError||Y.resolve().then(E),C&&b(E)):_.onReadyBeingFired?(_.onReadyBeingFired.push(E),C&&b(E)):(b(E),k=p,C||b(function D(){k.on.ready.unsubscribe(E),k.on.ready.unsubscribe(D)}))})}}),this.Collection=(i=this,Pn(qs.prototype,function(D,_){this.db=i;var C=Uo,k=null;if(_)try{C=_()}catch(O){k=O}var _=D._ctx,D=_.table,j=D.hook.reading.fire;this._ctx={table:D,index:_.index,isPrimKey:!_.index||D.schema.primKey.keyPath&&_.index===D.schema.primKey.name,range:C,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:k,or:_.or,valueMapper:j!==ft?j:null}})),this.Table=(o=this,Pn(Go.prototype,function(b,E,C){this.db=o,this._tx=C,this.name=b,this.schema=E,this.hook=o._allTables[b]?o._allTables[b].hook:Bn(null,{creating:[ge,me],reading:[Kt,ft],updating:[he,me],deleting:[L,me]})})),this.Transaction=(s=this,Pn(Vs.prototype,function(b,E,C,k,_){var D=this;b!=="readonly"&&E.forEach(function(j){j=(j=C[j])==null?void 0:j.yProps,j&&(E=E.concat(j.map(function(O){return O.updatesTable})))}),this.db=s,this.mode=b,this.storeNames=E,this.schema=C,this.chromeTransactionDurability=k,this.idbtrans=null,this.on=Bn(this,"complete","error","abort"),this.parent=_||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Y(function(j,O){D._resolve=j,D._reject=O}),this._completion.then(function(){D.active=!1,D.on.complete.fire()},function(j){var O=D.active;return D.active=!1,D.on.error.fire(j),D.parent?D.parent._reject(j):O&&D.idbtrans&&D.idbtrans.abort(),dt(j)})})),this.Version=(c=this,Pn(Js.prototype,function(b){this.db=c,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(d=this,Pn(ea.prototype,function(b,E,C){if(this.db=d,this._ctx={table:b,index:E===":id"?null:E,or:C},this._cmp=this._ascending=Ie,this._descending=function(k,_){return Ie(_,k)},this._max=function(k,_){return 0<Ie(k,_)?k:_},this._min=function(k,_){return Ie(k,_)<0?k:_},this._IDBKeyRange=d._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})),this.on("versionchange",function(b){0<b.newVersion?console.warn("Another connection wants to upgrade database '".concat(p.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(p.name,"'. Closing db now to resume the delete request.")),p.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(p.name,"') was blocked")):console.warn("Upgrade '".concat(p.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=jn(t.IDBKeyRange),this._createTransaction=function(b,E,C,k){return new p.Transaction(b,E,C,p._options.chromeTransactionDurability,k)},this._fireOnBlocked=function(b){p.on("blocked").fire(b),Zr.filter(function(E){return E.name===p.name&&E!==p&&!E._state.vcFired}).map(function(E){return E.on("versionchange").fire(b)})},this.use(tl),this.use(ol),this.use(rl),this.use(Zs),this.use(el),new Proxy(this,{get:function(b,E,C){var k;return E==="_vip"||(E==="table"?function(_){return fi(p.table(_),x)}:(k=Reflect.get(b,E,C))instanceof Go?fi(k,x):E==="tables"?k.map(function(_){return fi(_,x)}):E==="_createTransaction"?function(){return fi(k.apply(this,arguments),x)}:k)}}));this.vip=x,w.forEach(function(b){return b(p)})}var di,nn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",al=(ao.prototype.subscribe=function(e,t,i){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:i})},ao.prototype[nn]=function(){return this},ao);function ao(e){this._subscribe=e}try{di={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{di={indexedDB:null,IDBKeyRange:null}}function pa(e){var t,i=!1,o=new al(function(s){var c=nt(e),d,p=!1,w={},B={},x={get closed(){return p},unsubscribe:function(){p||(p=!0,d&&d.abort(),b&&_r.storagemutated.unsubscribe(C))}},b=(s.start&&s.start(x),!1),E=function(){return Ii(k)},C=function(_){li(w,_),Qi(B,w)&&E()},k=function(){var _,D,j;!p&&di.indexedDB&&(w={},_={},d&&d.abort(),d=new AbortController,j=(O=>{var I=Xr();try{c&&Qr();var N=mr(e,O);return N=c?N.finally(gr):N}finally{I&&Jr()}})(D={subscr:_,signal:d.signal,requery:E,querier:e,trans:null}),Promise.resolve(j).then(function(O){i=!0,t=O,p||D.signal.aborted||(w={},(I=>{for(var N in I)if(S(I,N))return;return 1})(B=_)||b||(_r(Mn,C),b=!0),Ii(function(){return!p&&s.next&&s.next(O)}))},function(O){i=!1,["DatabaseClosedError","AbortError"].includes(O?.name)||p||Ii(function(){p||s.error&&s.error(O)})}))};return setTimeout(E,0),x});return o.hasValue=function(){return i},o.getValue=function(){return t},o}var Nr=lr;function so(e){var t=wr;try{wr=!0,_r.storagemutated.fire(e),to(e,!0)}finally{wr=t}}A(Nr,l(l({},ae),{delete:function(e){return new Nr(e,{addons:[]}).delete()},exists:function(e){return new Nr(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=Nr.dependencies,i=t.indexedDB,t=t.IDBKeyRange,(Gi(i)?Promise.resolve(i.databases()).then(function(o){return o.map(function(s){return s.name}).filter(function(s){return s!==Xn})}):Yi(i,t).toCollection().primaryKeys()).then(e)}catch{return dt(new W.MissingAPI)}var t,i},defineClass:function(){return function(e){g(this,e)}},ignoreTransaction:function(e){return se.trans?Ir(se.transless,e):e()},vip:Xi,async:function(e){return function(){try{var t=ro(e.apply(this,arguments));return t&&typeof t.then=="function"?t:Y.resolve(t)}catch(i){return dt(i)}}},spawn:function(e,t,i){try{var o=ro(e.apply(i,t||[]));return o&&typeof o.then=="function"?o:Y.resolve(o)}catch(s){return dt(s)}},currentTransaction:{get:function(){return se.trans||null}},waitFor:function(e,t){return e=Y.resolve(typeof e=="function"?Nr.ignoreTransaction(e):e).timeout(t||6e4),se.trans?se.trans.waitFor(e):e},Promise:Y,debug:{get:function(){return Ve},set:function(e){St(e)}},derive:V,extend:g,props:A,override:we,Events:Bn,on:_r,liveQuery:pa,extendObservabilitySet:li,getByKeyPath:oe,setByKeyPath:pe,delByKeyPath:function(e,t){typeof t=="string"?pe(e,t,void 0):"length"in t&&[].map.call(t,function(i){pe(e,i,void 0)})},shallowClone:ue,deepClone:J,getObjectDiff:no,cmp:Ie,asap:G,minKey:-1/0,addons:[],connections:Zr,errnames:Se,dependencies:di,cache:Lr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,i){return e+t/Math.pow(10,2*i)})})),Nr.maxKey=jn(Nr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(_r(Mn,function(e){wr||(e=new CustomEvent(qi,{detail:e}),wr=!0,dispatchEvent(e),wr=!1)}),addEventListener(qi,function(e){e=e.detail,wr||so(e)}));var on,wr=!1,ma=function(){};return typeof BroadcastChannel<"u"&&((ma=function(){(on=new BroadcastChannel(qi)).onmessage=function(e){return e.data&&so(e.data)}})(),typeof on.unref=="function"&&on.unref(),_r(Mn,function(e){wr||on.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!lr.disableBfCache&&e.persisted){Ve&&console.debug("Dexie: handling persisted pagehide"),on?.close();for(var t=0,i=Zr;t<i.length;t++)i[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!lr.disableBfCache&&e.persisted&&(Ve&&console.debug("Dexie: handling persisted pageshow"),ma(),so({all:new Ct(-1/0,[[]])}))})),Y.rejectionMapper=function(e,t){return!e||e instanceof Te||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Qe[e.name]?e:(t=new Qe[e.name](t||e.message,e),"stack"in e&&T(t,"stack",{get:function(){return this.inner.stack}}),t)},St(Ve),l(lr,Object.freeze({__proto__:null,Dexie:lr,Entity:Vo,PropModification:On,RangeSet:Ct,add:function(e){return new On({add:e})},cmp:Ie,default:lr,liveQuery:pa,mergeRanges:In,rangesOverlap:oa,remove:function(e){return new On({remove:e})},replacePrefix:function(e,t){return new On({replacePrefix:[e,t]})}}),{default:lr}),lr})})(mi)),mi.exports}var Nu=Lu();const Co=Ku(Nu),Ra=Symbol.for("Dexie"),bi=globalThis[Ra]||(globalThis[Ra]=Co);if(Co.semVer!==bi.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Co.semVer} and ${bi.semVer}`);const{liveQuery:nd,mergeRanges:id,rangesOverlap:od,RangeSet:ad,cmp:sd,Entity:ld,PropModification:ud,replacePrefix:cd,add:fd,remove:dd,DexieYProvider:vd}=bi,Je=new bi("MemoriaDB");Je.version(1).stores({collections:"id, name, createdAt, updatedAt",cards:"id, collectionId, createdAt, lastReviewedAt"});class qu{constructor(n={}){this.id=n.id||crypto.randomUUID(),this.name=n.name||"",this.description=n.description||"",this.createdAt=n.createdAt||Date.now(),this.updatedAt=n.updatedAt||Date.now(),this.cardCount=n.cardCount||0}}class zu{constructor(n={}){this.id=n.id||crypto.randomUUID(),this.collectionId=n.collectionId||"",this.text=n.text||"",this.imageBlob=n.imageBlob||null,this.audioBlob=n.audioBlob||null,this.createdAt=n.createdAt||Date.now(),this.lastReviewedAt=n.lastReviewedAt||null,this.reviewCount=n.reviewCount||0,this.difficulty=n.difficulty||0}}async function Uu(){try{return await Je.open(),console.log("â Memoria database initialized successfully"),console.log("ð Database version:",Je.verno),!0}catch(r){return console.error("â Failed to initialize database:",r),window.indexedDB||console.error("â ï¸ Your browser does not support IndexedDB. Please upgrade to a modern browser."),!1}}function _n(r){if(!r)return"Never";const n=new Date(r),l=new Date-n,f=Math.floor(l/1e3),u=Math.floor(f/60),m=Math.floor(u/60),h=Math.floor(m/24),g=Math.floor(h/7),y=Math.floor(h/30),P=Math.floor(h/365);return f<60?"Just now":u<60?`${u} minute${u!==1?"s":""} ago`:m<24?`${m} hour${m!==1?"s":""} ago`:h<7?`${h} day${h!==1?"s":""} ago`:g<4?`${g} week${g!==1?"s":""} ago`:y<12?`${y} month${y!==1?"s":""} ago`:`${P} year${P!==1?"s":""} ago`}function Vu(r,n=100){return!r||r.length<=n?r:r.substring(0,n)+"..."}function $u(){return{indexedDB:!!window.indexedDB,serviceWorker:"serviceWorker"in navigator,mediaDevices:!!navigator.mediaDevices,getUserMedia:!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),mediaRecorder:typeof MediaRecorder<"u",crypto:!!window.crypto&&!!window.crypto.randomUUID,canvas:(()=>{try{const r=document.createElement("canvas");return!!(r.getContext&&r.getContext("2d"))}catch{return!1}})()}}function Hu(){const r=$u();console.log("ð Browser Support Check:"),console.table(r);const n=Object.keys(r).filter(a=>!r[a]);n.length>0?console.warn("â ï¸ Unsupported features:",n.join(", ")):console.log("â All features supported!")}function Wu(){const{subscribe:r,set:n,update:a}=Ms([]);return{subscribe:r,async load(){try{const l=await Je.collections.orderBy("updatedAt").reverse().toArray();return n(l),console.log("ð Loaded",l.length,"collections"),l}catch(l){throw console.error("Failed to load collections:",l),n([]),l}},async create(l){try{const f=new qu({name:l.name,description:l.description||""});return await Je.collections.add(f),a(u=>[f,...u]),console.log("â Created collection:",f.name),f}catch(f){throw console.error("Failed to create collection:",f),f}},async update(l,f){try{const u={...f,updatedAt:Date.now()};await Je.collections.update(l,u),a(m=>m.map(h=>h.id===l?{...h,...u}:h)),console.log("â Updated collection:",l)}catch(u){throw console.error("Failed to update collection:",u),u}},async delete(l){try{await Je.collections.delete(l),await Je.cards.where("collectionId").equals(l).delete(),a(f=>f.filter(u=>u.id!==l)),console.log("ðï¸ Deleted collection:",l)}catch(f){throw console.error("Failed to delete collection:",f),f}},async getById(l){try{return await Je.collections.get(l)}catch(f){throw console.error("Failed to get collection:",f),f}},async updateCardCount(l,f){try{await Je.collections.update(l,{cardCount:f,updatedAt:Date.now()}),a(u=>u.map(m=>m.id===l?{...m,cardCount:f,updatedAt:Date.now()}:m))}catch(u){throw console.error("Failed to update card count:",u),u}},async clear(){await Je.collections.clear(),await Je.cards.clear(),n([]),console.log("ðï¸ Cleared all collections")}}}const fr=Wu();var Yu=X('<div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10"><button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> ç·¨é</button> <button class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> åé¤</button></div>'),Gu=X('<p class="text-gray-600 text-sm mb-4 line-clamp-2 svelte-17y57sb"> </p>'),Xu=X('<p class="text-gray-400 text-sm italic mb-4">èª¬æãªã</p>'),Ju=X('<div><div class="absolute top-4 right-4 menu-container"><button class="text-gray-400 hover:text-gray-600 p-1 rounded hover:bg-gray-100" aria-label="ã³ã¬ã¯ã·ã§ã³ã®æä½"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path></svg></button> <!></div> <div class="pr-8"><h3 class="text-xl font-semibold text-gray-900 mb-2"> </h3> <!> <div class="flex items-center justify-between mt-4 pt-4 border-t border-gray-100"><div class="flex items-center text-sm text-gray-500"><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> <span class="font-medium"> </span> <span class="ml-1">æ</span></div> <div class="text-xs text-gray-400"> </div></div></div></div>');function Qu(r,n){Tt(n,!1);let a=Me(n,"collection",8),l=Me(n,"onEdit",8,null),f=Me(n,"onDelete",8,null),u=Me(n,"onClick",8,null),m=re(!1);function h(){R(m,!v(m))}function g(){R(m,!1),l()&&l()(a())}function y(){R(m,!1),f()&&f()(a())}function P(J){v(m)&&!J.target.closest(".menu-container")&&R(m,!1)}qt();var S=Ju();be("click",zn,P);let A;var K=M(S),T=M(K),V=F(T,2);{var Z=J=>{var xe=Yu(),Re=M(xe),De=F(Re,2);be("click",Re,g),be("click",De,y),z(J,xe)};de(V,J=>{v(m)&&J(Z)})}var le=F(K,2),ve=M(le),we=M(ve),ce=F(ve,2);{var G=J=>{var xe=Gu(),Re=M(xe);Be(()=>Oe(Re,(Xe(a()),fe(()=>a().description)))),z(J,xe)},oe=J=>{var xe=Xu();z(J,xe)};de(ce,J=>{Xe(a()),fe(()=>a().description)?J(G):J(oe,!1)})}var pe=F(ce,2),ue=M(pe),je=F(M(ue),2),Ke=M(je),Ne=F(ue,2),$e=M(Ne);Be(J=>{A=Dr(S,1,"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6 relative",null,A,{"cursor-pointer":u()}),Yr(S,"role",u()?"button":null),Yr(S,"tabindex",u()?0:null),Oe(we,(Xe(a()),fe(()=>a().name))),Oe(Ke,(Xe(a()),fe(()=>a().cardCount||0))),Oe($e,`æ´æ°ï¼${J??""}`)},[()=>(Xe(_n),Xe(a()),fe(()=>_n(a().updatedAt)))]),be("click",T,Io(h)),be("click",S,()=>u()&&u()(a())),be("keydown",S,J=>(J.key==="Enter"||J.key===" ")&&u()&&u()(a())),z(r,S),It()}var Zu=X('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),ec=X('<button class="inline-flex items-center px-6 py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> æåã®ã³ã¬ã¯ã·ã§ã³ãä½æ</button>'),tc=X('<div class="text-center py-16"><div class="inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4"><svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div> <h3 class="text-xl font-semibold text-gray-900 mb-2">ã³ã¬ã¯ã·ã§ã³ãããã¾ãã</h3> <p class="text-gray-600 mb-6 max-w-sm mx-auto">æåã®ã³ã¬ã¯ã·ã§ã³ãä½æãã¦ããã©ãã·ã¥ã«ã¼ããæ´çãã¾ãããã</p> <!></div>'),rc=X("<div><!></div>");function nc(r,n){Tt(n,!1);let a=Me(n,"collections",24,()=>[]),l=Me(n,"onEdit",8,null),f=Me(n,"onDelete",8,null),u=Me(n,"onCreate",8,null),m=Me(n,"onClick",8,null);qt();var h=rc(),g=M(h);{var y=S=>{var A=Zu();Bs(A,5,a,K=>K.id,(K,T)=>{Qu(K,{get collection(){return v(T)},get onEdit(){return l()},get onDelete(){return f()},get onClick(){return m()}})}),z(S,A)},P=S=>{var A=tc(),K=F(M(A),6);{var T=V=>{var Z=ec();be("click",Z,function(...le){u()?.apply(this,le)}),z(V,Z)};de(K,V=>{u()&&V(T)})}z(S,A)};de(g,S=>{Xe(a()),fe(()=>a().length>0)?S(y):S(P,!1)})}z(r,h),It()}var ic=X('<div class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm"> </div>'),oc=X('<p class="text-sm text-red-600"> </p>'),ac=X('<p class="text-xs text-gray-500">å¿é </p>'),sc=X('<p class="text-sm text-red-600"> </p>'),lc=X("<div></div>"),uc=wt('<svg class="animate-spin h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ä¿å­ä¸­...',1),cc=X('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center p-4 z-50 overflow-y-auto" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white rounded-lg shadow-xl max-w-md w-full max-h-[85dvh] overflow-y-auto my-auto"><div class="flex items-center justify-between p-6 border-b border-gray-200"><h2 id="modal-title" class="text-2xl font-semibold text-gray-900"> </h2> <button class="p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors" aria-label="éãã"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="p-6"><!> <div class="mb-4"><label for="collection-name" class="block text-sm font-medium text-gray-700 mb-2">ã³ã¬ã¯ã·ã§ã³å <span class="text-red-500">*</span></label> <input id="collection-name" type="text" placeholder="ä¾ï¼ã¹ãã¤ã³èªã®èªå½" maxlength="100"/> <div class="flex items-center justify-between mt-1"><!> <p class="text-xs text-gray-400"> </p></div></div> <div class="mb-6"><label for="collection-description" class="block text-sm font-medium text-gray-700 mb-2">èª¬æ <span class="text-gray-400 text-xs">ï¼ä»»æï¼</span></label> <textarea id="collection-description" placeholder="ãã®ã³ã¬ã¯ã·ã§ã³ã®ç®çãèª¬æããã¡ã¢ãè¿½å ..." maxlength="500" rows="4"></textarea> <div class="flex items-center justify-between mt-1"><!> <p class="text-xs text-gray-400"> </p></div></div> <div class="flex gap-3"><button type="button" class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">ã­ã£ã³ã»ã«</button> <button type="submit" class="flex-1 px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"><!></button></div></form></div></div>');function fc(r,n){Tt(n,!1);const a=re(),l=re(),f=re();let u=Me(n,"collection",8,null),m=Me(n,"isOpen",8,!1);const h=An();let g=re(u()?.name||""),y=re(u()?.description||""),P=re(!1),S=re({});function A(){u()||(R(g,""),R(y,"")),R(S,{}),R(P,!1)}function K(){return R(S,{}),v(g).trim()?v(g).trim().length>100&&Bt(S,v(S).name="ã³ã¬ã¯ã·ã§ã³åã¯100æå­ä»¥åã§å¥åãã¦ãã ãã"):Bt(S,v(S).name="ã³ã¬ã¯ã·ã§ã³åã¯å¿é ã§ã"),v(y).length>500&&Bt(S,v(S).description="èª¬æã¯500æå­ä»¥åã§å¥åãã¦ãã ãã"),Object.keys(v(S)).length===0}async function T(){if(K()){R(P,!0);try{const G={name:v(g).trim(),description:v(y).trim()};v(a)?h("update",{id:u().id,...G}):h("create",G),V()}catch(G){console.error("Failed to submit:",G),Bt(S,v(S).general="ã³ã¬ã¯ã·ã§ã³ã®ä¿å­ã«å¤±æãã¾ãããããä¸åº¦ãè©¦ããã ããã")}finally{R(P,!1)}}}function V(){h("close"),A()}function Z(G){G.target===G.currentTarget&&V()}function le(G){G.key==="Escape"&&V()}ut(()=>Xe(u()),()=>{u()&&(R(g,u().name||""),R(y,u().description||""))}),ut(()=>Xe(m()),()=>{m()||A()}),ut(()=>Xe(u()),()=>{R(a,u()!==null)}),ut(()=>v(a),()=>{R(l,v(a)?"ã³ã¬ã¯ã·ã§ã³ãç·¨é":"æ°ããã³ã¬ã¯ã·ã§ã³")}),ut(()=>v(a),()=>{R(f,v(a)?"å¤æ´ãä¿å­":"ã³ã¬ã¯ã·ã§ã³ãä½æ")}),En(),qt();var ve=To(),we=Br(ve);{var ce=G=>{var oe=cc(),pe=M(oe),ue=M(pe),je=M(ue),Ke=M(je),Ne=F(je,2),$e=F(ue,2),J=M($e);{var xe=ye=>{var Pe=ic(),Ve=M(Pe);Be(()=>Oe(Ve,(v(S),fe(()=>v(S).general)))),z(ye,Pe)};de(J,ye=>{v(S),fe(()=>v(S).general)&&ye(xe)})}var Re=F(J,2),De=F(M(Re),2);let He;var We=F(De,2),Ce=M(We);{var qe=ye=>{var Pe=oc(),Ve=M(Pe);Be(()=>Oe(Ve,(v(S),fe(()=>v(S).name)))),z(ye,Pe)},nt=ye=>{var Pe=ac();z(ye,Pe)};de(Ce,ye=>{v(S),fe(()=>v(S).name)?ye(qe):ye(nt,!1)})}var ae=F(Ce,2),ke=M(ae),Te=F(Re,2),ie=F(M(Te),2);let Ee;var ne=F(ie,2),Se=M(ne);{var ht=ye=>{var Pe=sc(),Ve=M(Pe);Be(()=>Oe(Ve,(v(S),fe(()=>v(S).description)))),z(ye,Pe)},W=ye=>{var Pe=lc();z(ye,Pe)};de(Se,ye=>{v(S),fe(()=>v(S).description)?ye(ht):ye(W,!1)})}var Qe=F(Se,2),me=M(Qe),ft=F(Te,2),Kt=M(ft),gt=F(Kt,2),ge=M(gt);{var L=ye=>{var Pe=uc();z(ye,Pe)},he=ye=>{var Pe=As();Be(()=>Oe(Pe,v(f))),z(ye,Pe)};de(ge,ye=>{v(P)?ye(L):ye(he,!1)})}Be(()=>{Oe(Ke,v(l)),He=Dr(De,1,"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-colors text-base",null,He,{"border-red-500":v(S).name}),De.disabled=v(P),Oe(ke,`${v(g),fe(()=>v(g).length)??""}/100`),Ee=Dr(ie,1,"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-colors resize-none text-base",null,Ee,{"border-red-500":v(S).description}),ie.disabled=v(P),Oe(me,`${v(y),fe(()=>v(y).length)??""}/500`),Kt.disabled=v(P),gt.disabled=v(P)}),be("click",Ne,V),ko(De,()=>v(g),ye=>R(g,ye)),ko(ie,()=>v(y),ye=>R(y,ye)),be("click",Kt,V),be("submit",$e,Ps(T)),be("click",oe,Z),be("keydown",oe,le),z(G,oe)};de(we,G=>{m()&&G(ce)})}z(r,ve),It()}function dc(){const{subscribe:r,set:n,update:a}=Ms([]);return{subscribe:r,async load(l){try{const f=await Je.cards.where("collectionId").equals(l).sortBy("createdAt");return f.reverse(),n(f),console.log("ð Loaded",f.length,"cards for collection",l),f}catch(f){throw console.error("Failed to load cards:",f),n([]),f}},async create(l,f){try{const u=new zu({collectionId:l,text:f.text,imageBlob:f.imageBlob||null,audioBlob:f.audioBlob||null});return await Je.cards.add(u),a(m=>[u,...m]),await Ta(l),console.log("â Created card:",u.id),u}catch(u){throw console.error("Failed to create card:",u),u}},async update(l,f){try{await Je.cards.update(l,f),a(u=>u.map(m=>m.id===l?{...m,...f}:m)),console.log("â Updated card:",l)}catch(u){throw console.error("Failed to update card:",u),u}},async delete(l,f){try{await Je.cards.delete(l),a(u=>u.filter(m=>m.id!==l)),await Ta(f),console.log("ðï¸ Deleted card:",l)}catch(u){throw console.error("Failed to delete card:",u),u}},async getById(l){try{return await Je.cards.get(l)}catch(f){throw console.error("Failed to get card:",f),f}},async markAsReviewed(l){try{const f=await Je.cards.get(l);if(!f)return;await Je.cards.update(l,{lastReviewedAt:Date.now(),reviewCount:(f.reviewCount||0)+1}),a(u=>u.map(m=>m.id===l?{...m,lastReviewedAt:Date.now(),reviewCount:(m.reviewCount||0)+1}:m)),console.log("ð Marked card as reviewed:",l)}catch(f){throw console.error("Failed to mark card as reviewed:",f),f}},clear(){n([])}}}async function Ta(r){try{const n=await Je.cards.where("collectionId").equals(r).count();await fr.updateCardCount(r,n)}catch(n){console.error("Failed to update collection card count:",n)}}const Er=dc();var vc=X('<div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10"><button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> ç·¨é</button> <button class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> åé¤</button></div>'),hc=X('<img alt="ã«ã¼ãã®ãµã ãã¤ã«" class="flex-shrink-0 w-16 h-16 object-cover rounded mr-3"/>'),pc=X('<div class="flex-shrink-0 w-8 h-8 bg-indigo-100 rounded flex items-center justify-center mr-3"><svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg></div>'),mc=X('<span class="inline-flex items-center mt-1 text-xs text-indigo-600"><svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg> è¤æ°è¡</span>'),gc=X('<span class="inline-flex items-center px-2 py-1 bg-green-100 text-green-700 text-xs rounded"><svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg> åç</span>'),yc=X('<span class="inline-flex items-center px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded"><svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path></svg> é³å£°</span>'),bc=X('<span class="flex items-center"><svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path></svg> </span>'),_c=X('<div class="bg-white rounded-lg border border-gray-200 hover:border-indigo-300 hover:shadow-md transition-all p-4 relative group"><div class="absolute top-3 right-3 menu-container"><button class="text-gray-400 hover:text-gray-600 p-1 rounded hover:bg-gray-100 opacity-0 group-hover:opacity-100 transition-opacity" aria-label="ã«ã¼ãã®æä½"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path></svg></button> <!></div> <div class="pr-8"><div class="flex items-start mb-2"><!> <div class="flex-1 min-w-0"><p class="text-sm text-gray-900 whitespace-pre-wrap break-words"> </p> <!></div></div> <div class="flex items-center gap-2 mt-3"><!> <!></div> <div class="flex items-center justify-between mt-3 pt-3 border-t border-gray-100"><div class="flex items-center gap-3 text-xs text-gray-500"><!> <span> </span></div></div></div></div>');function wc(r,n){Tt(n,!1);const a=re();let l=Me(n,"card",8),f=Me(n,"onEdit",8,null),u=Me(n,"onDelete",8,null),m=re(!1),h=re(null),g;function y(ie){ie!==g&&(v(h)&&URL.revokeObjectURL(v(h)),g=ie,R(h,ie?URL.createObjectURL(ie):null))}Ko(()=>{v(h)&&URL.revokeObjectURL(v(h))});function P(){R(m,!v(m))}function S(){R(m,!1),f()&&f()(l())}function A(){R(m,!1),u()&&u()(l())}function K(ie){v(m)&&!ie.target.closest(".menu-container")&&R(m,!1)}function T(ie){const Ee=ie.split(`
`).filter(Se=>Se.trim());if(Ee.length===0)return"ç©ºã®ã«ã¼ã";const ne=Ee.slice(0,2).join(`
`);return Vu(ne,150)}ut(()=>Xe(l()),()=>{y(l().imageBlob)}),ut(()=>Xe(l()),()=>{R(a,l().text.split(`
`).filter(ie=>ie.trim()).length>1)}),En(),qt();var V=_c();be("click",zn,K);var Z=M(V),le=M(Z),ve=F(le,2);{var we=ie=>{var Ee=vc(),ne=M(Ee),Se=F(ne,2);be("click",ne,S),be("click",Se,A),z(ie,Ee)};de(ve,ie=>{v(m)&&ie(we)})}var ce=F(Z,2),G=M(ce),oe=M(G);{var pe=ie=>{var Ee=hc();Be(()=>Yr(Ee,"src",v(h))),z(ie,Ee)},ue=ie=>{var Ee=pc();z(ie,Ee)};de(oe,ie=>{v(h)?ie(pe):ie(ue,!1)})}var je=F(oe,2),Ke=M(je),Ne=M(Ke),$e=F(Ke,2);{var J=ie=>{var Ee=mc();z(ie,Ee)};de($e,ie=>{v(a)&&ie(J)})}var xe=F(G,2),Re=M(xe);{var De=ie=>{var Ee=gc();z(ie,Ee)};de(Re,ie=>{Xe(l()),fe(()=>l().imageBlob)&&ie(De)})}var He=F(Re,2);{var We=ie=>{var Ee=yc();z(ie,Ee)};de(He,ie=>{Xe(l()),fe(()=>l().audioBlob)&&ie(We)})}var Ce=F(xe,2),qe=M(Ce),nt=M(qe);{var ae=ie=>{var Ee=bc(),ne=F(M(Ee));Be(()=>Oe(ne,` å¾©ç¿ ${Xe(l()),fe(()=>l().reviewCount)??""}å`)),z(ie,Ee)};de(nt,ie=>{Xe(l()),fe(()=>l().reviewCount>0)&&ie(ae)})}var ke=F(nt,2),Te=M(ke);Be((ie,Ee)=>{Oe(Ne,ie),Oe(Te,`ä½æï¼${Ee??""}`)},[()=>(Xe(l()),fe(()=>T(l().text))),()=>(Xe(_n),Xe(l()),fe(()=>_n(l().createdAt)))]),be("click",le,Io(P)),z(r,V),It()}var xc=X('<div class="space-y-3"></div>'),kc=X('<button class="inline-flex items-center px-6 py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors shadow-sm"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> æåã®ã«ã¼ããè¿½å </button>'),Ec=X('<div class="text-center py-16 bg-white rounded-lg border-2 border-dashed border-gray-300"><div class="inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4"><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg></div> <h3 class="text-xl font-semibold text-gray-900 mb-2">ã«ã¼ããããã¾ãã</h3> <p class="text-gray-600 mb-6 max-w-sm mx-auto">æåã®ãã©ãã·ã¥ã«ã¼ããè¿½å ãã¦ãã³ã¬ã¯ã·ã§ã³ãä½ãã¾ãããã</p> <!></div>'),Cc=X("<div><!></div>");function Sc(r,n){Tt(n,!1);let a=Me(n,"cards",24,()=>[]),l=Me(n,"onEdit",8,null),f=Me(n,"onDelete",8,null),u=Me(n,"onCreate",8,null);qt();var m=Cc(),h=M(m);{var g=P=>{var S=xc();Bs(S,5,a,A=>A.id,(A,K)=>{wc(A,{get card(){return v(K)},get onEdit(){return l()},get onDelete(){return f()}})}),z(P,S)},y=P=>{var S=Ec(),A=F(M(S),6);{var K=T=>{var V=kc();be("click",V,function(...Z){u()?.apply(this,Z)}),z(T,V)};de(A,T=>{u()&&T(K)})}z(P,S)};de(h,P=>{Xe(a()),fe(()=>a().length>0)?P(g):P(y,!1)})}z(r,m),It()}async function Ac(r,n=800,a=800,l=.8){return new Promise((f,u)=>{const m=new FileReader;m.onload=h=>{const g=new Image;g.onload=()=>{try{const y=document.createElement("canvas"),P=y.getContext("2d");let{width:S,height:A}=g;S>A?S>n&&(A=A*n/S,S=n):A>a&&(S=S*a/A,A=a),y.width=S,y.height=A,P.drawImage(g,0,0,S,A),y.toBlob(K=>{K?(console.log(`â Image compressed: ${(r.size/1024).toFixed(1)}KB â ${(K.size/1024).toFixed(1)}KB`),f(K)):y.toBlob(T=>{T?(console.log(`â Image compressed (JPEG): ${(r.size/1024).toFixed(1)}KB â ${(T.size/1024).toFixed(1)}KB`),f(T)):u(new Error("Failed to compress image"))},"image/jpeg",l)},"image/webp",l)}catch(y){u(y)}},g.onerror=()=>{u(new Error("Failed to load image"))},g.src=h.target.result},m.onerror=()=>{u(new Error("Failed to read file"))},m.readAsDataURL(r)})}function Oc(r){return r&&["image/jpeg","image/png","image/gif","image/webp"].includes(r.type)}function Bc(r){return new Promise((n,a)=>{const l=new FileReader;l.onload=()=>{n(l.result)},l.onerror=()=>{a(new Error("Failed to read blob"))},l.readAsDataURL(r)})}var Pc=X('<div class="absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center"><div class="text-white text-center"><svg class="animate-spin h-8 w-8 mx-auto mb-2" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="text-sm">å§ç¸®ä¸­...</p></div></div>'),Dc=X('<div class="relative"><img alt="é¸ææ¸ã¿" class="w-full h-48 object-cover rounded-lg border border-gray-300"/> <button type="button" class="absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg shadow-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed" title="åçãåé¤"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button> <!></div>'),Mc=X('<svg class="animate-spin h-8 w-8 text-indigo-600 mb-2" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="text-sm text-gray-600">ç»åãå§ç¸®ä¸­...</p>',1),jc=X('<svg class="w-12 h-12 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <p class="text-sm font-medium text-gray-700 mb-1">åçãè¿½å </p> <p class="text-xs text-gray-500">ã¯ãªãã¯ãã¦ã¢ããã­ã¼ãã¾ãã¯æ®å½±</p> <p class="text-xs text-gray-400 mt-1">JPEGãPNGãGIFãã¾ãã¯WebPï¼æå¤§10MBï¼</p>',1),Rc=X('<button type="button" class="w-full flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-indigo-500 hover:bg-indigo-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><!></button>'),Tc=X('<div class="p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm flex items-start"><svg class="w-5 h-5 mr-2 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> <span> </span></div>'),Ic=X('<div class="space-y-3"><input type="file" accept="image/jpeg,image/png,image/gif,image/webp" capture="environment" class="hidden"/> <!> <!></div>');function Kc(r,n){Tt(n,!1);let a=Me(n,"imageBlob",8,null),l=Me(n,"disabled",8,!1);const f=An();let u=re(),m=re(!1),h=re(null),g=re(null);async function y(){if(a())try{R(h,await Bc(a()))}catch(G){console.error("Failed to create preview:",G)}}async function P(G){const oe=G.target.files?.[0];oe&&(await S(oe),v(u)&&Bt(u,v(u).value=""))}async function S(G){if(R(g,null),!Oc(G)){R(g,"æå¹ãªç»åãã¡ã¤ã«ï¼JPEGãPNGãGIFãã¾ãã¯WebPï¼ãé¸æãã¦ãã ãã");return}if(G.size>10*1024*1024){R(g,"ç»åã®ãµã¤ãºãå¤§ãããã¾ãï¼æå¤§10MBï¼");return}R(m,!0);try{const oe=await Ac(G);oe.size>500*1024&&console.warn("Compressed image is larger than 500KB:",(oe.size/1024).toFixed(1)+"KB"),f("change",oe)}catch(oe){console.error("Failed to compress image:",oe),R(g,"ç»åã®å§ç¸®ã«å¤±æãã¾ãããå¥ã®ç»åããè©¦ããã ããã")}finally{R(m,!1)}}function A(){f("change",null),R(g,null)}function K(){v(u)&&!l()&&v(u).click()}ut(()=>Xe(a()),()=>{a()?y():R(h,null)}),En(),qt();var T=Ic(),V=M(T);Bi(V,G=>R(u,G),()=>v(u));var Z=F(V,2);{var le=G=>{var oe=Dc(),pe=M(oe),ue=F(pe,2),je=F(ue,2);{var Ke=Ne=>{var $e=Pc();z(Ne,$e)};de(je,Ne=>{v(m)&&Ne(Ke)})}Be(()=>{Yr(pe,"src",v(h)),ue.disabled=l()||v(m)}),be("click",ue,A),z(G,oe)},ve=G=>{var oe=Rc(),pe=M(oe);{var ue=Ke=>{var Ne=Mc();z(Ke,Ne)},je=Ke=>{var Ne=jc();z(Ke,Ne)};de(pe,Ke=>{v(m)?Ke(ue):Ke(je,!1)})}Be(()=>oe.disabled=l()||v(m)),be("click",oe,K),z(G,oe)};de(Z,G=>{v(h)?G(le):G(ve,!1)})}var we=F(Z,2);{var ce=G=>{var oe=Tc(),pe=F(M(oe),2),ue=M(pe);Be(()=>Oe(ue,v(g))),z(G,oe)};de(we,G=>{v(g)&&G(ce)})}Be(()=>V.disabled=l()),be("change",V,P),z(r,T),It()}let Fc=class{constructor(){this.mediaRecorder=null,this.audioChunks=[],this.stream=null,this.startTime=null,this.duration=0}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:24e3,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});const n=this.getSupportedMimeType();if(!n)throw new Error("No supported audio format found");this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:n,audioBitsPerSecond:32e3}),this.audioChunks=[],this.mediaRecorder.ondataavailable=a=>{a.data.size>0&&this.audioChunks.push(a.data)},this.mediaRecorder.start(),this.startTime=Date.now(),console.log("â Recording started:",n)}catch(n){throw console.error("Failed to start recording:",n),this.cleanup(),n}}async stop(){return new Promise((n,a)=>{if(!this.mediaRecorder||this.mediaRecorder.state==="inactive"){a(new Error("No active recording"));return}this.mediaRecorder.onstop=()=>{try{this.duration=Date.now()-this.startTime;const l=this.mediaRecorder.mimeType,f=new Blob(this.audioChunks,{type:l});console.log(`â Recording stopped: ${(f.size/1024).toFixed(1)}KB, ${(this.duration/1e3).toFixed(1)}s`),this.cleanup(),n(f)}catch(l){a(l)}},this.mediaRecorder.onerror=l=>{console.error("MediaRecorder error:",l),this.cleanup(),a(l)},this.mediaRecorder.stop()})}getSupportedMimeType(){const n=["audio/webm;codecs=opus","audio/webm","audio/ogg;codecs=opus","audio/mp4","audio/mpeg"];for(const a of n)if(MediaRecorder.isTypeSupported(a))return a;return null}isRecording(){return this.mediaRecorder&&this.mediaRecorder.state==="recording"}getDuration(){return this.isRecording()?Date.now()-this.startTime:this.duration}cleanup(){this.stream&&(this.stream.getTracks().forEach(n=>n.stop()),this.stream=null),this.mediaRecorder=null,this.audioChunks=[]}};function Lc(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&typeof MediaRecorder<"u")}function Ia(r){const n=Math.floor(r/1e3),a=Math.floor(n/60),l=n%60;return`${a}:${l.toString().padStart(2,"0")}`}function Ka(r){return URL.createObjectURL(r)}var Nc=X('<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-800 text-sm"><p class="font-medium mb-1">é³å£°é²é³éå¯¾å¿</p> <p>ãä½¿ãã®ãã©ã¦ã¶ã¯é³å£°é²é³ã«å¯¾å¿ãã¦ãã¾ãããChromeãFirefoxãSafariãªã©ã®ææ°ãã©ã¦ã¶ããä½¿ããã ããã</p></div>'),qc=wt('<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>'),zc=wt('<svg class="w-5 h-5 ml-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>'),Uc=X('<div class="p-4 bg-gray-50 rounded-lg border border-gray-300"><div class="flex items-center justify-between mb-3"><div class="flex items-center text-sm text-gray-700"><svg class="w-5 h-5 text-purple-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path></svg> <span class="font-medium">é³å£°é²é³æ¸ã¿</span></div> <button type="button" class="text-red-600 hover:text-red-700 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed">åé¤</button></div> <audio class="hidden"></audio> <div class="flex items-center gap-3"><button type="button" class="flex-shrink-0 w-10 h-10 bg-purple-600 hover:bg-purple-700 text-white rounded-full flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors"><!></button> <div class="flex-1 text-sm text-gray-600"><p>åçãã¿ã³ãã¯ãªãã¯ãã¦é²é³ãç¢ºèª</p></div></div></div>'),Vc=X('<div class="p-6 bg-red-50 border-2 border-red-300 rounded-lg"><div class="flex flex-col items-center"><div class="relative mb-4"><div class="w-16 h-16 bg-red-600 rounded-full animate-pulse flex items-center justify-center"><svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd"></path></svg></div></div> <div class="text-3xl font-bold text-red-900 mb-2 font-mono"> </div> <p class="text-sm text-red-700 mb-4">é²é³ä¸­...</p> <button type="button" class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors">é²é³ãåæ­¢</button></div></div>'),$c=X('<button type="button" class="w-full flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><svg class="w-12 h-12 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg> <p class="text-sm font-medium text-gray-700 mb-1">é³å£°ãé²é³</p> <p class="text-xs text-gray-500">ã¯ãªãã¯ãã¦é²é³ãéå§</p></button>'),Hc=X('<div class="p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm flex items-start"><svg class="w-5 h-5 mr-2 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> <span> </span></div>'),Wc=X('<div class="space-y-3"><!> <!></div>');function Yc(r,n){Tt(n,!1);let a=Me(n,"audioBlob",8,null),l=Me(n,"disabled",8,!1);const f=An();let u=null,m=re(!1),h=re(0),g=null,y=re(null),P=re(null),S=re(),A=re(!1);const K=Lc();Ko(()=>{V(),v(y)&&URL.revokeObjectURL(v(y))});async function T(){if(R(P,null),!K){R(P,"ãã®ãã©ã¦ã¶ã§ã¯é³å£°é²é³ããµãã¼ãããã¦ãã¾ãã");return}try{u=new Fc,await u.start(),R(m,!0),R(h,0),g=setInterval(()=>{u&&R(h,u.getDuration())},100)}catch(J){console.error("Failed to start recording:",J),J.name==="NotAllowedError"||J.name==="PermissionDeniedError"?R(P,"ãã¤ã¯ã¸ã®ã¢ã¯ã»ã¹ãæå¦ããã¾ããããã¤ã¯ã¸ã®ã¢ã¯ã»ã¹ãè¨±å¯ãã¦ãããä¸åº¦ãè©¦ããã ããã"):J.name==="NotFoundError"?R(P,"ãã¤ã¯ãè¦ã¤ããã¾ããããã¤ã¯ãæ¥ç¶ãã¦ãããä¸åº¦ãè©¦ããã ããã"):R(P,"é²é³ã®éå§ã«å¤±æãã¾ãããããä¸åº¦ãè©¦ããã ããã"),R(m,!1),u&&(u.cleanup(),u=null)}}async function V(){if(u){try{const J=await u.stop();g&&(clearInterval(g),g=null),R(m,!1),f("change",J)}catch(J){console.error("Failed to stop recording:",J),R(P,"é²é³ã®ä¿å­ã«å¤±æãã¾ãããããä¸åº¦ãè©¦ããã ããã"),R(m,!1)}u=null}}function Z(){v(y)&&(URL.revokeObjectURL(v(y)),R(y,null)),f("change",null),R(P,null),R(A,!1)}function le(){v(S)&&(v(A)?v(S).pause():v(S).play())}function ve(){R(A,!0)}function we(){R(A,!1)}function ce(){R(A,!1)}ut(()=>(Xe(a()),v(y),Ka),()=>{a()&&(v(y)&&URL.revokeObjectURL(v(y)),R(y,Ka(a())))}),En(),qt();var G=Wc(),oe=M(G);{var pe=J=>{var xe=Nc();z(J,xe)},ue=J=>{var xe=Uc(),Re=M(xe),De=F(M(Re),2),He=F(Re,2);Bi(He,ke=>R(S,ke),()=>v(S));var We=F(He,2),Ce=M(We),qe=M(Ce);{var nt=ke=>{var Te=qc();z(ke,Te)},ae=ke=>{var Te=zc();z(ke,Te)};de(qe,ke=>{v(A)?ke(nt):ke(ae,!1)})}Be(()=>{De.disabled=l(),Yr(He,"src",v(y)),Ce.disabled=l()}),be("click",De,Z),be("play",He,ve),be("pause",He,we),be("ended",He,ce),be("click",Ce,le),z(J,xe)},je=J=>{var xe=Vc(),Re=M(xe),De=F(M(Re),2),He=M(De),We=F(De,4);Be(Ce=>Oe(He,Ce),[()=>(Xe(Ia),v(h),fe(()=>Ia(v(h))))]),be("click",We,V),z(J,xe)},Ke=J=>{var xe=$c();Be(()=>xe.disabled=l()),be("click",xe,T),z(J,xe)};de(oe,J=>{K?v(y)?J(ue,1):v(m)?J(je,2):J(Ke,!1):J(pe)})}var Ne=F(oe,2);{var $e=J=>{var xe=Hc(),Re=F(M(xe),2),De=M(Re);Be(()=>Oe(De,v(P))),z(J,xe)};de(Ne,J=>{v(P)&&J($e)})}z(r,G),It()}var Gc=X('<div class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm"> </div>'),Xc=X('<p class="text-sm text-red-600"> </p>'),Jc=X('<p class="text-xs text-gray-500">ð¡ ãã³ãï¼è¤æ°è¡ãä½¿ã£ã¦è³ªåã¨ç­ããåãããã¨ãã§ãã¾ã</p>'),Qc=wt('<svg class="animate-spin h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ä¿å­ä¸­...',1),Zc=X('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center p-4 z-50 overflow-y-auto" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[85dvh] overflow-y-auto my-auto"><div class="flex items-center justify-between p-6 border-b border-gray-200"><h2 id="modal-title" class="text-2xl font-semibold text-gray-900"> </h2> <button class="p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors" aria-label="éãã"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="p-6"><!> <div class="mb-6"><label for="card-text" class="block text-sm font-medium text-gray-700 mb-2">ã«ã¼ãã®åå®¹ <span class="text-red-500">*</span></label> <textarea id="card-text" placeholder="ã«ã¼ãã®åå®¹ãå¥åï¼ä¾ï¼1è¡ç®ã«è³ªåã2è¡ç®ã«ç­ãï¼  ä¾ï¼ ãã©ã³ã¹ã®é¦é½ã¯ã©ãã§ããï¼ ããª" maxlength="5000" rows="10"></textarea> <div class="flex items-center justify-between mt-1"><!> <p class="text-xs text-gray-400"> </p></div></div> <div class="mb-6"><label class="block text-sm font-medium text-gray-700 mb-2">åç <span class="text-gray-400 text-xs">ï¼ä»»æï¼</span></label> <!></div> <div class="mb-6"><label class="block text-sm font-medium text-gray-700 mb-2">é³å£° <span class="text-gray-400 text-xs">ï¼ä»»æï¼</span></label> <!></div> <div class="flex gap-3"><button type="button" class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">ã­ã£ã³ã»ã«</button> <button type="submit" class="flex-1 px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"><!></button></div></form></div></div>');function ef(r,n){Tt(n,!1);const a=re(),l=re(),f=re();let u=Me(n,"card",8,null),m=Me(n,"isOpen",8,!1);const h=An();let g=re(u()?.text||""),y=re(u()?.imageBlob||null),P=re(u()?.audioBlob||null),S=re(!1),A=re({});function K(){u()||(R(g,""),R(y,null),R(P,null)),R(A,{}),R(S,!1)}function T(ue){R(y,ue.detail)}function V(ue){R(P,ue.detail)}function Z(){return R(A,{}),v(g).trim()?v(g).trim().length>5e3&&Bt(A,v(A).text="ã«ã¼ãã®ãã­ã¹ãã¯5000æå­ä»¥åã§å¥åãã¦ãã ãã"):Bt(A,v(A).text="ã«ã¼ãã®ãã­ã¹ãã¯å¿é ã§ã"),Object.keys(v(A)).length===0}async function le(){if(Z()){R(S,!0);try{const ue={text:v(g).trim(),imageBlob:v(y),audioBlob:v(P)};v(a)?h("update",{id:u().id,...ue}):h("create",ue),ve()}catch(ue){console.error("Failed to submit:",ue),Bt(A,v(A).general="ã«ã¼ãã®ä¿å­ã«å¤±æãã¾ãããããä¸åº¦ãè©¦ããã ããã")}finally{R(S,!1)}}}function ve(){h("close"),K()}function we(ue){ue.target===ue.currentTarget&&ve()}function ce(ue){ue.key==="Escape"&&ve()}ut(()=>Xe(u()),()=>{u()&&(R(g,u().text||""),R(y,u().imageBlob||null),R(P,u().audioBlob||null))}),ut(()=>Xe(m()),()=>{m()||K()}),ut(()=>Xe(u()),()=>{R(a,u()!==null)}),ut(()=>v(a),()=>{R(l,v(a)?"ã«ã¼ããç·¨é":"æ°ããã«ã¼ã")}),ut(()=>v(a),()=>{R(f,v(a)?"å¤æ´ãä¿å­":"ã«ã¼ããè¿½å ")}),En(),qt();var G=To(),oe=Br(G);{var pe=ue=>{var je=Zc(),Ke=M(je),Ne=M(Ke),$e=M(Ne),J=M($e),xe=F($e,2),Re=F(Ne,2),De=M(Re);{var He=L=>{var he=Gc(),ye=M(he);Be(()=>Oe(ye,(v(A),fe(()=>v(A).general)))),z(L,he)};de(De,L=>{v(A),fe(()=>v(A).general)&&L(He)})}var We=F(De,2),Ce=F(M(We),2);let qe;var nt=F(Ce,2),ae=M(nt);{var ke=L=>{var he=Xc(),ye=M(he);Be(()=>Oe(ye,(v(A),fe(()=>v(A).text)))),z(L,he)},Te=L=>{var he=Jc();z(L,he)};de(ae,L=>{v(A),fe(()=>v(A).text)?L(ke):L(Te,!1)})}var ie=F(ae,2),Ee=M(ie),ne=F(We,2),Se=F(M(ne),2);Kc(Se,{get imageBlob(){return v(y)},get disabled(){return v(S)},$$events:{change:T}});var ht=F(ne,2),W=F(M(ht),2);Yc(W,{get audioBlob(){return v(P)},get disabled(){return v(S)},$$events:{change:V}});var Qe=F(ht,2),me=M(Qe),ft=F(me,2),Kt=M(ft);{var gt=L=>{var he=Qc();z(L,he)},ge=L=>{var he=As();Be(()=>Oe(he,v(f))),z(L,he)};de(Kt,L=>{v(S)?L(gt):L(ge,!1)})}Be(()=>{Oe(J,v(l)),qe=Dr(Ce,1,"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-colors resize-y font-mono text-base",null,qe,{"border-red-500":v(A).text}),Ce.disabled=v(S),Oe(Ee,`${v(g),fe(()=>v(g).length)??""}/5000`),me.disabled=v(S),ft.disabled=v(S)}),be("click",xe,ve),ko(Ce,()=>v(g),L=>R(g,L)),be("click",me,ve),be("submit",Re,Ps(le)),be("click",je,we),be("keydown",je,ce),z(ue,je)};de(oe,ue=>{m()&&ue(pe)})}z(r,G),It()}var tf=X('<div class="flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div>'),rf=X('<div class="flex-shrink-0 w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3"><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>'),nf=X('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="dialog-title" tabindex="-1"><div class="bg-white rounded-lg shadow-xl max-w-md w-full"><div class="p-6 border-b border-gray-200"><div class="flex items-center"><!> <h2 id="dialog-title" class="text-xl font-semibold text-gray-900"> </h2></div></div> <div class="p-6"><p class="text-gray-600"> </p></div> <div class="p-6 pt-0 flex gap-3"><button type="button" class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors"> </button> <button type="button"> </button></div></div></div>');function js(r,n){Tt(n,!1);let a=Me(n,"isOpen",8,!1),l=Me(n,"title",8,"Confirm"),f=Me(n,"message",8,"Are you sure?"),u=Me(n,"confirmLabel",8,"Confirm"),m=Me(n,"cancelLabel",8,"Cancel"),h=Me(n,"isDanger",8,!1);const g=An();function y(){g("confirm"),P()}function P(){g("cancel")}function S(Z){Z.target===Z.currentTarget&&P()}function A(Z){Z.key==="Escape"&&P()}qt();var K=To(),T=Br(K);{var V=Z=>{var le=nf(),ve=M(le),we=M(ve),ce=M(we),G=M(ce);{var oe=Ce=>{var qe=tf();z(Ce,qe)},pe=Ce=>{var qe=rf();z(Ce,qe)};de(G,Ce=>{h()?Ce(oe):Ce(pe,!1)})}var ue=F(G,2),je=M(ue),Ke=F(we,2),Ne=M(Ke),$e=M(Ne),J=F(Ke,2),xe=M(J),Re=M(xe),De=F(xe,2);let He;var We=M(De);Be(()=>{Oe(je,l()),Oe($e,f()),Oe(Re,m()),He=Dr(De,1,"flex-1 px-4 py-2 font-medium rounded-lg transition-colors",null,He,{"bg-red-600":h(),"hover:bg-red-700":h(),"bg-indigo-600":!h(),"hover:bg-indigo-700":!h(),"text-white":!0}),Oe(We,u())}),be("click",xe,P),be("click",De,y),be("click",le,S),be("keydown",le,A),z(Z,le)};de(T,Z=>{a()&&Z(V)})}z(r,K),It()}const of=100;async function Rs(){if(typeof window>"u")return;const r=document.querySelector('meta[name="viewport"]');if(!r)return;const n=r.getAttribute("content");r.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),window.scrollTo(0,0),await new Promise(a=>{requestAnimationFrame(()=>setTimeout(a,of))}),r.setAttribute("content",n)}var af=X('<div class="mb-6"><img alt="" class="max-w-full max-h-64 mx-auto rounded-lg shadow-lg object-contain"/></div>'),sf=X('<div class="text-gray-500 text-sm mb-4 uppercase tracking-wide">è³ªå</div> <p class="text-xl sm:text-3xl text-gray-900 whitespace-pre-wrap leading-relaxed"> </p> <div class="mt-8 text-indigo-600 text-sm"><svg class="w-5 h-5 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path></svg> ã¯ãªãã¯ã¾ãã¯ã¹ãã¼ã¹ã­ã¼ã§ç­ããè¡¨ç¤º</div>',1),lf=X('<div class="text-gray-500 text-sm mb-4 uppercase tracking-wide">ç­ã</div> <p class="text-xl sm:text-3xl text-gray-900 whitespace-pre-wrap leading-relaxed"> </p> <div class="mt-8 text-green-600 text-sm"><svg class="w-5 h-5 inline-block mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> ã¯ãªãã¯ã¾ãã¯ã¹ãã¼ã¹ã­ã¼ã§è³ªåã«æ»ã</div>',1),uf=X('<div class="text-center w-full"><!></div>'),cf=X('<div class="text-center w-full"><p class="text-xl sm:text-3xl text-gray-900 whitespace-pre-wrap leading-relaxed"> </p></div>'),ff=X('<div class="relative"><div class="bg-white rounded-2xl shadow-2xl p-6 sm:p-12 min-h-[200px] sm:min-h-[400px] flex flex-col items-center justify-center cursor-pointer active:scale-[0.98] transition-transform touch-manipulation" role="button" tabindex="0"><!> <!></div> <div class="absolute -top-4 left-1/2 -translate-x-1/2 bg-indigo-600 text-white px-4 py-2 rounded-full text-sm font-medium shadow-lg"> </div></div>'),df=X('<span class="absolute inset-0 rounded-full bg-indigo-400 opacity-75 animate-ping" aria-hidden="true"></span>'),vf=wt('<svg class="w-6 h-6 relative z-10" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><rect x="6" y="6" width="12" height="12" rx="1"></rect></svg>'),hf=wt('<svg class="w-6 h-6 relative z-10" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg>'),pf=X('<div class="mt-6 flex justify-center" role="none"><button class="relative flex items-center justify-center w-14 h-14 rounded-full bg-indigo-500 hover:bg-indigo-400 active:bg-indigo-600 text-white shadow-lg transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-indigo-900"><!> <!></button></div>'),mf=X('<audio class="hidden"></audio> <!> <!>',1),gf=X('<div class="text-center text-white"><p class="text-xl">å­¦ç¿ããã«ã¼ããããã¾ãã</p></div>'),yf=X('<div class="fixed inset-0 bg-gradient-to-br from-indigo-900 to-purple-900 z-50 flex flex-col"><header class="bg-black bg-opacity-30 backdrop-blur-sm border-b border-white border-opacity-10"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><button class="p-2 text-white hover:bg-white hover:bg-opacity-10 rounded-lg transition-colors" aria-label="å­¦ç¿ã¢ã¼ããçµäº"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <div class="text-white"><h1 class="text-lg font-semibold"> </h1> <p class="text-sm text-indigo-200">å­¦ç¿ã¢ã¼ã</p></div></div> <div class="text-white text-right"><div class="text-2xl font-bold"> </div> <div class="text-sm text-indigo-200">æ</div></div></div></div></header> <div class="flex-1 flex items-center justify-center p-8"><div class="max-w-4xl w-full"><!></div></div> <div class="py-3 text-center"><div class="keyboard-hints text-white text-xs opacity-60 svelte-q1k6k"><span>ç¢å°ã­ã¼ã§ç§»å</span> <span class="mx-3">Â·</span> <span>ã¹ãã¼ã¹ / Enter ã§ããã</span> <span class="mx-3">Â·</span> <span>Esc ã§çµäº</span></div> <div class="touch-hints text-indigo-200 text-xs opacity-70 svelte-q1k6k">å·¦å³ã¹ã¯ã¤ãã§ç§»å Â· ã¿ããã§ããã</div></div></div>');function bf(r,n){Tt(n,!1);const a=()=>Pi(Er,"$cards",l),[l,f]=Di(),u=re(),m=re(),h=re(),g=re(),y=re(),P=re();Me(n,"collectionId",8);let S=Me(n,"collectionName",8,""),A=Me(n,"onExit",8),K=re(0),T=re([]),V=new Set,Z=re(!0),le=re(null),ve=re(null);const we=new Map;let ce=re(),G=re(!1),oe=!1;function pe(L){v(ce)&&(oe||(v(ce).addEventListener("play",()=>{R(G,!0)}),v(ce).addEventListener("pause",()=>{R(G,!1)}),v(ce).addEventListener("ended",()=>{R(G,!1)}),oe=!0),v(ce).pause(),L&&(Bt(ce,v(ce).src=L),v(ce).load()))}function ue(){!v(ce)||!v(ve)||(Bt(ce,v(ce).currentTime=0),v(ce).play().catch(()=>{}))}function je(L){if(!L){R(le,null),R(ve,null),pe(null);return}if(!we.has(L.id)){let ye=null,Pe=null;try{L.imageBlob instanceof Blob&&L.imageBlob.size>0&&(ye=URL.createObjectURL(L.imageBlob))}catch(Ve){console.warn("Failed to create image URL for card",L.id,Ve)}try{L.audioBlob instanceof Blob&&L.audioBlob.size>0&&(Pe=URL.createObjectURL(L.audioBlob))}catch(Ve){console.warn("Failed to create audio URL for card",L.id,Ve)}we.set(L.id,{imageUrl:ye,audioUrl:Pe})}const he=we.get(L.id);R(le,he.imageUrl),R(ve,he.audioUrl),pe(he.audioUrl)}Mi(async()=>{R(T,[...a()]),v(T).length===0&&A()()}),Ko(()=>{for(const{imageUrl:L,audioUrl:he}of we.values())L&&URL.revokeObjectURL(L),he&&URL.revokeObjectURL(he);we.clear(),Rs()});function Ke(L){!L||V.has(L.id)||(V.add(L.id),Er.markAsReviewed(L.id))}function Ne(){v(h)&&(_a(K,-1),R(Z,!0))}function $e(){v(g)&&(_a(K),R(Z,!0))}function J(){R(Z,!v(Z))}function xe(L){switch(L.key){case"ArrowLeft":L.preventDefault(),Ne();break;case"ArrowRight":L.preventDefault(),$e();break;case" ":case"Enter":L.preventDefault(),J();break;case"Escape":L.preventDefault(),A()();break}}function Re(){A()()}function De(L){const he=L.split(`
`).filter(Pe=>Pe.trim());if(he.length<=1)return{front:L,back:null};const ye=Math.ceil(he.length/2);return{front:he.slice(0,ye).join(`
`),back:he.slice(ye).join(`
`)}}let He=0;function We(L){He=L.changedTouches[0].clientX}function Ce(L){L.preventDefault();const he=L.changedTouches[0].clientX-He,ye=50;he>ye?Ne():he<-ye?$e():J()}ut(()=>(v(T),v(K)),()=>{R(u,v(T)[v(K)])}),ut(()=>(v(T),v(K)),()=>{R(m,v(T).length>0?`${v(K)+1} / ${v(T).length}`:"0 / 0")}),ut(()=>v(K),()=>{R(h,v(K)>0)}),ut(()=>(v(K),v(T)),()=>{R(g,v(K)<v(T).length-1)}),ut(()=>v(u),()=>{je(v(u))}),ut(()=>v(u),()=>{Ke(v(u))}),ut(()=>v(u),()=>{R(y,v(u)&&v(u).text.split(`
`).filter(L=>L.trim()).length>1)}),ut(()=>v(u),()=>{R(P,v(u)?De(v(u).text):{front:"",back:null})}),En(),qt();var qe=yf();be("keydown",zn,xe);var nt=M(qe),ae=M(nt),ke=M(ae),Te=M(ke),ie=M(Te),Ee=F(ie,2),ne=M(Ee),Se=M(ne),ht=F(Te,2),W=M(ht),Qe=M(W),me=F(nt,2),ft=M(me),Kt=M(ft);{var gt=L=>{var he=mf(),ye=Br(he);Bi(ye,ot=>R(ce,ot),()=>v(ce));var Pe=F(ye,2);_u(Pe,()=>(v(u),fe(()=>v(u).id)),ot=>{var at=ff(),st=M(at),Ze=M(st);{var At=yt=>{var zt=af(),Pt=M(zt);Be(()=>Yr(Pt,"src",v(le))),z(yt,zt)};de(Ze,yt=>{v(le)&&yt(At)})}var Mr=F(Ze,2);{var ar=yt=>{var zt=uf(),Pt=M(zt);{var se=Dt=>{var er=sf(),Y=F(Br(er),2),Tr=M(Y);Be(()=>Oe(Tr,(v(P),fe(()=>v(P).front)))),z(Dt,er)},Rr=Dt=>{var er=lf(),Y=F(Br(er),2),Tr=M(Y);Be(()=>Oe(Tr,(v(P),fe(()=>v(P).back)))),z(Dt,er)};de(Pt,Dt=>{v(Z)?Dt(se):Dt(Rr,!1)})}z(yt,zt)},jr=yt=>{var zt=cf(),Pt=M(zt),se=M(Pt);Be(()=>Oe(se,(v(u),fe(()=>v(u).text)))),z(yt,zt)};de(Mr,yt=>{v(y),v(P),fe(()=>v(y)&&v(P).back)?yt(ar):yt(jr,!1)})}var pt=F(st,2),Ot=M(pt);Be(()=>Oe(Ot,`ã«ã¼ã ${v(K)+1}`)),be("click",st,J),be("touchstart",st,We),be("touchend",st,Ce),be("keydown",st,yt=>(yt.key==="Enter"||yt.key===" ")&&J()),z(ot,at)});var Ve=F(Pe,2);{var St=ot=>{var at=pf(),st=M(at),Ze=M(st);{var At=pt=>{var Ot=df();z(pt,Ot)};de(Ze,pt=>{v(G)&&pt(At)})}var Mr=F(Ze,2);{var ar=pt=>{var Ot=vf();z(pt,Ot)},jr=pt=>{var Ot=hf();z(pt,Ot)};de(Mr,pt=>{v(G)?pt(ar):pt(jr,!1)})}Be(()=>Yr(st,"aria-label",v(G)?"é³å£°ãåæ­¢":"é³å£°ãåç")),be("click",st,ue),be("click",at,Io(function(pt){Pu.call(this,n,pt)})),z(ot,at)};de(Ve,ot=>{v(ve)&&ot(St)})}z(L,he)},ge=L=>{var he=gf();z(L,he)};de(Kt,L=>{v(u)?L(gt):L(ge,!1)})}Be(()=>{Oe(Se,S()),Oe(Qe,v(m))}),be("click",ie,Re),z(r,qe),It(),f()}const _i="1.0";async function wi(r){return new Promise((n,a)=>{const l=new FileReader;l.onloadend=()=>{n({type:r.type,data:l.result})},l.onerror=()=>{a(new Error("Failed to read blob"))},l.readAsDataURL(r)})}function Fa(r){if(!r||!r.data)return null;try{const{type:n,data:a}=r,l=atob(a.split(",")[1]),f=new ArrayBuffer(l.length),u=new Uint8Array(f);for(let m=0;m<l.length;m++)u[m]=l.charCodeAt(m);return new Blob([f],{type:n})}catch(n){return console.error("Failed to convert base64 to blob:",n),null}}async function _f(r){try{const n=await Je.collections.get(r);if(!n)throw new Error("Collection not found");const a=await Je.cards.where("collectionId").equals(r).toArray();console.log(`ð¦ Exporting collection "${n.name}" with ${a.length} cards...`);const l=await Promise.all(a.map(async h=>({...h,imageBlob:h.imageBlob?await wi(h.imageBlob):null,audioBlob:h.audioBlob?await wi(h.audioBlob):null}))),f={version:_i,exportDate:new Date().toISOString(),collections:[{...n,cards:l}]},u=new Date().toISOString().split("T")[0],m=`${n.name.replace(/[^a-z0-9]/gi,"_")}_${u}.json`;Ts(f,m),console.log("â Export completed")}catch(n){throw console.error("Failed to export collection:",n),n}}async function wf(){try{const r=await Je.collections.toArray();if(r.length===0)throw new Error("No collections to export");console.log(`ð¦ Exporting all ${r.length} collections...`);const n=await Promise.all(r.map(async u=>{const m=await Je.cards.where("collectionId").equals(u.id).toArray(),h=await Promise.all(m.map(async g=>({...g,imageBlob:g.imageBlob?await wi(g.imageBlob):null,audioBlob:g.audioBlob?await wi(g.audioBlob):null})));return{...u,cards:h}})),a={version:_i,exportDate:new Date().toISOString(),collections:n},f=`memoria_backup_${new Date().toISOString().split("T")[0]}.json`;Ts(a,f),console.log("â Export completed")}catch(r){throw console.error("Failed to export all collections:",r),r}}async function xf(r,n="merge"){try{const a=await r.text(),l=JSON.parse(a);if(!l.version||!l.collections||!Array.isArray(l.collections))throw new Error("Invalid export file format");l.version!==_i&&console.warn(`Export version mismatch: ${l.version} vs ${_i}`),console.log(`ð¥ Importing ${l.collections.length} collection(s) with strategy: ${n}`);let f=0,u=0,m=0;for(const g of l.collections){const{cards:y,...P}=g;if(await Je.collections.get(g.id))if(n==="merge"){u++,console.log(`â­ï¸ Skipped existing collection: ${g.name}`);continue}else n==="replace"&&(await Je.cards.where("collectionId").equals(g.id).delete(),m++,console.log(`ð Replaced collection: ${g.name}`));else f++;if(await Je.collections.put(P),y&&Array.isArray(y))for(const A of y){const K={...A,imageBlob:A.imageBlob?Fa(A.imageBlob):null,audioBlob:A.audioBlob?Fa(A.audioBlob):null};await Je.cards.put(K)}}const h={imported:f,skipped:u,updated:m,total:l.collections.length};return console.log("â Import completed:",h),h}catch(a){throw console.error("Failed to import collections:",a),a}}function Ts(r,n){const a=JSON.stringify(r,null,2),l=new Blob([a],{type:"application/json"}),f=URL.createObjectURL(l),u=document.createElement("a");u.href=f,u.download=n,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(f)}async function kf(r){try{const n=await r.text(),a=JSON.parse(n);return a.version?!a.collections||!Array.isArray(a.collections)?{valid:!1,error:"Missing or invalid collections field"}:a.collections.length===0?{valid:!1,error:"No collections in file"}:{valid:!0,version:a.version,collectionsCount:a.collections.length,exportDate:a.exportDate}:{valid:!1,error:"Missing version field"}}catch(n){return{valid:!1,error:n.message||"Invalid JSON file"}}}var Ef=X('<p class="text-sm text-gray-600 mt-1 line-clamp-1"> </p>'),Cf=X('<div class="min-w-0"><h1 class="text-2xl font-bold text-gray-900 truncate"> </h1> <!></div>'),Sf=wt('<svg class="animate-spin h-5 w-5 sm:mr-2" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Af=wt('<svg class="w-5 h-5 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>'),Of=X('<div class="flex flex-wrap gap-2"><button class="inline-flex items-center min-h-[44px] px-3 py-2 text-gray-700 hover:bg-gray-100 font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed" aria-label="ã³ã¬ã¯ã·ã§ã³ãã¨ã¯ã¹ãã¼ã"><!> <span class="hidden sm:inline">ã¨ã¯ã¹ãã¼ã</span></button> <button class="inline-flex items-center min-h-[44px] px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors shadow-sm" aria-label="å­¦ç¿ãã"><svg class="w-5 h-5 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> <span class="hidden sm:inline">å­¦ç¿</span></button> <button class="inline-flex items-center min-h-[44px] px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors shadow-sm" aria-label="ã«ã¼ããè¿½å "><svg class="w-5 h-5 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> <span class="hidden sm:inline">ã«ã¼ããè¿½å </span></button></div>'),Bf=X('<div class="flex flex-wrap items-center gap-4 sm:gap-6 mt-4 pt-4 border-t border-gray-100 text-sm text-gray-600"><div class="flex items-center"><svg class="w-4 h-4 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg> <span class="font-medium"> </span> <span class="ml-1">æ</span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div></div>'),Pf=wt('<svg class="w-5 h-5 text-green-500 mr-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'),Df=wt('<svg class="w-5 h-5 text-red-500 mr-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>'),Mf=X('<div class="fixed top-4 left-4 right-4 sm:left-auto sm:right-4 sm:max-w-md z-50 animate-slide-in svelte-1e2lypv"><div><div class="flex items-center"><!> <p class="text-gray-900 font-medium"> </p></div></div></div>'),jf=X('<div class="flex items-center justify-center py-16"><svg class="animate-spin h-8 w-8 text-indigo-600" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>'),Rf=X('<div class="min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50"><header class="bg-white shadow-sm border-b border-gray-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex flex-col gap-3"><div class="flex items-center gap-4"><button class="p-3 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0" aria-label="ã³ã¬ã¯ã·ã§ã³ä¸è¦§ã«æ»ã"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg></button> <!></div> <!></div> <!></div></header> <!> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!></div></div> <!> <!> <!>',1);function Tf(r,n){Tt(n,!1);const a=()=>Pi(Er,"$cards",l),[l,f]=Di();let u=Me(n,"collectionId",8),m=Me(n,"onBack",8),h=re(null),g=re(!0),y=re(!1),P=re(null),S=re(!1),A=re(null),K=re(!1),T=re(!1),V=re({show:!1,message:"",type:"success"});Mi(async()=>{await Z()});async function Z(){R(g,!0);try{if(R(h,await fr.getById(u())),!v(h)){console.error("Collection not found:",u()),m()();return}await Er.load(u())}catch(ge){console.error("Failed to load collection:",ge),le("ã³ã¬ã¯ã·ã§ã³ã®èª­ã¿è¾¼ã¿ã«å¤±æãã¾ãã","error")}finally{R(g,!1)}}function le(ge,L="success"){R(V,{show:!0,message:ge,type:L}),setTimeout(()=>{Bt(V,v(V).show=!1)},3e3)}function ve(){R(P,null),R(y,!0)}function we(ge){R(P,ge),R(y,!0)}function ce(ge){R(A,ge),R(S,!0)}async function G(ge){try{await Er.create(u(),ge.detail),le("ã«ã¼ããè¿½å ãã¾ããï¼")}catch{le("ã«ã¼ãã®è¿½å ã«å¤±æãã¾ãã","error")}}async function oe(ge){try{const{id:L,...he}=ge.detail;await Er.update(L,he),le("ã«ã¼ããæ´æ°ãã¾ããï¼")}catch{le("ã«ã¼ãã®æ´æ°ã«å¤±æãã¾ãã","error")}}async function pe(){if(v(A))try{await Er.delete(v(A).id,u()),le("ã«ã¼ããåé¤ãã¾ããï¼"),R(A,null)}catch{le("ã«ã¼ãã®åé¤ã«å¤±æãã¾ãã","error")}}function ue(){R(y,!1),R(P,null)}function je(){R(S,!1),R(A,null)}function Ke(){if(a().length===0){le("å­¦ç¿ãéå§ããåã«ãã¾ãã«ã¼ããè¿½å ãã¦ãã ããï¼","error");return}R(K,!0)}async function Ne(){await Rs(),R(K,!1),await Er.load(u())}async function $e(){if(a().length===0){le("ã¨ã¯ã¹ãã¼ãããã«ã¼ããããã¾ãã","error");return}R(T,!0);try{await _f(u()),le("ã³ã¬ã¯ã·ã§ã³ãã¨ã¯ã¹ãã¼ããã¾ããï¼")}catch(ge){console.error("Export failed:",ge),le("ã³ã¬ã¯ã·ã§ã³ã®ã¨ã¯ã¹ãã¼ãã«å¤±æãã¾ãã","error")}finally{R(T,!1)}}qt();var J=Rf(),xe=Br(J),Re=M(xe),De=M(Re),He=M(De),We=M(He),Ce=M(We),qe=F(Ce,2);{var nt=ge=>{var L=Cf(),he=M(L),ye=M(he),Pe=F(he,2);{var Ve=St=>{var ot=Ef(),at=M(ot);Be(()=>Oe(at,(v(h),fe(()=>v(h).description)))),z(St,ot)};de(Pe,St=>{v(h),fe(()=>v(h).description)&&St(Ve)})}Be(()=>Oe(ye,(v(h),fe(()=>v(h).name)))),z(ge,L)};de(qe,ge=>{v(h)&&ge(nt)})}var ae=F(We,2);{var ke=ge=>{var L=Of(),he=M(L),ye=M(he);{var Pe=at=>{var st=Sf();z(at,st)},Ve=at=>{var st=Af();z(at,st)};de(ye,at=>{v(T)?at(Pe):at(Ve,!1)})}var St=F(he,2),ot=F(St,2);Be(()=>he.disabled=v(T)),be("click",he,$e),be("click",St,Ke),be("click",ot,ve),z(ge,L)};de(ae,ge=>{v(g),a(),fe(()=>!v(g)&&a().length>0)&&ge(ke)})}var Te=F(He,2);{var ie=ge=>{var L=Bf(),he=M(L),ye=F(M(he),2),Pe=M(ye),Ve=F(he,2),St=F(M(Ve),2),ot=M(St);Be(at=>{Oe(Pe,(a(),fe(()=>a().length))),Oe(ot,`æ´æ°ï¼${at??""}`)},[()=>(Xe(_n),v(h),fe(()=>_n(v(h).updatedAt)))]),z(ge,L)};de(Te,ge=>{v(h)&&ge(ie)})}var Ee=F(Re,2);{var ne=ge=>{var L=Mf(),he=M(L);let ye;var Pe=M(he),Ve=M(Pe);{var St=Ze=>{var At=Pf();z(Ze,At)},ot=Ze=>{var At=Df();z(Ze,At)};de(Ve,Ze=>{v(V),fe(()=>v(V).type==="success")?Ze(St):Ze(ot,!1)})}var at=F(Ve,2),st=M(at);Be(()=>{ye=Dr(he,1,"bg-white rounded-lg shadow-lg border-l-4 p-4",null,ye,{"border-green-500":v(V).type==="success","border-red-500":v(V).type==="error"}),Oe(st,(v(V),fe(()=>v(V).message)))}),z(ge,L)};de(Ee,ge=>{v(V),fe(()=>v(V).show)&&ge(ne)})}var Se=F(Ee,2),ht=M(Se);{var W=ge=>{var L=jf();z(ge,L)},Qe=ge=>{Sc(ge,{get cards(){return a()},onCreate:ve,onEdit:we,onDelete:ce})};de(ht,ge=>{v(g)?ge(W):ge(Qe,!1)})}var me=F(xe,2);ef(me,{get isOpen(){return v(y)},get card(){return v(P)},$$events:{create:G,update:oe,close:ue}});var ft=F(me,2);{let ge=mn(()=>v(A)?"ãã®ã«ã¼ããåé¤ãã¾ããï¼ãã®æä½ã¯åã«æ»ãã¾ããã":"");js(ft,{get isOpen(){return v(S)},title:"ã«ã¼ããåé¤",get message(){return v(ge)},confirmLabel:"åé¤",cancelLabel:"ã­ã£ã³ã»ã«",isDanger:!0,$$events:{confirm:pe,cancel:je}})}var Kt=F(ft,2);{var gt=ge=>{{let L=mn(()=>(v(h),fe(()=>v(h)?.name||"")));bf(ge,{get collectionId(){return u()},get collectionName(){return v(L)},onExit:Ne})}};de(Kt,ge=>{v(K)&&ge(gt)})}be("click",Ce,function(...ge){m()?.apply(this,ge)}),z(r,J),It(),f()}var If=wt('<svg class="w-5 h-5 text-green-500 mr-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'),Kf=wt('<svg class="w-5 h-5 text-red-500 mr-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>'),Ff=X('<div class="fixed top-4 left-4 right-4 sm:left-auto sm:right-4 sm:max-w-md z-50 animate-slide-in svelte-anx9w7"><div><div class="flex items-center"><!> <p class="text-gray-900 font-medium"> </p></div></div></div>'),Lf=wt('<svg class="animate-spin h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ã¨ã¯ã¹ãã¼ãä¸­...',1),Nf=wt('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> å¨ã³ã¬ã¯ã·ã§ã³ãã¨ã¯ã¹ãã¼ã',1),qf=X('<p class="text-sm text-gray-500 mt-2">ã¨ã¯ã¹ãã¼ãããã³ã¬ã¯ã·ã§ã³ãããã¾ãã</p>'),zf=wt('<svg class="animate-spin h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ã¤ã³ãã¼ãä¸­...',1),Uf=wt('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg> ãã¡ã¤ã«ããã¤ã³ãã¼ã',1),Vf=X('<div class="min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50"><header class="bg-white shadow-sm border-b border-gray-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex items-center gap-4"><button class="p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors" aria-label="ãã¼ã ã«æ»ã"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg></button> <div><h1 class="text-2xl font-bold text-gray-900">è¨­å®</h1> <p class="text-sm text-gray-600">ãã¼ã¿ã¨è¨­å®ãç®¡ç</p></div></div></div></header> <!> <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="bg-white rounded-lg shadow-md p-6 mb-6"><h2 class="text-xl font-semibold text-gray-900 mb-4">ãã¼ã¿ã®ã¨ã¯ã¹ãã¼ã</h2> <p class="text-gray-600 mb-4">å¨ã¦ã®ã³ã¬ã¯ã·ã§ã³ãã«ã¼ããã¡ãã£ã¢ãJSONãã¡ã¤ã«ã¨ãã¦ãã¦ã³ã­ã¼ããã¾ããããã¯ã¢ãããä»ã®ããã¤ã¹ã¸ã®ãã¼ã¿è»¢éã«ä½¿ç¨ã§ãã¾ãã</p> <button class="inline-flex items-center px-6 py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"><!></button> <!></div> <div class="bg-white rounded-lg shadow-md p-6"><h2 class="text-xl font-semibold text-gray-900 mb-4">ãã¼ã¿ã®ã¤ã³ãã¼ã</h2> <p class="text-gray-600 mb-4">ä»¥åã«ã¨ã¯ã¹ãã¼ãããJSONãã¡ã¤ã«ããã³ã¬ã¯ã·ã§ã³ãã¤ã³ãã¼ããã¾ããæ¢å­ã®ã³ã¬ã¯ã·ã§ã³ã®å¦çæ¹æ³ãé¸æãã¦ãã ããã</p> <div class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-2">ã¤ã³ãã¼ãæ¹æ³</label> <div class="space-y-2"><label class="flex items-center"><input type="radio" class="w-4 h-4 text-indigo-600 focus:ring-indigo-500"/> <span class="ml-2 text-sm"><span class="font-medium text-gray-900">ãã¼ã¸</span> <span class="text-gray-600">- æ¢å­ã®ã³ã¬ã¯ã·ã§ã³ãã¹ã­ãã</span></span></label> <label class="flex items-center"><input type="radio" class="w-4 h-4 text-indigo-600 focus:ring-indigo-500"/> <span class="ml-2 text-sm"><span class="font-medium text-gray-900">ä¸æ¸ã</span> <span class="text-gray-600">- åãIDã®ã³ã¬ã¯ã·ã§ã³ãä¸æ¸ã</span></span></label></div></div> <input type="file" accept=".json,application/json" class="hidden"/> <button class="inline-flex items-center px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"><!></button> <div class="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"><p class="text-sm text-yellow-800"><strong>è­¦åï¼</strong>ãä¸æ¸ãããé¸æããã¨ãåãIDã®æ¢å­ã³ã¬ã¯ã·ã§ã³ãä¸æ¸ãããã¾ããäºåã«ç¾å¨ã®ãã¼ã¿ãã¨ã¯ã¹ãã¼ããã¦ãã ããï¼</p></div></div> <div class="mt-8 text-center text-sm text-gray-500"><p>ã¡ã¢ãªã¢ v1.0.0</p> <p class="mt-1">ãã¹ã¦ã®ãã¼ã¿ã¯ãä½¿ãã®ããã¤ã¹ã«ã­ã¼ã«ã«ä¿å­ããã¾ã</p></div></div></div>');function $f(r,n){Tt(n,!1);const a=()=>Pi(fr,"$collections",l),[l,f]=Di(),u=[];let m=Me(n,"onBack",8);An();let h=re("merge"),g=re(!1),y=re(!1),P=re(),S=re({show:!1,message:"",type:"success"});function A(ne,Se="success"){R(S,{show:!0,message:ne,type:Se}),setTimeout(()=>{Bt(S,v(S).show=!1)},4e3)}async function K(){if(a().length===0){A("ã¨ã¯ã¹ãã¼ãããã³ã¬ã¯ã·ã§ã³ãããã¾ãã","error");return}R(y,!0);try{await wf(),A(`${a().length} ä»¶ã®ã³ã¬ã¯ã·ã§ã³ãã¨ã¯ã¹ãã¼ããã¾ããï¼`)}catch(ne){console.error("Export failed:",ne),A("ã³ã¬ã¯ã·ã§ã³ã®ã¨ã¯ã¹ãã¼ãã«å¤±æãã¾ãã","error")}finally{R(y,!1)}}function T(){v(P)&&v(P).click()}async function V(ne){const Se=ne.target.files?.[0];if(!Se)return;const ht=await kf(Se);if(!ht.valid){A(`ç¡å¹ãªãã¡ã¤ã«ï¼${ht.error}`,"error"),v(P)&&Bt(P,v(P).value="");return}R(g,!0);try{const W=await xf(Se,v(h));await fr.load();const Qe=[];W.imported>0&&Qe.push(`${W.imported} imported`),W.updated>0&&Qe.push(`${W.updated} updated`),W.skipped>0&&Qe.push(`${W.skipped} skipped`),A(`ã¤ã³ãã¼ãæåï¼${Qe.join(", ")}`)}catch(W){console.error("Import failed:",W),A(`ã¤ã³ãã¼ãã«å¤±æãã¾ããï¼${W.message}`,"error")}finally{R(g,!1),v(P)&&Bt(P,v(P).value="")}}qt();var Z=Vf(),le=M(Z),ve=M(le),we=M(ve),ce=M(we),G=F(le,2);{var oe=ne=>{var Se=Ff(),ht=M(Se);let W;var Qe=M(ht),me=M(Qe);{var ft=L=>{var he=If();z(L,he)},Kt=L=>{var he=Kf();z(L,he)};de(me,L=>{v(S),fe(()=>v(S).type==="success")?L(ft):L(Kt,!1)})}var gt=F(me,2),ge=M(gt);Be(()=>{W=Dr(ht,1,"bg-white rounded-lg shadow-lg border-l-4 p-4",null,W,{"border-green-500":v(S).type==="success","border-red-500":v(S).type==="error"}),Oe(ge,(v(S),fe(()=>v(S).message)))}),z(ne,Se)};de(G,ne=>{v(S),fe(()=>v(S).show)&&ne(oe)})}var pe=F(G,2),ue=M(pe),je=F(M(ue),4),Ke=M(je);{var Ne=ne=>{var Se=Lf();z(ne,Se)},$e=ne=>{var Se=Nf();z(ne,Se)};de(Ke,ne=>{v(y)?ne(Ne):ne($e,!1)})}var J=F(je,2);{var xe=ne=>{var Se=qf();z(ne,Se)};de(J,ne=>{a(),fe(()=>a().length===0)&&ne(xe)})}var Re=F(ue,2),De=F(M(Re),4),He=F(M(De),2),We=M(He),Ce=M(We);Ce.value=Ce.__value="merge";var qe=F(We,2),nt=M(qe);nt.value=nt.__value="replace";var ae=F(De,2);Bi(ae,ne=>R(P,ne),()=>v(P));var ke=F(ae,2),Te=M(ke);{var ie=ne=>{var Se=zf();z(ne,Se)},Ee=ne=>{var Se=Uf();z(ne,Se)};de(Te,ne=>{v(g)?ne(ie):ne(Ee,!1)})}Be(()=>{je.disabled=(v(y),a(),fe(()=>v(y)||a().length===0)),ke.disabled=v(g)}),be("click",ce,function(...ne){m()?.apply(this,ne)}),be("click",je,K),Pa(u,[],Ce,()=>v(h),ne=>R(h,ne)),Pa(u,[],nt,()=>v(h),ne=>R(h,ne)),be("change",ae,V),be("click",ke,T),z(r,Z),It(),f()}var Hf=X('<button class="inline-flex items-center min-h-[44px] px-3 py-2 text-gray-700 hover:bg-gray-100 font-medium rounded-lg transition-colors" aria-label="è¨­å®"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> è¨­å®</button>'),Wf=X('<button class="inline-flex items-center min-h-[44px] px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors shadow-sm"><svg class="w-5 h-5 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> <span class="hidden sm:inline">æ°ããã³ã¬ã¯ã·ã§ã³</span></button>'),Yf=X('<header class="bg-white shadow-sm border-b border-gray-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex items-center justify-between"><div class="min-w-0"><h1 class="text-2xl font-bold text-gray-900 truncate">ã¡ã¢ãªã¢</h1> <p class="text-sm text-gray-600">ð</p></div> <div class="flex items-center gap-2 flex-shrink-0"><!> <!></div></div></div></header>'),Gf=wt('<svg class="w-5 h-5 text-green-500 mr-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'),Xf=wt('<svg class="w-5 h-5 text-red-500 mr-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>'),Jf=X('<div class="fixed top-4 left-4 right-4 sm:left-auto sm:right-4 sm:max-w-md z-50 animate-slide-in svelte-1n46o8q"><div><div class="flex items-center"><!> <p class="text-gray-900 font-medium"> </p></div></div></div>'),Qf=X('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="bg-white rounded-lg shadow-md p-8 text-center"><div class="inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4"><svg class="w-8 h-8 text-red-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <h2 class="text-xl font-semibold text-gray-900 mb-2">ãã¼ã¿ãã¼ã¹ã¨ã©ã¼</h2> <p class="text-gray-600 mb-4">ãã¼ã¿ãã¼ã¹ã®åæåã«å¤±æãã¾ããããã¼ã¸ãæ´æ°ãããããã©ã¦ã¶ã®äºææ§ãç¢ºèªãã¦ãã ããã</p> <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">ãã¼ã¸ãåèª­ã¿è¾¼ã¿</button></div></div>'),Zf=X('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!> <div class="mt-8 text-center"><span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">v1.0.0</span></div></div>'),ed=X('<main class="min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50"><!> <!> <!></main> <!> <!>',1);function td(r,n){Tt(n,!1);const a=()=>Pi(fr,"$collections",l),[l,f]=Di();let u=re(!1),m=re(!1),h=re(null),g=re(!1),y=re(null),P=re({show:!1,message:"",type:"success"}),S=re("home"),A=re(null);Mi(async()=>{Hu(),R(u,await Uu()),v(u)&&await fr.load()});function K(ae,ke="success"){R(P,{show:!0,message:ae,type:ke}),setTimeout(()=>{Bt(P,v(P).show=!1)},3e3)}function T(){R(h,null),R(m,!0)}function V(ae){R(h,ae),R(m,!0)}function Z(ae){R(y,ae),R(g,!0)}async function le(ae){try{await fr.create(ae.detail),K("ã³ã¬ã¯ã·ã§ã³ãä½æãã¾ããï¼")}catch{K("ã³ã¬ã¯ã·ã§ã³ã®ä½æã«å¤±æãã¾ãã","error")}}async function ve(ae){try{const{id:ke,...Te}=ae.detail;await fr.update(ke,Te),K("ã³ã¬ã¯ã·ã§ã³ãæ´æ°ãã¾ããï¼")}catch{K("ã³ã¬ã¯ã·ã§ã³ã®æ´æ°ã«å¤±æãã¾ãã","error")}}async function we(){if(v(y))try{await fr.delete(v(y).id),K("ã³ã¬ã¯ã·ã§ã³ãåé¤ãã¾ããï¼"),R(y,null)}catch{K("ã³ã¬ã¯ã·ã§ã³ã®åé¤ã«å¤±æãã¾ãã","error")}}function ce(){R(m,!1),R(h,null)}function G(){R(g,!1),R(y,null)}function oe(ae){R(A,ae.id),R(S,"collection-detail")}function pe(){R(A,null),R(S,"home")}function ue(){R(S,"settings")}qt();var je=ed(),Ke=Br(je),Ne=M(Ke);{var $e=ae=>{var ke=Yf(),Te=M(ke),ie=M(Te),Ee=F(M(ie),2),ne=M(Ee);{var Se=Qe=>{var me=Hf();be("click",me,ue),z(Qe,me)};de(ne,Qe=>{v(u)&&Qe(Se)})}var ht=F(ne,2);{var W=Qe=>{var me=Wf();be("click",me,T),z(Qe,me)};de(ht,Qe=>{v(u)&&a().length>0&&Qe(W)})}z(ae,ke)};de(Ne,ae=>{v(S)==="home"&&ae($e)})}var J=F(Ne,2);{var xe=ae=>{var ke=Jf(),Te=M(ke);let ie;var Ee=M(Te),ne=M(Ee);{var Se=me=>{var ft=Gf();z(me,ft)},ht=me=>{var ft=Xf();z(me,ft)};de(ne,me=>{v(P).type==="success"?me(Se):me(ht,!1)})}var W=F(ne,2),Qe=M(W);Be(()=>{ie=Dr(Te,1,"bg-white rounded-lg shadow-lg border-l-4 p-4",null,ie,{"border-green-500":v(P).type==="success","border-red-500":v(P).type==="error"}),Oe(Qe,v(P).message)}),z(ae,ke)};de(J,ae=>{v(P).show&&ae(xe)})}var Re=F(J,2);{var De=ae=>{var ke=Qf(),Te=M(ke),ie=F(M(Te),6);be("click",ie,()=>window.location.reload()),z(ae,ke)},He=ae=>{var ke=Zf(),Te=M(ke);nc(Te,{get collections(){return a()},onCreate:T,onEdit:V,onDelete:Z,onClick:oe}),z(ae,ke)},We=ae=>{Tf(ae,{get collectionId(){return v(A)},onBack:pe})},Ce=ae=>{$f(ae,{onBack:pe})};de(Re,ae=>{v(u)?v(S)==="home"?ae(He,1):v(S)==="collection-detail"?ae(We,2):v(S)==="settings"&&ae(Ce,3):ae(De)})}var qe=F(Ke,2);fc(qe,{get isOpen(){return v(m)},get collection(){return v(h)},$$events:{create:le,update:ve,close:ce}});var nt=F(qe,2);{let ae=mn(()=>v(y)?`ã${v(y).name}ããåé¤ãã¾ããï¼ãã®ã³ã¬ã¯ã·ã§ã³ã«ãã ${v(y).cardCount||0} æã®ã«ã¼ããå¨ã¦åé¤ããã¾ãããã®æä½ã¯åã«æ»ãã¾ããã`:"");js(nt,{get isOpen(){return v(g)},title:"ã³ã¬ã¯ã·ã§ã³ãåé¤",get message(){return v(ae)},confirmLabel:"åé¤",cancelLabel:"ã­ã£ã³ã»ã«",isDanger:!0,$$events:{confirm:we,cancel:G}})}z(r,je),It(),f()}mu(td,{target:document.getElementById("app")});
